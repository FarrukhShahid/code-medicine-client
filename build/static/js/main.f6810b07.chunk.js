(this["webpackJsonpcode-medicine"]=this["webpackJsonpcode-medicine"]||[]).push([[0],{1004:function(e,t,a){},1005:function(e,t,a){},1092:function(e,t,a){},1093:function(e,t,a){},1095:function(e,t,a){},1096:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(18),o=a.n(r),c=(a(526),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function s(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var i=a(24),d=a(16),u=(a(531),a(60)),m=a(238),p=a(49),_="".concat("","/"),h="".concat("","/login"),b="".concat("","/register"),g="".concat("","/profile"),f="".concat("","/todays-patient"),v="".concat("","/visits"),y="".concat("","/procedures"),E="".concat("","/forgot-password"),N="".concat("","/search-doctors"),w="".concat("","/payments"),k="".concat("","/settings"),x=a(10),S=a(14),C=a(12),j=a(11),O=a(22),D=a.n(O),P="".concat("http","://").concat("codemedicine.ddns.net"),M="".concat("/test","/socket.io"),I="".concat(P).concat("/test"),T="".concat(I,"/users"),L="".concat(T,"/login"),A="".concat(T,"/register"),F="".concat(T,"/update"),R=("".concat(T,"/delete"),"".concat(T,"/logout")),B="".concat(T,"/search/id"),z="".concat(T,"/search/token"),q="".concat(T,"/search/credentials"),Y="".concat(T,"/admin"),V="".concat(Y,"/patient/create"),H=("".concat(Y,"/patient/update"),"".concat(Y,"/patient/delete"),"".concat(Y,"/doctor/create")),G="".concat(Y,"/doctor/update"),U="".concat(Y,"/doctor/delete"),K="".concat(I,"/appointments"),W="".concat(K,"/create"),$="".concat(K,"/update"),J=("".concat(K,"/delete"),"".concat(K,"/search")),Z="".concat(K,"/search/id"),Q="".concat(K,"/search/today"),X="".concat(K,"/charges"),ee="".concat(X,"/update"),te="".concat(K,"/invoice"),ae="".concat(K,"/checkout"),ne="".concat(I,"/procedures"),le="".concat(ne,"/create"),re="".concat(ne,"/update"),oe="".concat(ne,"/delete"),ce="".concat(ne,"/search"),se=("".concat(ne,"/search/id"),"".concat(ne,"/appointment/id")),ie="".concat(I,"/procedures_list"),de="".concat(ie,"/create"),ue=("".concat(ie,"/update"),"".concat(ie,"/delete"),"".concat(ie,"/search"),"".concat(ie,"/search/id"),"".concat(I,"/doctor/details")),me=("".concat(ue,"/create"),"".concat(ue,"/update"),"".concat(ue,"/delete"),"".concat(ue,"/search/id"),"".concat(I,"/branches")),pe=("".concat(me,"/create"),"".concat(me,"/update"),"".concat(me,"/delete"),"".concat(me,"/search/id"),"".concat(I,"/payments")),_e="".concat(pe,"/create"),he=("".concat(pe,"/update"),"".concat(pe,"/delete"),"".concat(pe,"/search/id"),"".concat(I,"/users")),be="".concat(he,"/register"),ge=("".concat(be,"/admin"),"".concat(he,"/login"),"".concat(he,"/logout")),fe="".concat(he,"/profile"),ve=("".concat(fe,"/update"),"".concat(he,"/search"),"".concat(he,"/search/id"),"".concat(I,"/appointments")),ye=("".concat(ve,"/create"),"".concat(ve,"/update"),"".concat(ve,"/search")),Ee="".concat(ye,"/id"),Ne=("".concat(ye,"/today"),"".concat(ve,"/charges")),we=("".concat(Ne,"/update"),"".concat(ve,"/checkout"),"".concat(ve,"/invoice"),"".concat(ve,"/procedures")),ke=("".concat(we,"/create"),"".concat(we,"/update"),"".concat(we,"/delete"),"".concat(I,"/profits")),xe=("".concat(ke,"/search/visit/id"),"".concat(ke,"/update"),"".concat(I,"/doctordetails")),Se=("".concat(xe,"/search"),a(21)),Ce=a.n(Se),je=a(37),Oe=function(e,t){return D.a.post(e,t)},De=function(e){return D.a.get(e)},Pe=function(e){return D.a.post(B,{user_id:e})},Me=function(){return D.a.post(R,{token:localStorage.getItem("user")})},Ie=function(e){return D.a.get("".concat(he,"?role=Doctor"))},Te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return""!==t?D.a.get("".concat(Q,"?tag=").concat(new Date(new Date(e.getTime()+6e4*e.getTimezoneOffset()).toISOString()),"&type=").concat(t)):D.a.get("".concat(Q,"?tag=").concat(new Date(e)))},Le=function(e){return D.a.post(ae,{appointment_id:e})},Ae=function(e){return D.a.get("".concat(X,"?tag=").concat(e))},Fe=function(e){return D.a.put(ee,e)},Re=function(e){return D.a.get("".concat(Z,"?tag=").concat(e))},Be=function(e){return D.a.get("".concat(se,"?tag=").concat(e))},ze=function(e){return D.a.post(le,e)},qe=function(e){return D.a.put(re,e)},Ye=function(e,t,a){return D.a.get("".concat(ce,"?appointment_id=").concat(e,"&doctor_id=").concat(t,"&date=").concat(a))},Ve=function(e){return e&&""!==e?D.a.get("".concat(ie,"?search=").concat(e)):D.a.get(ie)};function He(e){return{type:"left_sidebar",payload:e}}function Ge(e){return{type:"active_user",payload:e}}function Ue(e){return{type:"active_page",payload:e}}function Ke(e){return function(t){Te(new Date(e)).then((function(e){t({type:"todays_patients",payload:e,loading:!1})})).catch((function(e){t({type:"todays_patients",payload:{data:{message:e,loading:!1}}})}))}}function We(){return{type:"clear_todays_patients"}}function $e(e){return{type:"update_single_record",payload:{id:e,new_item:D.a.get("".concat(Ee,"?tag=").concat(e)).data}}}function Je(){return{type:"settings-update-left-sidebar-list"}}function Ze(){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(je.a)(Ce.a.mark((function e(){var t;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie();case 2:return t=e.sent,e.abrupt("return",{type:"fetch-doctors",payload:t.data});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(){return et.apply(this,arguments)}function et(){return(et=Object(je.a)(Ce.a.mark((function e(){var t;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve();case 2:return t=e.sent,e.abrupt("return",{type:"fetch-procedure-list",payload:t.data});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}D.a.interceptors.request.use((function(e){var t=localStorage.getItem("user");return t&&(e.headers["code-medicine"]="".concat(t)),e}));var tt=a(67),at=a.n(tt),nt=a(23),lt=a.n(nt);var rt=function(e){return l.a.createElement("div",{className:"virtual-body navbar-top"},l.a.createElement("div",{className:"navbar navbar-expand-md navbar-dark fixed-top"},l.a.createElement("div",{className:"navbar-brand"},l.a.createElement("p",{className:"my-2"},"Cancel"))),l.a.createElement("div",{className:"page-content"},l.a.createElement(nt.SkeletonTheme,{color:"#292b2c",highlightColor:"#4F5950"},l.a.createElement("div",{className:"sidebar sidebar-dark sidebar-main sidebar-fixed sidebar-expand-md px-2"},l.a.createElement("div",{className:"d-flex justify-content-center"},l.a.createElement(lt.a,{className:"my-1",circle:!0,height:120,width:120})),l.a.createElement(lt.a,{className:"my-2",count:20,height:40}))),l.a.createElement("div",{className:"content-wrapper"},l.a.createElement("div",{className:"page-header page-header-light"},l.a.createElement(nt.SkeletonTheme,{color:"#ffffff",highlightColor:"#f2f2f2"},l.a.createElement(lt.a,{className:"my-2",count:1,height:40}))),l.a.createElement("div",{className:"content"},l.a.createElement(nt.SkeletonTheme,{color:"#ffffff",highlightColor:"#f2f2f2"},l.a.createElement(lt.a,{className:"my-2",height:150,count:1}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-8"},l.a.createElement(lt.a,{className:"my-2",height:300,count:3})),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(lt.a,{className:"my-2",height:300,count:4}))))))))},ot=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).authorize_token=function(e){at.a.isEmpty(n.props.active_user)&&(null!==e?D.a.get("".concat(z,"?tag=").concat(e)).then((function(e){n.props.set_active_user(e.data.payload)})).catch((function(e){console.log(e),localStorage.clear(),localStorage.setItem("cached-path",n.props.path),n.props.set_active_user({})})):localStorage.setItem("cached-path",n.props.path))},n.check_for_token=function(){return!!localStorage.getItem("user")},n.state={},n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.component,a=Object(m.a)(e,["component"]);console.log("path",this.props.path);var n=l.a.createElement(rt,null);return this.check_for_token()?at.a.isEmpty(this.props.active_user)||(n=l.a.createElement(p.b,Object.assign({},a,{render:function(e){return l.a.createElement(t,e)}}))):(console.log("invalid token"),n=l.a.createElement(p.a,{to:h})),n}}]),a}(n.Component);var ct=Object(i.b)((function(e){return{active_user:e.active_user}}),{set_active_user:Ge})(ot),st=a(57),it=a(134),dt=a.n(it),ut=a(13),mt=a(45),pt=a(68),_t=a.n(pt),ht=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(){return Object(x.a)(this,a),t.apply(this,arguments)}return Object(S.a)(a,[{key:"render",value:function(){var e=this.props,t=e.field_type,a=l.a.createElement("input",Object.assign({},e,{className:"form-control ".concat(e.error?"border-danger":""," ").concat(e.className)})),n=l.a.createElement("textarea",Object.assign({rows:"3",cols:"3"},e,{className:"form-control ".concat(e.error?"border-danger":""," ").concat(e.className)})),r=l.a.createElement(mt.a,e),o=l.a.createElement(_t.a,Object.assign({},e,{className:"clock_datatime_picker form-control ".concat(e.error?"border-danger":""," ").concat(e.className),inputProps:Object(ut.a)({placeholder:e.placeholder,className:"border-0 w-100"},e.inputProps)})),c="";c="text-area"===t?n:"date-time"===t?o:"select"===t?r:"custom"===t?e.custom_field:a;var s=e.parent_classes,i=e.inner_classes;return l.a.createElement("div",{className:"form-group ".concat(s," mb-0")},e.loading?l.a.createElement(nt.SkeletonTheme,{color:"#ffffff",highlightColor:"#f2f2f2"},l.a.createElement(lt.a,{className:"",count:1,height:15,width:80})):e.heading?l.a.createElement("label",{className:"col-form-label mb-0 pb-1"},e.heading,e.required?l.a.createElement("span",{className:"text-danger"}," * "):""):"",l.a.createElement("div",{className:i},e.loading?l.a.createElement(nt.SkeletonTheme,{color:"#ffffff",highlightColor:"#f2f2f2"},l.a.createElement(lt.a,{className:"mb-1",count:1,height:40})):c,e.helper?l.a.createElement("span",{className:"form-text text-muted mt-0"},e.helper):""))}}]),a}(n.Component);function bt(e,t,a){var n={position:st.b.POSITION.TOP_RIGHT,pauseOnFocusLoss:!0};switch(e){case"success":return st.b.success(a,n);case"error":return st.b.error(a,n);case"warning":return st.b.warn(a,n);case"info":return st.b.info(a,n);default:return Object(st.b)(a,n)}}var gt=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).on_text_field_change=function(e){switch(e.target.id){case"email_text_input":n.setState({email:{value:e.target.value,error:!1}});break;case"password_text_input":n.setState({password:{value:e.target.value,error:!1}});break;case"remember_me_text_input":n.setState({remember_me_option:e.target.checked})}},n.__check_hard_constraints=function(e){return""===e.email?(bt("error",0,"Please specify a username or phone number"),!1):""!==e.password||(bt("error",0,"Please give your password"),!1)},n.on_submit=function(e){e.preventDefault(),n.setState({loading_status:!0}),function(e){return D.a.post(L,e)}({username:n.state.email.value.trim(),password:n.state.password.value.trim(),remember_me:n.state.remember_me_option}).then(function(){var e=Object(je.a)(Ce.a.mark((function e(t){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.setItem("user",t.data.token),e.next=3,n.props.set_active_user(t.data.user);case 3:return e.next=5,n.props.fetch_doctors();case 5:return e.next=7,n.props.fetch_procedures_list();case 7:bt("success",0,t.data.message),n.setState({loading_status:!1}),localStorage.getItem("cached-path")?(n.props.history.push("".concat(_).concat(localStorage.getItem("cached-path").substring(1))),localStorage.removeItem("cached-path")):n.props.history.push(_);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&(e.response.status>=500?bt("error",0,"Server not responding! please try again later"):e.response.status>=400&&e.response.status<500&&bt("error",0,e.response.data.message),n.setState({loading_status:!1,email:{value:n.state.email.value,error:!0},password:{value:n.state.password.value,error:!0}})),console.log("login error",e)}))},n.state={email:{value:"",error:!1},password:{value:"",error:!1},remember_me_option:!0,loading_status:!1},n}return Object(S.a)(a,[{key:"render",value:function(){var e="";if(this.state.loading_status)e=l.a.createElement("div",{className:"mt-3"},l.a.createElement("div",{className:"d-flex justify-content-center "},l.a.createElement(dt.a,{type:"Rings",color:"#00BFFF",height:150,width:150,timeout:6e4})),l.a.createElement("div",{className:"d-flex justify-content-center"},l.a.createElement("p",null,"Loading...")));else{var t=l.a.createElement("div",{className:""},l.a.createElement(ht,{id:"email_text_input",heading:"Email",placeholder:"someone@hello.com",input_type:"email",onChange:this.on_text_field_change,value:this.state.email.value,error:this.state.email.error}),l.a.createElement(ht,{id:"password_text_input",heading:"Password",placeholder:"Enter your password",type:"password",onChange:this.on_text_field_change,value:this.state.password.value,error:this.state.password.error})),a=l.a.createElement("div",{className:"form-group d-flex align-items-center"},l.a.createElement("div",{className:"form-check mb-0"},l.a.createElement("label",{className:"form-check-label"},l.a.createElement("div",{className:"uniform-checker"},l.a.createElement("span",{className:this.state.remember_me_option?"checked":""},l.a.createElement("input",{type:"checkbox",name:"remember",id:"remember_me_text_input",defaultChecked:this.state.remember_me_option,value:this.state.remember_me_option,onChange:this.on_text_field_change,className:"form-input-styled"}))),"Remember")),l.a.createElement(d.b,{to:E,className:"ml-auto"},"Forgot password?"));e=l.a.createElement("div",{className:""},t,l.a.createElement("hr",null),a)}return l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-4 col-md-6 p-0"},l.a.createElement("form",{method:"post",onSubmit:this.on_submit},l.a.createElement("div",{className:"card m-0",style:{height:"100vh"}},l.a.createElement("div",{className:"card-header text-center h4 font-weight-light"},l.a.createElement("span",null,"Sign in"),l.a.createElement("hr",null)),l.a.createElement("div",{className:"card-body px-5"},e,l.a.createElement("hr",null),l.a.createElement("div",{className:"form-group "},l.a.createElement("button",{type:"submit",className:"btn btn-block bg-teal-400 btn-labeled btn-labeled-right ml-auto",style:{textTransform:"inherit"},onClick:this.on_submit},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-circle-right2"})),"Sign in")),l.a.createElement("div",{className:"form-group text-center text-muted content-divider"},l.a.createElement("span",{className:"px-2"},"Don't have an account?")),l.a.createElement("div",{className:"form-group"},l.a.createElement("button",{type:"button",className:"btn btn-block bg-dark btn-labeled btn-labeled-right ml-auto",style:{textTransform:"inherit"},onClick:function(){return bt("info",0,"Patients signup is not available now")}},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-plus2"})),"Sign up")),l.a.createElement("span",{className:"form-text text-center text-muted"},"By continuing, you're confirming that you've read our ",l.a.createElement(d.b,{to:h},"Terms & Conditions")," and ",l.a.createElement(d.b,{to:h},"Cookie Policy")))))),l.a.createElement("div",{className:"col-lg-8 col-md-6 d-none d-lg-block d-xl-block d-md-block background_custom"})))}}]),a}(n.Component);var ft=Object(i.b)((function(e){return{active_user:e.active_user}}),{set_active_user:Ge,fetch_doctors:Ze,fetch_procedures_list:Xe})(Object(p.h)(gt)),vt=(a(579),a(307)),yt=(a(580),[{id:"blood_group_selection",label:"A+"},{id:"blood_group_selection",label:"A-"},{id:"blood_group_selection",label:"B+"},{id:"blood_group_selection",label:"B-"},{id:"blood_group_selection",label:"AB+"},{id:"blood_group_selection",label:"AB-"},{id:"blood_group_selection",label:"O+"},{id:"blood_group_selection",label:"O-"},{id:"blood_group_selection",label:"Unknown"}]),Et=[{id:"gender_selection",label:"Male"},{id:"gender_selection",label:"Female"},{id:"gender_selection",label:"other"}],Nt=[{id:"role_selection",label:"Patient"},{id:"role_selection",label:"Doctor"},{id:"role_selection",label:"Admin"}],wt=[{id:"status_selection",label:"Scheduled"},{id:"status_selection",label:"Waiting"},{id:"status_selection",label:"Checked in"},{id:"status_selection",label:"Checked out"},{id:"status_selection",label:"Emergency"}],kt=[{label:"fedral",options:[{id:"city_selection",label:"Islamabad"}]},{label:"punjab",options:[{id:"city_selection",label:"Ahmed Nager Chatha"},{id:"city_selection",label:"Ahmadpur East"},{id:"city_selection",label:"Ali Khan Abad"},{id:"city_selection",label:"Alipur"},{id:"city_selection",label:"Arifwala"},{id:"city_selection",label:"Attock"},{id:"city_selection",label:"Bhera"},{id:"city_selection",label:"Bhalwal"},{id:"city_selection",label:"Bahawalnagar"},{id:"city_selection",label:"Bahawalpur"},{id:"city_selection",label:"Bhakkar"},{id:"city_selection",label:"Burewala"},{id:"city_selection",label:"Chillianwala"},{id:"city_selection",label:"Chakwal"},{id:"city_selection",label:"Chichawatni"},{id:"city_selection",label:"Chiniot"},{id:"city_selection",label:"Chishtian"},{id:"city_selection",label:"Daska"},{id:"city_selection",label:"Darya Khan"},{id:"city_selection",label:"Dera Ghazi Khan"},{id:"city_selection",label:"Dhaular"},{id:"city_selection",label:"Dina"},{id:"city_selection",label:"Dinga"},{id:"city_selection",label:"Dipalpur"},{id:"city_selection",label:"Faisalabad"},{id:"city_selection",label:"Fateh Jang"},{id:"city_selection",label:"Ghakhar Mandi"},{id:"city_selection",label:"Gojra"},{id:"city_selection",label:"Gujranwala"},{id:"city_selection",label:"Gujrat"},{id:"city_selection",label:"Gujar Khan"},{id:"city_selection",label:"Hafizabad"},{id:"city_selection",label:"Haroonabad"},{id:"city_selection",label:"Hasilpur"},{id:"city_selection",label:"Haveli"},{id:"city_selection",label:"Lakha"},{id:"city_selection",label:"Jalalpur"},{id:"city_selection",label:"Jattan"},{id:"city_selection",label:"Jampur"},{id:"city_selection",label:"Jaranwala"},{id:"city_selection",label:"Jhang"},{id:"city_selection",label:"Jhelum"},{id:"city_selection",label:"Kalabagh"},{id:"city_selection",label:"Karor Lal Esan"},{id:"city_selection",label:"Kasur"},{id:"city_selection",label:"Kamalia"},{id:"city_selection",label:"Kamoke"},{id:"city_selection",label:"Khanewal"},{id:"city_selection",label:"Khanpur"},{id:"city_selection",label:"Kharian"},{id:"city_selection",label:"Khushab"},{id:"city_selection",label:"Kot Adu"},{id:"city_selection",label:"Jauharabad"},{id:"city_selection",label:"Lahore"},{id:"city_selection",label:"Lalamusa"},{id:"city_selection",label:"Layyah"},{id:"city_selection",label:"Liaquat Pur"},{id:"city_selection",label:"Lodhran"},{id:"city_selection",label:"Malakwal"},{id:"city_selection",label:"Mamoori"},{id:"city_selection",label:"Mailsi"},{id:"city_selection",label:"Mandi Bahauddin"},{id:"city_selection",label:"Mian Channu"},{id:"city_selection",label:"Mianwali"},{id:"city_selection",label:"Multan"},{id:"city_selection",label:"Murree"},{id:"city_selection",label:"Muridke"},{id:"city_selection",label:"Mianwali Bangla"},{id:"city_selection",label:"Muzaffargarh"},{id:"city_selection",label:"Narowal"},{id:"city_selection",label:"Okara"},{id:"city_selection",label:"Renala Khurd"},{id:"city_selection",label:"Pakpattan"},{id:"city_selection",label:"Pattoki"},{id:"city_selection",label:"Pir Mahal"},{id:"city_selection",label:"Qaimpur"},{id:"city_selection",label:"Qila Didar Singh"},{id:"city_selection",label:"Rabwah"},{id:"city_selection",label:"Raiwind"},{id:"city_selection",label:"Rajanpur"},{id:"city_selection",label:"Rahim Yar Khan"},{id:"city_selection",label:"Rawalpindi"},{id:"city_selection",label:"Sadiqabad"},{id:"city_selection",label:"Safdarabad"},{id:"city_selection",label:"Sahiwal"},{id:"city_selection",label:"Sangla Hill"},{id:"city_selection",label:"Sarai Alamgir"},{id:"city_selection",label:"Sargodha"},{id:"city_selection",label:"Shakargarh"},{id:"city_selection",label:"Sheikhupura"},{id:"city_selection",label:"Sialkot"},{id:"city_selection",label:"Sohawa"},{id:"city_selection",label:"Soianwala"},{id:"city_selection",label:"Siranwali"},{id:"city_selection",label:"Talagang"},{id:"city_selection",label:"Taxila"},{id:"city_selection",label:"Toba Tek Singh"},{id:"city_selection",label:"Vehari"},{id:"city_selection",label:"Wah Cantonment"},{id:"city_selection",label:"Wazirabad"}]},{label:"sindh",options:[{id:"city_selection",label:"Badin"},{id:"city_selection",label:"Bhirkan"},{id:"city_selection",label:"Rajo Khanani"},{id:"city_selection",label:"Chak"},{id:"city_selection",label:"Dadu"},{id:"city_selection",label:"Digri"},{id:"city_selection",label:"Diplo"},{id:"city_selection",label:"Dokri"},{id:"city_selection",label:"Ghotki"},{id:"city_selection",label:"Haala"},{id:"city_selection",label:"Hyderabad"},{id:"city_selection",label:"Islamkot"},{id:"city_selection",label:"Jacobabad"},{id:"city_selection",label:"Jamshoro"},{id:"city_selection",label:"Jungshahi"},{id:"city_selection",label:"Kandhkot"},{id:"city_selection",label:"Kandiaro"},{id:"city_selection",label:"Karachi"},{id:"city_selection",label:"Kashmore"},{id:"city_selection",label:"Keti Bandar"},{id:"city_selection",label:"Khairpur"},{id:"city_selection",label:"Kotri"},{id:"city_selection",label:"Larkana"},{id:"city_selection",label:"Matiari"},{id:"city_selection",label:"Mehar"},{id:"city_selection",label:"Mirpur Khas"},{id:"city_selection",label:"Mithani"},{id:"city_selection",label:"Mithi"},{id:"city_selection",label:"Mehrabpur"},{id:"city_selection",label:"Moro"},{id:"city_selection",label:"Nagarparkar"},{id:"city_selection",label:"Naudero"},{id:"city_selection",label:"Naushahro Feroze"},{id:"city_selection",label:"Naushara"},{id:"city_selection",label:"Nawabshah"},{id:"city_selection",label:"Nazimabad"},{id:"city_selection",label:"Qambar"},{id:"city_selection",label:"Qasimabad"},{id:"city_selection",label:"Ranipur"},{id:"city_selection",label:"Ratodero"},{id:"city_selection",label:"Rohri"},{id:"city_selection",label:"Sakrand"},{id:"city_selection",label:"Sanghar"},{id:"city_selection",label:"Shahbandar"},{id:"city_selection",label:"Shahdadkot"},{id:"city_selection",label:"Shahdadpur"},{id:"city_selection",label:"Shahpur Chakar"},{id:"city_selection",label:"Shikarpaur"},{id:"city_selection",label:"Sukkur"},{id:"city_selection",label:"Tangwani"},{id:"city_selection",label:"Tando Adam Khan"},{id:"city_selection",label:"Tando Allahyar"},{id:"city_selection",label:"Tando Muhammad Khan"},{id:"city_selection",label:"Thatta"},{id:"city_selection",label:"Umerkot"},{id:"city_selection",label:"Warah"}]},{label:"kpk",options:[{id:"city_selection",label:"Abbottabad"},{id:"city_selection",label:"Adezai"},{id:"city_selection",label:"Alpuri"},{id:"city_selection",label:"Akora Khattak"},{id:"city_selection",label:"Ayubia"},{id:"city_selection",label:"Banda Daud Shah"},{id:"city_selection",label:"Bannu"},{id:"city_selection",label:"Batkhela"},{id:"city_selection",label:"Battagram"},{id:"city_selection",label:"Birote"},{id:"city_selection",label:"Chakdara"},{id:"city_selection",label:"Charsadda"},{id:"city_selection",label:"Chitral"},{id:"city_selection",label:"Daggar"},{id:"city_selection",label:"Dargai"},{id:"city_selection",label:"Darya Khan"},{id:"city_selection",label:"Dera Ismail Khan"},{id:"city_selection",label:"Doaba"},{id:"city_selection",label:"Dir"},{id:"city_selection",label:"Drosh"},{id:"city_selection",label:"Hangu"},{id:"city_selection",label:"Haripur"},{id:"city_selection",label:"Karak"},{id:"city_selection",label:"Kohat"},{id:"city_selection",label:"Kulachi"},{id:"city_selection",label:"Lakki Marwat"},{id:"city_selection",label:"Latamber"},{id:"city_selection",label:"Madyan"},{id:"city_selection",label:"Mansehra"},{id:"city_selection",label:"Mardan"},{id:"city_selection",label:"Mastuj"},{id:"city_selection",label:"Mingora"},{id:"city_selection",label:"Nowshera"},{id:"city_selection",label:"Paharpur"},{id:"city_selection",label:"Pabbi"},{id:"city_selection",label:"Peshawar"},{id:"city_selection",label:"Saidu Sharif"},{id:"city_selection",label:"Shorkot"},{id:"city_selection",label:"Shewa Adda"},{id:"city_selection",label:"Swabi"},{id:"city_selection",label:"Swat"},{id:"city_selection",label:"Tangi"},{id:"city_selection",label:"Tank"},{id:"city_selection",label:"Thall"},{id:"city_selection",label:"Timergara"},{id:"city_selection",label:"Tordher"}]},{label:"balochistan",options:[{id:"city_selection",label:"Awaran"},{id:"city_selection",label:"Barkhan"},{id:"city_selection",label:"Chagai"},{id:"city_selection",label:"Dera Bugti"},{id:"city_selection",label:"Gwadar"},{id:"city_selection",label:"Harnai"},{id:"city_selection",label:"Jafarabad"},{id:"city_selection",label:"Jhal Magsi"},{id:"city_selection",label:"Kacchi"},{id:"city_selection",label:"Kalat"},{id:"city_selection",label:"Kech"},{id:"city_selection",label:"Kharan"},{id:"city_selection",label:"Khuzdar"},{id:"city_selection",label:"Killa Abdullah"},{id:"city_selection",label:"Killa Saifullah"},{id:"city_selection",label:"Kohlu"},{id:"city_selection",label:"Lasbela"},{id:"city_selection",label:"Lehri"},{id:"city_selection",label:"Loralai"},{id:"city_selection",label:"Mastung"},{id:"city_selection",label:"Musakhel"},{id:"city_selection",label:"Nasirabad"},{id:"city_selection",label:"Nushki"},{id:"city_selection",label:"Panjgur"},{id:"city_selection",label:"Pishin Valley"},{id:"city_selection",label:"Quetta"},{id:"city_selection",label:"Sherani"},{id:"city_selection",label:"Sibi"},{id:"city_selection",label:"Sohbatpur"},{id:"city_selection",label:"Washuk"},{id:"city_selection",label:"Zhob"},{id:"city_selection",label:"Ziarat"}]}],xt=[{id:"country_selection",label:"Afghanistan"},{id:"country_selection",label:"Albania"},{id:"country_selection",label:"Algeria"},{id:"country_selection",label:"Andorra"},{id:"country_selection",label:"Angola"},{id:"country_selection",label:"Antigua & Deps"},{id:"country_selection",label:"Argentina"},{id:"country_selection",label:"Armenia"},{id:"country_selection",label:"Australia"},{id:"country_selection",label:"Austria"},{id:"country_selection",label:"Azerbaijan"},{id:"country_selection",label:"Bahamas"},{id:"country_selection",label:"Bahrain"},{id:"country_selection",label:"Bangladesh"},{id:"country_selection",label:"Barbados"},{id:"country_selection",label:"Belarus"},{id:"country_selection",label:"Belgium"},{id:"country_selection",label:"Belize"},{id:"country_selection",label:"Benin"},{id:"country_selection",label:"Bhutan"},{id:"country_selection",label:"Bolivia"},{id:"country_selection",label:"Bosnia Herzegovina"},{id:"country_selection",label:"Botswana"},{id:"country_selection",label:"Brazil"},{id:"country_selection",label:"Brunei"},{id:"country_selection",label:"Bulgaria"},{id:"country_selection",label:"Burkina"},{id:"country_selection",label:"Burundi"},{id:"country_selection",label:"Cambodia"},{id:"country_selection",label:"Cameroon"},{id:"country_selection",label:"Canada"},{id:"country_selection",label:"Cape Verde"},{id:"country_selection",label:"Central African Rep"},{id:"country_selection",label:"Chad"},{id:"country_selection",label:"Chile"},{id:"country_selection",label:"China"},{id:"country_selection",label:"Colombia"},{id:"country_selection",label:"Comoros"},{id:"country_selection",label:"Congo"},{id:"country_selection",label:"Congo {Democratic Rep}"},{id:"country_selection",label:"Costa Rica"},{id:"country_selection",label:"Croatia"},{id:"country_selection",label:"Cuba"},{id:"country_selection",label:"Cyprus"},{id:"country_selection",label:"Czech Republic"},{id:"country_selection",label:"Denmark"},{id:"country_selection",label:"Djibouti"},{id:"country_selection",label:"Dominica"},{id:"country_selection",label:"Dominican Republic"},{id:"country_selection",label:"East Timor"},{id:"country_selection",label:"Ecuador"},{id:"country_selection",label:"Egypt"},{id:"country_selection",label:"El Salvador"},{id:"country_selection",label:"Equatorial Guinea"},{id:"country_selection",label:"Eritrea"},{id:"country_selection",label:"Estonia"},{id:"country_selection",label:"Ethiopia"},{id:"country_selection",label:"Fiji"},{id:"country_selection",label:"Finland"},{id:"country_selection",label:"France"},{id:"country_selection",label:"Gabon"},{id:"country_selection",label:"Gambia"},{id:"country_selection",label:"Georgia"},{id:"country_selection",label:"Germany"},{id:"country_selection",label:"Ghana"},{id:"country_selection",label:"Greece"},{id:"country_selection",label:"Grenada"},{id:"country_selection",label:"Guatemala"},{id:"country_selection",label:"Guinea"},{id:"country_selection",label:"Guinea-Bissau"},{id:"country_selection",label:"Guyana"},{id:"country_selection",label:"Haiti"},{id:"country_selection",label:"Honduras"},{id:"country_selection",label:"Hungary"},{id:"country_selection",label:"Iceland"},{id:"country_selection",label:"India"},{id:"country_selection",label:"Indonesia"},{id:"country_selection",label:"Iran"},{id:"country_selection",label:"Iraq"},{id:"country_selection",label:"Ireland {Republic}"},{id:"country_selection",label:"Israel"},{id:"country_selection",label:"Italy"},{id:"country_selection",label:"Ivory Coast"},{id:"country_selection",label:"Jamaica"},{id:"country_selection",label:"Japan"},{id:"country_selection",label:"Jordan"},{id:"country_selection",label:"Kazakhstan"},{id:"country_selection",label:"Kenya"},{id:"country_selection",label:"Kiribati"},{id:"country_selection",label:"Korea North"},{id:"country_selection",label:"Korea South"},{id:"country_selection",label:"Kosovo"},{id:"country_selection",label:"Kuwait"},{id:"country_selection",label:"Kyrgyzstan"},{id:"country_selection",label:"Laos"},{id:"country_selection",label:"Latvia"},{id:"country_selection",label:"Lebanon"},{id:"country_selection",label:"Lesotho"},{id:"country_selection",label:"Liberia"},{id:"country_selection",label:"Libya"},{id:"country_selection",label:"Liechtenstein"},{id:"country_selection",label:"Lithuania"},{id:"country_selection",label:"Luxembourg"},{id:"country_selection",label:"Macedonia"},{id:"country_selection",label:"Madagascar"},{id:"country_selection",label:"Malawi"},{id:"country_selection",label:"Malaysia"},{id:"country_selection",label:"Maldives"},{id:"country_selection",label:"Mali"},{id:"country_selection",label:"Malta"},{id:"country_selection",label:"Marshall Islands"},{id:"country_selection",label:"Mauritania"},{id:"country_selection",label:"Mauritius"},{id:"country_selection",label:"Mexico"},{id:"country_selection",label:"Micronesia"},{id:"country_selection",label:"Moldova"},{id:"country_selection",label:"Monaco"},{id:"country_selection",label:"Mongolia"},{id:"country_selection",label:"Montenegro"},{id:"country_selection",label:"Morocco"},{id:"country_selection",label:"Mozambique"},{id:"country_selection",label:"Myanmar, {Burma}"},{id:"country_selection",label:"Namibia"},{id:"country_selection",label:"Nauru"},{id:"country_selection",label:"Nepal"},{id:"country_selection",label:"Netherlands"},{id:"country_selection",label:"New Zealand"},{id:"country_selection",label:"Nicaragua"},{id:"country_selection",label:"Niger"},{id:"country_selection",label:"Nigeria"},{id:"country_selection",label:"Norway"},{id:"country_selection",label:"Oman"},{id:"country_selection",label:"Pakistan"},{id:"country_selection",label:"Palau"},{id:"country_selection",label:"Panama"},{id:"country_selection",label:"Papua New Guinea"},{id:"country_selection",label:"Paraguay"},{id:"country_selection",label:"Peru"},{id:"country_selection",label:"Philippines"},{id:"country_selection",label:"Poland"},{id:"country_selection",label:"Portugal"},{id:"country_selection",label:"Qatar"},{id:"country_selection",label:"Romania"},{id:"country_selection",label:"Russian Federation"},{id:"country_selection",label:"Rwanda"},{id:"country_selection",label:"St Kitts & Nevis"},{id:"country_selection",label:"St Lucia"},{id:"country_selection",label:"Saint Vincent & the Grenadines"},{id:"country_selection",label:"Samoa"},{id:"country_selection",label:"San Marino"},{id:"country_selection",label:"Sao Tome & Principe"},{id:"country_selection",label:"Saudi Arabia"},{id:"country_selection",label:"Senegal"},{id:"country_selection",label:"Serbia"},{id:"country_selection",label:"Seychelles"},{id:"country_selection",label:"Sierra Leone"},{id:"country_selection",label:"Singapore"},{id:"country_selection",label:"Slovakia"},{id:"country_selection",label:"Slovenia"},{id:"country_selection",label:"Solomon Islands"},{id:"country_selection",label:"Somalia"},{id:"country_selection",label:"South Africa"},{id:"country_selection",label:"South Sudan"},{id:"country_selection",label:"Spain"},{id:"country_selection",label:"Sri Lanka"},{id:"country_selection",label:"Sudan"},{id:"country_selection",label:"Suriname"},{id:"country_selection",label:"Swaziland"},{id:"country_selection",label:"Sweden"},{id:"country_selection",label:"Switzerland"},{id:"country_selection",label:"Syria"},{id:"country_selection",label:"Taiwan"},{id:"country_selection",label:"Tajikistan"},{id:"country_selection",label:"Tanzania"},{id:"country_selection",label:"Thailand"},{id:"country_selection",label:"Togo"},{id:"country_selection",label:"Tonga"},{id:"country_selection",label:"Trinidad & Tobago"},{id:"country_selection",label:"Tunisia"},{id:"country_selection",label:"Turkey"},{id:"country_selection",label:"Turkmenistan"},{id:"country_selection",label:"Tuvalu"},{id:"country_selection",label:"Uganda"},{id:"country_selection",label:"Ukraine"},{id:"country_selection",label:"United Arab Emirates"},{id:"country_selection",label:"United Kingdom"},{id:"country_selection",label:"United States"},{id:"country_selection",label:"Uruguay"},{id:"country_selection",label:"Uzbekistan"},{id:"country_selection",label:"Vanuatu"},{id:"country_selection",label:"Vatican City"},{id:"country_selection",label:"Venezuela"},{id:"country_selection",label:"Vietnam"},{id:"country_selection",label:"Yemen"},{id:"country_selection",label:"Zambia"},{id:"country_selection",label:"Zimbabwe"}],St=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).on_text_field_change=function(e){switch(e.target.id){case"first_name_text_input":n.setState({first_name:{value:e.target.value,error:!1}});break;case"last_name_text_input":n.setState({last_name:{value:e.target.value,error:!1}});break;case"cnic_text_input":e.target.value.length<=13&&n.setState({cnic:{value:e.target.value,error:!1}});break;case"phone_number_text_input":e.target.value.length<=11&&n.setState({phone_number:{value:e.target.value,error:!1}});break;case"email_text_input":n.setState({email:{value:e.target.value,error:!1}});break;case"password_text_input":n.setState({password:{value:e.target.value,error:!1}});break;case"verify_password_text_input":n.setState({verify_password:{value:e.target.value,error:!1}});break;case"address_text_input":n.setState({address:{value:e.target.value,error:!1}})}},n.on_date_of_birth_change=function(e){if(""===e)n.setState({dob:{value:"",error:!1}});else{var t=null;try{t=e.format("ll")}catch(a){t=""}finally{n.setState({dob:{value:t}})}}},n.on_selected_changed=function(e){switch(e.id){case"blood_group_selection":n.setState({blood_group:{value:e.label,error:!1}});break;case"gender_selection":n.setState({gender:{value:e.label,error:!1}});break;case"role_selection":n.setState({role:{value:e.label,error:!1}})}},n.check_input=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=/^[A-Za-z]+$/,r=/^[0-9]+$/;return!(!t||""!==e)||(!(!a||e.match(l))||!(!n||e.match(r)))},n.check_hard_constraints=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;if(!e.includes(t))return!0;switch(a){case"eq":if(e.length!==n)return!0;break;case"min":if(e.length<n)return!0;break;case"max":if(e.length>n)return!0}return!1},n.on_submit=function(){var e=Object(je.a)(Ce.a.mark((function e(t){var a,l,r;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({loading_status:!0}),a=!1,n.check_input(n.state.first_name.value,!0,!0,!1)&&(n.setState({current_page:0,first_name:{value:n.state.first_name.value,error:!0}}),a=!0),n.check_input(n.state.last_name.value,!0,!0,!1)&&(n.setState({current_page:0,last_name:{value:n.state.last_name.value,error:!0}}),a=!0),(n.check_input(n.state.email.value,!0,!1,!1)||n.check_hard_constraints(n.state.email.value,"@"))&&(n.setState({current_page:0,email:{value:n.state.email.value,error:!0}}),a=!0),(n.check_input(n.state.phone_number.value,!0,!1,!0)||n.check_hard_constraints(n.state.phone_number.value,"","eq",11))&&(n.setState({current_page:0,phone_number:{value:n.state.phone_number.value,error:!0}}),a=!0),(n.check_input(n.state.password.value,!0,!1,!1)||n.check_hard_constraints(n.state.password.value,"","min",8))&&(n.setState({current_page:1,password:{value:n.state.password.value,error:!0}}),a=!0),n.state.password.value!==n.state.verify_password.value&&(n.setState({password:{value:n.state.password.value,error:!0},verify_password:{value:n.state.verify_password.value,error:!0},current_page:1}),a=!0),(n.check_input(n.state.cnic.value,!0,!1,!0)||n.check_hard_constraints(n.state.cnic.value,"","eq",13))&&(n.setState({current_page:2,cnic:{value:n.state.cnic.value,error:!0}}),a=!0),n.check_input(n.state.dob.value,!0,!1,!1)&&(n.setState({current_page:2,dob:{value:n.state.dob.value,error:!0}}),a=!0),n.check_input(n.state.address.value,!0,!1,!1)&&(n.setState({current_page:2,address:{value:n.state.address.value,error:!0}}),a=!0),n.check_input(n.state.role.value,!0,!0,!1)&&(n.setState({current_page:3,role:{value:n.state.role.value,error:!0}}),a=!0),n.check_input(n.state.gender.value,!0,!0,!1)&&(n.setState({current_page:3,gender:{value:n.state.gender.value,error:!0}}),a=!0),n.check_input(n.state.blood_group.value,!0,!1,!1)&&(n.setState({current_page:3,blood_group:{value:n.state.blood_group.value,error:!0}}),a=!0),!0!==a){e.next=18;break}return bt("error",0,"Invalid info"),n.setState({loading_status:!1}),e.abrupt("return");case 18:return l={first_name:n.state.first_name.value.trim(),last_name:n.state.last_name.value.trim(),email:n.state.email.value.trim(),password:n.state.password.value.trim(),verify_password:n.state.verify_password.value.trim(),phone_number:n.state.phone_number.value.trim(),cnic:n.state.cnic.value.trim(),role:n.state.role.value.trim(),dob:n.state.dob.value,gender:n.state.gender.value.trim(),blood_group:n.state.blood_group.value.trim(),address:n.state.address.value.trim()},e.next=21,D.a.post(A,l);case 21:r=e.sent;try{r.data.status?(bt("success",0,r.data.message),n.props.history.push(h)):(bt("error",0,r.data.message),n.setState({loading_status:!1}))}catch(t){bt("error",0,"We are sorry for invonvenience. Server is not responding! please try again later"),n.setState({loading_status:!1})}case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.next_button_click=function(e){e.preventDefault(),n.state.current_page<3?n.setState({current_page:n.state.current_page+1}):3===n.state.current_page&&n.on_submit()},n.back_button_click=function(e){n.state.current_page>=0&&n.setState({current_page:n.state.current_page-1})},n.state={first_name:{value:"",error:!1},last_name:{value:"",error:!1},email:{value:"",error:!1},password:{value:"",error:!1},verify_password:{value:"",error:!1},gender:{value:"",error:!1},dob:{value:"",error:!1},blood_group:{value:"",error:!1},role:{value:"",error:!1},phone_number:{value:"",error:!1},cnic:{value:"",error:!1},address:{value:"",error:!1},loading_status:!1,role_select_modal_visibility:!1,current_page:0},n}return Object(S.a)(a,[{key:"render",value:function(){var e=this,t=l.a.createElement("div",{className:"mt-3"},l.a.createElement("div",{className:"d-flex justify-content-center "},l.a.createElement(dt.a,{type:"Rings",color:"#00BFFF",height:150,width:150,timeout:6e4})),l.a.createElement("div",{className:"d-flex justify-content-center"},l.a.createElement("p",null,"Loading..."))),a=t;if(this.state.loading_status)a=t;else{var n=l.a.createElement("div",{className:""},l.a.createElement(ht,{id:"email_text_input",label_tag:"Email",placeholder:"someone@hello.com",icon_class:"icon-envelop",input_type:"email",on_text_change_listener:this.on_text_field_change,default_value:this.state.email.value,error:this.state.email.error}),l.a.createElement(ht,{id:"first_name_text_input",label_tag:"First name",placeholder:"Enter your first name",icon_class:"icon-user-check",input_type:"text",on_text_change_listener:this.on_text_field_change,default_value:this.state.first_name.value,error:this.state.first_name.error}),l.a.createElement(ht,{id:"last_name_text_input",label_tag:"Last name",placeholder:"Enter your last name",icon_class:"icon-user-check",input_type:"text",on_text_change_listener:this.on_text_field_change,default_value:this.state.last_name.value,error:this.state.last_name.error}),l.a.createElement(ht,{id:"phone_number_text_input",label_tag:"Phone Number",placeholder:"Enter your phone number",icon_class:"icon-phone2",input_type:"number",on_text_change_listener:this.on_text_field_change,default_value:this.state.phone_number.value,error:this.state.phone_number.error})),r=l.a.createElement("div",{className:""},l.a.createElement(ht,{id:"password_text_input",label_tag:"Password",placeholder:"Enter password",icon_class:"icon-user-lock",input_type:"password",on_text_change_listener:this.on_text_field_change,default_value:this.state.password.value,error:this.state.password.error}),l.a.createElement(ht,{id:"verify_password_text_input",label_tag:"Verify Password",placeholder:"Re-enter password",icon_class:"icon-user-lock",input_type:"password",on_text_change_listener:this.on_text_field_change,default_value:this.state.verify_password.value,error:this.state.verify_password.error})),o=l.a.createElement("div",{className:""},l.a.createElement(ht,{id:"cnic_text_input",label_tag:"CNIC",placeholder:"Enter your cnic",icon_class:"icon-vcard",input_type:"text",on_text_change_listener:this.on_text_field_change,default_value:this.state.cnic.value,error:this.state.cnic.error}),l.a.createElement(ht,{id:"dob_text_input",label_tag:"Date of birth",icon_class:"icon-calendar3",placeholder:"Date of birth",input_type:"text",field_type:"date-time",date_format:"ll",time_format:!1,on_text_change_listener:this.on_date_of_birth_change,default_value:this.state.dob.value,error:this.state.dob.error}),l.a.createElement(ht,{id:"address_text_input",label_tag:"What is your current address",placeholder:"Enter your address",icon_class:"icon-home",input_type:"text",on_text_change_listener:this.on_text_field_change,default_value:this.state.address.value,error:this.state.address.error,field_type:"text-area"})),c=l.a.createElement("div",{className:""},l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{className:"col-form-label-lg"},"What is your blood group"),l.a.createElement("div",{className:"input-group"},l.a.createElement("span",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},l.a.createElement("i",{className:"icon-droplet"}))),l.a.createElement(mt.a,{className:"w-75",options:yt,classNamePrefix:"",components:Object(vt.a)(),placeholder:"Select blood group",id:"blood_group_selection",onChange:this.on_selected_changed}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{className:"col-form-label-lg"},"Specify your gender"),l.a.createElement("div",{className:"input-group"},l.a.createElement("span",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},l.a.createElement("i",{className:"icon-man-woman"}))),l.a.createElement(mt.a,{className:"w-75",options:Et,components:Object(vt.a)(),classNamePrefix:"",placeholder:"Select gender",id:"gender_selection",onChange:this.on_selected_changed}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{className:"col-form-label-lg"},"How you want to go into this"),l.a.createElement("div",{className:"input-group"},l.a.createElement("span",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},l.a.createElement("i",{className:"icon-user-tie"}))),l.a.createElement(mt.a,{className:"w-75",options:Nt,classNamePrefix:"",placeholder:"Select role",id:"role_selection",onChange:this.on_selected_changed}))));a=0===this.state.current_page?n:1===this.state.current_page?r:2===this.state.current_page?o:c}return l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-4 col-md-6 p-0"},l.a.createElement("form",{method:"post",action:this.next_button_click},l.a.createElement("div",{className:"card m-0 ",style:{height:"100vh"}},l.a.createElement("div",{className:"card-header text-center h4 font-weight-light"},l.a.createElement("span",null,"Sign up"),l.a.createElement("hr",null)),l.a.createElement("div",{className:"card-body px-5"},a),l.a.createElement("div",{className:"row card-footer"},l.a.createElement("div",{className:"col-4"},l.a.createElement("button",{id:"back_button",type:"button",className:"btn btn-block bg-teal-400 btn-labeled btn-labeled-left pl-5 mr-2",style:{textTransform:"inherit",display:0===this.state.current_page?"none":"inline"},onClick:this.back_button_click},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-arrow-left13"})),"Back")),l.a.createElement("div",{className:"col-4"},l.a.createElement("button",{type:"button",className:"btn btn-block bg-danger btn-labeled btn-labeled-right pr-5 mr-2",style:{textTransform:"inherit"},onClick:function(){return e.props.history.push(h)}},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-cross"})),"Cancel")),l.a.createElement("div",{className:"col-4"},l.a.createElement("button",{type:"submit",className:"btn btn-block bg-teal-400 btn-labeled btn-labeled-right pr-5",id:"next_button",onClick:this.next_button_click},3===this.state.current_page?l.a.createElement("b",null,l.a.createElement("i",{className:"icon-plus3"})):l.a.createElement("b",null,l.a.createElement("i",{className:"icon-arrow-right14"})),3===this.state.current_page?"Register":"Next")))))),l.a.createElement("div",{className:"col-lg-8 col-md-6 d-none d-lg-block d-xl-block d-md-block background_custom",style:{height:"100vh"}})))}}]),a}(n.Component),Ct=Object(p.h)(St);var jt=Object(p.h)((function(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),r=a[0],o=a[1],c=Object(n.useState)(!1),s=Object(u.a)(c,2),i=s[0],d=s[1];return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"card shadow w-lg-50 w-md-75 w-100"},l.a.createElement("div",{className:"card-header"},l.a.createElement("h4",null,"Reset your password")),l.a.createElement("div",{className:"card-body px-4"},l.a.createElement(ht,{id:"email_text_input",label_tag:"Email",placeholder:"Enter your email",icon_class:"icon-envelop",type:"email",onChange:function(e){return function(e){o(e.target.value),d(!1)}(e)},defaultValue:r,error:i})),l.a.createElement("div",{className:"card-footer"},l.a.createElement("button",{className:"btn bg-teal-400 btn-labeled btn-labeled-right pr-5 float-right",onClick:function(){""===r&&d(!0)}},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-user-check"})),"Submit Request"))))})),Ot=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).menu_style_change=function(e){console.log("settings menu styke change",e.target),n.props.toggle_sidebar_menu_collapse(),console.log("props settings",n.props.settings)},n.state={},n}return Object(S.a)(a,[{key:"render",value:function(){return console.log("props settings",this.props.settings),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-6"},l.a.createElement("div",{className:"d-flex"},l.a.createElement("span",{className:"font-weight-bold mr-3"},"Menu Style"),l.a.createElement("div",{className:"form-check mr-2"},l.a.createElement("label",{className:"form-check-label"},l.a.createElement("div",{className:"uniform-checker"},l.a.createElement("span",{className:this.props.settings.left_sidebar_collapsed?"checked":""},l.a.createElement("input",{type:"checkbox",name:"is_active",id:"user_is_active",onChange:this.menu_style_change,className:"form-input-styled"}))),"Collapsed")),l.a.createElement("div",{className:"form-check mb-0"},l.a.createElement("label",{className:"form-check-label"},l.a.createElement("div",{className:"uniform-checker"},l.a.createElement("span",{className:this.props.settings.left_sidebar_collapsed?"":"checked"},l.a.createElement("input",{type:"checkbox",name:"is_active",id:"user_is_active",onChange:this.menu_style_change,className:"form-input-styled"}))),"UnCollapsed (Experimental)")))))}}]),a}(n.Component);var Dt=Object(i.b)((function(e){return{settings:e.settings}}),{toggle_sidebar_menu_collapse:Je})(Ot),Pt=a(20),Mt=a(1160),It=a(6),Tt=a.n(It);function Lt(e,t){switch(t.type){case"CHANGE_SORT":return e.column===t.column?Object(ut.a)(Object(ut.a)({},e),{},{data:e.data.reverse(),direction:"ascending"===e.direction?"descending":"ascending"}):{column:t.column,data:at.a.sortBy(e.data,[t.column]),direction:"ascending"};case"UPDATE_DATA":return Object(ut.a)(Object(ut.a)({},e),{},{data:at.a.sortBy(t.data,[t.column])});default:throw new Error}}var At=function(e){var t=Object(n.useRef)(!0),a=l.a.useReducer(Lt,{column:null,data:e.rows,direction:null}),r=Object(u.a)(a,2),o=r[0],c=r[1],s=o.column,i=o.data,d=o.direction;Object(n.useEffect)((function(){t.current?t.current=!1:c({type:"UPDATE_DATA",data:e.rows})}),[e.rows]);var m=function(e){return"boolean"===typeof e?e?l.a.createElement("i",{className:"icon-check2 bg-success"}):l.a.createElement("i",{className:"icon-cross2 bg-danger"}):"string"===typeof e?isNaN(new Date(e).getDate())?""===e?l.a.createElement("i",{className:"icon-dash"}):e:Tt()(e).format("ll"):null===e?l.a.createElement("i",{className:"icon-dash"}):e};return l.a.createElement(Mt.a,{sortable:!0,stackable:!0,celled:!0,textAlign:"center",size:"large",collapsing:!0},l.a.createElement(Mt.a.Header,{className:"bg-dark"},l.a.createElement(Mt.a.Row,null,Object.keys(e.headCells).map((function(t,a){return l.a.createElement(Mt.a.HeaderCell,{key:a,sorted:s===e.headCells[t].id?d:null,onClick:function(){return c({type:"CHANGE_SORT",column:e.headCells[t].id})}},e.headCells[t].label)})))),l.a.createElement(Mt.a.Body,null,e.loading?l.a.createElement(Mt.a.Row,null,l.a.createElement(Mt.a.Cell,{colSpan:e.headCells.length,className:"px-0"},l.a.createElement(nt.SkeletonTheme,{color:"#ffffff",highlightColor:"#f2f2f2"},l.a.createElement(lt.a,{className:"mb-1",count:7,height:40})))):0===i.length?l.a.createElement(Mt.a.Row,null,l.a.createElement(Mt.a.Cell,{className:"px-0",colSpan:e.headCells.length},l.a.createElement("div",{className:"alert alert-info mt-2 w-100"},l.a.createElement("strong",null,"Info!")," No data found."))):i.map((function(e,t){return l.a.createElement(Mt.a.Row,{key:t},Object.keys(e).map((function(t,a){return l.a.createElement(Mt.a.Cell,{key:a},m(e[t]))})))}))))},Ft=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Rt=function(e){var t=new Date(e),a=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds());return new Date(a)},Bt=function(e,t){return e.map((function(e){return e[t]})).toString()};var zt=function(e){var t="bg-teal-400";switch(e.color){case"default":t="bg-teal-400";break;case"red":t="bg-danger";break;case"black":t="bg-dark";break;case"gray":t="bg-secondary"}return l.a.createElement("button",Object.assign({},e,{className:"btn ".concat(t," btn-labeled btn-labeled-right pr-5 ").concat(e.fuklWidth?"btn-block":""," ").concat(e.className),style:{textTransform:"inherit"}}),l.a.createElement("b",null,l.a.createElement("i",{className:e.icon})),e.children)},qt=a(40),Yt=a.n(qt);var Vt=function(e){var t=e.custom;return e.custom?l.a.createElement(dt.a,{type:"Rings",color:t.color,height:e.size,width:e.size,timeout:t.timeout}):l.a.createElement("div",{className:"d-flex justify-content-center"},l.a.createElement(dt.a,{type:"Rings",color:"#00BFFF",height:e.size,width:e.size,timeout:12e4}))};var Ht=function(e){var t="bg-teal-400 border-teal-400 text-teal-400",a="btn-outline",n="btn-lg";switch(e.variant){case"outlined":a="btn-outline";break;case"filled":a="";break;default:a="btn-outline"}switch(e.color){case"red":t="btn-outline"===a?"bg-danger border-danger text-danger":"btn-danger";break;case"black":t="btn-outline"===a?"bg-dark border-dark text-dark":"btn-dark";break;case"gray":t="btn-outline"===a?"bg-secondary border-secondary text-secondary":"btn-secondary";break;default:t="btn-outline"===a?"bg-teal-400 border-teal-400 text-teal-400":"bg-teal-400 text-white"}switch(e.size){case"md":n="btn-md";break;case"sm":n="btn-sm";break;case"lg":n="btn-lg";break;default:n="btn-sm"}var r="btn ".concat(a," ").concat(n," ").concat(t," btn-icon ").concat(e.className);return l.a.createElement("button",Object.assign({},e,{className:r}),l.a.createElement("i",{className:e.icon}))},Gt=a(230),Ut=(a(660),[{id:"name",numeric:!1,disablePadding:!1,label:"Name"},{id:"phone_number",numeric:!1,disablePadding:!1,label:"Phone#"},{id:"email",numeric:!1,disablePadding:!1,label:"Email"},{id:"consultancy_fee",numeric:!0,disablePadding:!1,label:"Consultancy"},{id:"consultancy_percentage",numeric:!1,disablePadding:!1,label:"Percentage"},{id:"gender",numeric:!1,disablePadding:!1,label:"Gender"},{id:"active",numeric:!1,disablePadding:!1,label:"Active"},{id:"actions",numeric:!1,disablePadding:!1,label:"Actions"}]),Kt=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).on_edit_doctor=function(e){n.setState({mode:"update",toUpdateDoctorId:e.doctor._id,addNewModalVisibility:!0,user_first_name:{value:e.doctor.first_name,error:!1},user_last_name:{value:e.doctor.last_name,error:!1},user_phone_number:{value:e.doctor.phone_number,error:!1},user_dob:{value:e.doctor.date_of_birth,error:!1},user_cnic:{value:e.doctor.cnic,error:!1},user_email:{value:e.doctor.email,error:!1},user_country:{value:e.doctor.country,error:!1},user_city:{value:e.doctor.city,error:!1},user_address:{value:e.doctor.address,error:!1},user_gender:{value:e.doctor.gender,error:!1},user_blood_group:{value:e.doctor.blood_group,error:!1},user_role:{value:"Doctor",error:!1},user_consultancy_fee:{value:e.details.consultancy_fee,error:!1},user_consultancy_percentage:{value:e.details.consultancy_percentage,error:!1},user_is_active:{value:e.doctor.is_active,error:!1},user_specialities:e.details.specialities,user_degrees:e.details.degrees,user_schedule:e.details.schedule},(function(){return console.log("state",n.state)}))},n.on_delete_doctor=function(e){Object(Gt.confirmAlert)({title:"Deactivate doctor",message:"Are you sure you want to deactivate this doctor?",buttons:[{label:"Yes",onClick:function(){D.a.delete("".concat(U,"?tag=").concat(e)).then((function(){n.reset_state(),n.load_doctors(),bt("success",0,"Successfully deleted doctor")})).catch((function(e){console.log("error",e),bt("error",0,e.toString())}))}},{label:"No",onClick:function(){return console.log("no selected")}}]})},n.load_doctors=function(){var e="".concat(T,"?role=Doctor&active=all");D.a.get(e).then((function(e){if(e.data){e=e.data.payload,console.log("doctors",e);for(var t={total:0,active:0,deactive:0},a=[],r=function(r){a.push({name:"Dr. ".concat(Ft(e[r].doctor.first_name)," ").concat(Ft(e[r].doctor.last_name)),phone_number:e[r].doctor.phone_number,email:e[r].doctor.email,consultancy_fee:e[r].details.consultancy_fee,consultancy_percentage:"".concat(e[r].details.consultancy_percentage,"% cut"),gender:"Male"===e[r].doctor.gender?l.a.createElement("span",{className:"badge badge-primary"},"Male"):l.a.createElement("span",{className:"badge bg-pink-400"},"Female"),active:e[r].doctor.is_active,actions:l.a.createElement("div",{className:"d-flex"},l.a.createElement(Ht,{icon:"icon-pencil",className:"mx-1",onClick:function(){return n.on_edit_doctor(e[r])}}),e[r].doctor.is_active?l.a.createElement(Ht,{color:"red",icon:"icon-cross",onClick:function(){return n.on_delete_doctor(e[r].doctor._id)}}):"")}),t.total+=1,e[r].doctor.is_active?t.active+=1:t.deactive+=1,r===e.length-1&&n.setState({rows:a,loading:!1,counts:t})},o=0;o<e.length;++o)r(o);0===e.length&&n.setState({rows:a,loading:!1})}n.setState({loading:!1})})).catch((function(e){bt("error",0,e.toString()),n.setState({loading:!1})}))},n.on_text_field_change=function(e){n.setState(Object(Pt.a)({},e.target.id,{value:e.target.value,error:!1}))},n.on_selected_changed=function(e,t){n.setState(Object(Pt.a)({},t,{value:null!==e?e.label:"",error:!1}))},n.on_user_date_of_birth_change=function(e){if(""===e)n.setState({user_dob:{value:"",error:!1}});else{var t=null;try{t=e.format("ll")}catch(a){t=""}finally{n.setState({user_dob:{value:t,error:!1}})}}},n.on_checkbox_change=function(e){n.setState(Object(Pt.a)({},e.target.id,{value:!e.target.checked,error:!1}))},n.delete_item=function(e,t){var a=n.state[t];a.splice(e,1),n.setState(Object(Pt.a)({},t,a))},n.toggle_modal=function(e){n.setState(Object(Pt.a)({},e,!n.state[e]))},n.add_item=function(e,t){var a,l=n.state[t];l.push({description:e}),n.setState((a={},Object(Pt.a)(a,t,l),Object(Pt.a)(a,"speciality_description",{value:"",error:!1}),Object(Pt.a)(a,"degree_description",{value:"",error:!1}),Object(Pt.a)(a,"addNewDegreeModalVisibility",!1),Object(Pt.a)(a,"addNewSpecialityModalVisibility",!1),a))},n.reset_state=function(){n.setState({addNewModalVisibility:!1,addNewSpecialityModalVisibility:!1,addNewDegreeModalVisibility:!1,addNewScheduleModalVisibility:!1,user_first_name:{value:"",error:!1},user_last_name:{value:"",error:!1},user_phone_number:{value:"",error:!1},user_dob:{value:"",error:!1},user_cnic:{value:"",error:!1},user_email:{value:"",error:!1},user_country:{value:"Pakistan",error:!1},user_city:{value:"Lahore",error:!1},user_address:{value:"",error:!1},user_gender:{value:"Male",error:!1},user_blood_group:{value:"Unknown",error:!1},user_role:{value:"Doctor",error:!1},user_consultancy_fee:{value:"1500",error:!1},user_consultancy_percentage:{value:"70",error:!1},speciality_description:{value:"",error:!1},degree_description:{value:"",error:!1},user_specialities:[],user_degrees:[],user_schedule:[],mode:"create",toUpdateDoctorId:""})},n.on_submit=function(e){e.preventDefault(),console.log("this.state",n.state);var t={admin_id:n.props.active_user._id,doctor:{first_name:n.state.user_first_name.value.trim(),last_name:n.state.user_last_name.value.trim(),phone_number:n.state.user_phone_number.value.trim(),date_of_birth:n.state.user_dob.value,cnic:n.state.user_cnic.value.trim(),email:n.state.user_email.value.trim(),country:n.state.user_country.value,city:n.state.user_city.value,address:n.state.user_address.value.trim(),gender:n.state.user_gender.value.trim(),blood_group:n.state.user_blood_group.value.trim(),role:n.state.user_role.value.trim()},doctor_details:{consultancy_fee:n.state.user_consultancy_fee.value,consultancy_percentage:n.state.user_consultancy_percentage.value,specialities:n.state.user_specialities,degrees:n.state.user_degrees,schedule:n.state.user_schedule}};"create"===n.state.mode?(n.setState({addNewDoctorModalLoading:!0}),D.a.post(H,t).then((function(e){console.log("res",e),n.setState({loading:!0,addNewModalVisibility:!1,addNewDoctorModalLoading:!1},(function(){return n.load_doctors()}))})).catch((function(e){console.log("res",e),e.response?bt("error",0,e.response.data.message):bt("error",0,e.toString()),n.setState({addNewDoctorModalLoading:!1})}))):(t.doctor_id=n.state.toUpdateDoctorId,t.doctor.is_active=n.state.user_is_active.value,D.a.put(G,t).then((function(e){console.log("response",e),bt("success",0,"Doctor successfully updated"),n.setState({addNewModalVisibility:!1,addNewDoctorModalLoading:!1},(function(){n.reset_state(),n.load_doctors()}))})).catch((function(e){console.log("err",e),bt("error",0,"There was an error updating doctor"),n.setState({addNewModalVisibility:!1,addNewDoctorModalLoading:!1})})))},n.delete_doctor=function(e){console.log("delete doctor id",e)},n.state={loading:!0,addNewDoctorModalLoading:!1,rows:[],addNewModalVisibility:!1,addNewSpecialityModalVisibility:!1,addNewDegreeModalVisibility:!1,addNewScheduleModalVisibility:!1,user_first_name:{value:"",error:!1},user_last_name:{value:"",error:!1},user_phone_number:{value:"",error:!1},user_dob:{value:"",error:!1},user_cnic:{value:"",error:!1},user_email:{value:"",error:!1},user_country:{value:"Pakistan",error:!1},user_city:{value:"Lahore",error:!1},user_address:{value:"",error:!1},user_gender:{value:"Male",error:!1},user_blood_group:{value:"Unknown",error:!1},user_role:{value:"Doctor",error:!1},user_consultancy_fee:{value:"1500",error:!1},user_consultancy_percentage:{value:"70",error:!1},user_is_active:{value:!0,error:!1},speciality_description:{value:"",error:!1},degree_description:{value:"",error:!1},user_specialities:[],user_degrees:[],user_schedule:[],mode:"create",toUpdateDoctorId:"",counts:{total:0,active:0,deactive:0}},n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){var e=[l.a.createElement(d.b,{to:_,className:"breadcrumb-item"},l.a.createElement("i",{className:"icon-home2 mr-2"}),"Search"),l.a.createElement("span",{className:"breadcrumb-item active"},"Doctors")];this.props.set_active_page(e),this.load_doctors()}},{key:"render",value:function(){var e=this;return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"mb-2 d-flex justify-content-between"},l.a.createElement("div",{className:"d-flex justify-content-between w-100"},l.a.createElement("div",{className:"card w-100 border-left-3 border-top-0 border-bottom-0 border-right-0 border-info mr-2 px-3"},l.a.createElement("div",{className:"card-body d-flex justify-content-around align-items-center py-1"},l.a.createElement("div",{className:""},this.state.loading?l.a.createElement(Vt,{size:55,custom:{color:"#5bc0de"}}):l.a.createElement("h1",{className:"font-weight-bold text-center values-text mb-0 text-info"},this.state.counts.total),l.a.createElement("h5",{className:"text-dark"},"Total")),l.a.createElement("i",{className:"fa fa-stethoscope fa-5x text-info"}))),l.a.createElement("div",{className:"card w-100 border-left-3 border-top-0 border-bottom-0 border-right-0 border-success mr-2 px-3"},l.a.createElement("div",{className:"card-body d-flex justify-content-around align-items-center py-1"},l.a.createElement("div",{className:""},this.state.loading?l.a.createElement(Vt,{size:55,custom:{color:"#5bc0de"}}):l.a.createElement("h1",{className:"font-weight-bold text-center values-text mb-0 text-success"},this.state.counts.active),l.a.createElement("h5",{className:"text-dark"},"Active")),l.a.createElement("i",{className:"fa fa-check fa-5x text-success"}))),l.a.createElement("div",{className:"card w-100 border-left-3 border-top-0 border-bottom-0 border-right-0 border-danger mr-2 px-3"},l.a.createElement("div",{className:"card-body d-flex justify-content-around align-items-center py-1"},l.a.createElement("div",{className:""},this.state.loading?l.a.createElement(Vt,{size:55,custom:{color:"#5bc0de"}}):l.a.createElement("h1",{className:"font-weight-bold text-center values-text mb-0 text-danger"},this.state.counts.deactive),l.a.createElement("h5",{className:"text-dark"},"Deactive")),l.a.createElement("i",{className:"fa fa-times fa-5x text-danger"})))),l.a.createElement("div",{className:"d-flex align-items-end mb-3"},l.a.createElement(zt,{icon:"icon-plus3",onClick:function(){return e.setState({addNewModalVisibility:!0})}},"Add a new doctor"))),this.state.loading?l.a.createElement(l.a.Fragment,null,l.a.createElement(nt.SkeletonTheme,{color:"#ffffff",highlightColor:"#f2f2f2"},l.a.createElement(lt.a,{className:"my-1",count:8,height:45}))):0===this.state.rows.length?l.a.createElement("div",{className:"alert alert-info mt-2 w-100"},l.a.createElement("strong",null,"Info!")," Not found."):l.a.createElement(At,{rows:this.state.rows,headCells:Ut,heading:"Doctors"}),l.a.createElement(Yt.a,{visible:this.state.addNewModalVisibility,dialogClassName:"modal-lg",onClickBackdrop:function(){return e.setState({addNewModalVisibility:!1})}},l.a.createElement("div",{className:"modal-header bg-teal-400"},l.a.createElement("h5",{className:"mb-0"},"create"===this.state.mode?"Add a new doctor":"Update doctor")),l.a.createElement("div",{className:"modal-body"},l.a.createElement("h5",{className:"font-weight-bold"},"Basic Information"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4 px-3"},l.a.createElement("div",{className:"form-group"},l.a.createElement(ht,{id:"user_first_name",heading:"First name",placeholder:"Enter first name",required:!0,onChange:this.on_text_field_change,value:this.state.user_first_name.value,error:this.state.user_first_name.error,disabled:this.state.addNewDoctorModalLoading}))),l.a.createElement("div",{className:"col-md-4 px-3"},l.a.createElement("div",{className:"form-group"},l.a.createElement(ht,{id:"user_last_name",heading:"Last name",placeholder:"Enter last name",required:!0,onChange:this.on_text_field_change,value:this.state.user_last_name.value,error:this.state.user_last_name.error,disabled:this.state.addNewDoctorModalLoading}))),l.a.createElement("div",{className:"col-md-4 px-3"},l.a.createElement("div",{className:"form-group"},l.a.createElement(ht,{id:"user_phone_number",heading:"Phone number",placeholder:"Enter phone number",required:!0,type:"text",pattern:"\\d*",maxlength:"11",onChange:this.on_text_field_change,value:this.state.user_phone_number.value,error:this.state.user_phone_number.error,disabled:this.state.addNewDoctorModalLoading})))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4 px-3"},l.a.createElement("div",{className:"form-group"},l.a.createElement(ht,{id:"user_dob",heading:"Date of birth",icon_class:"icon-calendar3",placeholder:"Date of birth",input_type:"text",field_type:"date-time",date_format:"ll",time_format:!1,onChange:this.on_user_date_of_birth_change,value:this.state.user_dob.value,error:this.state.user_dob.error}))),l.a.createElement("div",{className:"col-md-4 px-3"},l.a.createElement("div",{className:"form-group"},l.a.createElement(ht,{id:"user_cnic",heading:"CNIC",icon_class:"icon-vcard",input_type:"number",placeholder:"Enter CNIC",type:"text",pattern:"\\d*",maxlength:"13",onChange:this.on_text_field_change,value:this.state.user_cnic.value,error:this.state.user_cnic.error}))),l.a.createElement("div",{className:"col-md-4 px-3"},l.a.createElement("div",{className:"form-group"},l.a.createElement(ht,{id:"user_email",heading:"Email",icon_class:"icon-envelop",input_type:"email",required:!0,placeholder:"Enter email",onChange:this.on_text_field_change,value:this.state.user_email.value,error:this.state.user_email.error,disabled:this.state.addNewDoctorModalLoading})))),l.a.createElement("hr",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8"},l.a.createElement("h5",{className:"font-weight-bold"},"Location"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement(ht,{heading:"Country",field_type:"select",required:!0,isClearable:!0,menuPlacement:"auto",options:xt,classNamePrefix:"form-control",placeholder:"Select Country",id:"user_country",isDisabled:!0,onChange:function(t){return e.on_selected_changed(t,"user_country")},defaultValue:{id:"country_selection",label:"Pakistan"},styles:{container:function(t){return Object(ut.a)(Object(ut.a)({},t),{},{backgroundColor:e.state.user_country.error?"#FF0000":"",padding:1,borderRadius:5})}}})),l.a.createElement("div",{className:"col-md-6"},l.a.createElement(ht,{heading:"City",field_type:"select",required:!0,isClearable:!0,menuPlacement:"auto",options:kt,classNamePrefix:"form-control",placeholder:"Select City",id:"user_city",isDisabled:this.state.addNewDoctorModalLoading,onChange:function(t){return e.on_selected_changed(t,"user_city")},defaultValue:{id:"city_selection",label:"Lahore"},styles:{container:function(t){return Object(ut.a)(Object(ut.a)({},t),{},{backgroundColor:e.state.user_city.error?"#FF0000":"",padding:1,borderRadius:5})}}}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement(ht,{heading:"Address/Area",className:"form-control form-control-lg",id:"user_address",value:this.state.user_address.value,onChange:function(t){return e.on_text_field_change(t)},placeholder:"Enter address / area you live in the city",disabled:this.state.addNewDoctorModalLoading})))),l.a.createElement("div",{className:"col-md-4 border-left"},l.a.createElement("h5",{className:"font-weight-bold"},"Specifications"),l.a.createElement(ht,{heading:"Gender",field_type:"select",required:!0,isClearable:!0,menuPlacement:"auto",options:Et,classNamePrefix:"form-control",placeholder:"Select Gender",id:"user_gender",isDisabled:this.state.addNewDoctorModalLoading,onChange:function(t){return e.on_selected_changed(t,"user_gender")},defaultValue:{id:"gender_selection",label:"Male"},styles:{container:function(t){return Object(ut.a)(Object(ut.a)({},t),{},{backgroundColor:e.state.user_gender.error?"#FF0000":"",padding:1,borderRadius:5})}}}),l.a.createElement(ht,{heading:"Blood group",field_type:"select",required:!0,isClearable:!0,menuPlacement:"auto",options:yt,className:"Select-option",classNamePrefix:"form-control",placeholder:"Select blood group",id:"user_gender",isDisabled:this.state.addNewDoctorModalLoading,onChange:function(t){return e.on_selected_changed(t,"user_gender")},defaultValue:{id:"blood_group_selection",label:"Unknown"},styles:{container:function(t){return Object(ut.a)(Object(ut.a)({},t),{},{backgroundColor:e.state.user_gender.error?"#FF0000":"",padding:1,borderRadius:5})}}}))),l.a.createElement("hr",null),l.a.createElement("h5",{className:"font-weight-bold"},"Pricing"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement(ht,{id:"user_consultancy_fee",heading:"Consultancy fee",placeholder:"Enter consultancy fee",required:!0,value:this.state.user_consultancy_fee.value,error:this.state.user_consultancy_fee.error,onChange:this.on_text_field_change,disabled:this.state.addNewDoctorModalLoading})),l.a.createElement("div",{className:"col-md-6"},l.a.createElement(ht,{id:"user_consultancy_percentage",heading:"Consultancy percentage",placeholder:"Enter consultancy % shared with this doctor",required:!0,value:this.state.user_consultancy_percentage.value,error:this.state.user_consultancy_percentage.error,onChange:this.on_text_field_change,disabled:this.state.addNewDoctorModalLoading}))),l.a.createElement("hr",null),l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("h5",{className:"font-weight-bold"},"Specialities's"),l.a.createElement(zt,{icon:"icon-plus3",color:"black",disabled:this.state.addNewDoctorModalLoading,onClick:function(){return e.toggle_modal("addNewSpecialityModalVisibility")}},"Speciality")),l.a.createElement("div",{className:"row mt-2"},0===this.state.user_specialities.length?l.a.createElement("div",{className:"alert alert-info mt-2 mb-0 w-100"},l.a.createElement("strong",null,"Info!")," Not found."):l.a.createElement("div",{className:"table-responsive table-hover table-bordered"},l.a.createElement("table",{className:"table mb-0"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Id"),l.a.createElement("th",null,"Description"),l.a.createElement("th",{className:"text-center"},"Actions"))),l.a.createElement("tbody",null,this.state.user_specialities.map((function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",null,a+1),l.a.createElement("td",null,t.description),l.a.createElement("td",{className:"text-center"},l.a.createElement(Ht,{color:"red",icon:"icon-cross",onClick:function(){return e.delete_item(a,"user_specialities")}})))})))))),l.a.createElement("hr",null),l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("h5",{className:"font-weight-bold"},"Degree's"),l.a.createElement(zt,{icon:"icon-plus3",color:"black",disabled:this.state.addNewDoctorModalLoading,onClick:function(){return e.toggle_modal("addNewDegreeModalVisibility")}},"Degree")),l.a.createElement("div",{className:"row mt-2"},0===this.state.user_degrees.length?l.a.createElement("div",{className:"alert alert-info mt-2 w-100"},l.a.createElement("strong",null,"Info!")," Not found."):l.a.createElement("div",{className:"table-responsive table-hover table-bordered"},l.a.createElement("table",{className:"table mb-0"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Id"),l.a.createElement("th",null,"Description"),l.a.createElement("th",{className:"text-center"},"Actions"))),l.a.createElement("tbody",null,this.state.user_degrees.map((function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",null,a+1),l.a.createElement("td",null,t.description),l.a.createElement("td",{className:"text-center"},l.a.createElement(Ht,{color:"red",icon:"icon-cross",onClick:function(){return e.delete_item(a,"user_degrees")}})))})))))),l.a.createElement("hr",null),l.a.createElement("div",{className:"d-flex justify-content-between text-muted"},l.a.createElement("h5",{className:"font-weight-bold"},"Schedule"),l.a.createElement("span",null,"Coming soon"),l.a.createElement(zt,{icon:"icon-plus3",color:"black",disabled:!0},"Add schedule")),l.a.createElement("hr",null),l.a.createElement("div",{className:""},l.a.createElement("h5",{className:"font-weight-bold"},"Status"),l.a.createElement("div",{className:"d-flex"},l.a.createElement("div",{className:"form-check mr-2"},l.a.createElement("label",{className:"form-check-label"},l.a.createElement("div",{className:"uniform-checker"},l.a.createElement("span",{className:this.state.user_is_active.value?"checked":""},l.a.createElement("input",{type:"checkbox",name:"is_active",id:"user_is_active",onChange:function(){return e.setState({user_is_active:{value:!0,error:!1}})},className:"form-input-styled"}))),"Is Active")),l.a.createElement("div",{className:"form-check mb-0"},l.a.createElement("label",{className:"form-check-label"},l.a.createElement("div",{className:"uniform-checker"},l.a.createElement("span",{className:this.state.user_is_active.value?"":"checked"},l.a.createElement("input",{type:"checkbox",name:"is_active",id:"user_is_active",onChange:function(){return e.setState({user_is_active:{value:!1,error:!1}})},className:"form-input-styled"}))),"Is Deactivated"))))),l.a.createElement("div",{className:"modal-footer"},l.a.createElement(zt,{icon:"icon-plus3",disabled:this.state.addNewDoctorModalLoading,onClick:function(t){return e.on_submit(t)}},"create"===this.state.mode?"Create Doctor":"Update doctor"),l.a.createElement(zt,{icon:"icon-cross",color:"red",onClick:function(t){return e.reset_state()}},"Cancel"))),l.a.createElement(Yt.a,{visible:this.state.addNewSpecialityModalVisibility,onClickBackdrop:function(){return e.toggle_modal("addNewSpecialityModalVisibility")}},l.a.createElement("div",{className:"modal-header bg-teal-400"},l.a.createElement("h5",{className:"mb-0"},"Add Speciality")),l.a.createElement("div",{className:"modal-body"},l.a.createElement(ht,{id:"speciality_description",heading:"Description",placeholder:"Enter description",value:this.state.speciality_description.value,error:this.state.speciality_description.error,onChange:this.on_text_field_change})),l.a.createElement("div",{className:"modal-footer"},l.a.createElement(zt,{icon:"icon-plus3",onClick:function(){return e.add_item(e.state.speciality_description.value,"user_specialities")}},"Add"))),l.a.createElement(Yt.a,{visible:this.state.addNewDegreeModalVisibility,onClickBackdrop:function(){return e.toggle_modal("addNewDegreeModalVisibility")}},l.a.createElement("div",{className:"modal-header bg-teal-400"},l.a.createElement("h5",{className:"mb-0"},"Add Degree")),l.a.createElement("div",{className:"modal-body"},l.a.createElement(ht,{id:"degree_description",heading:"Description",placeholder:"Enter description",value:this.state.degree_description.value,error:this.state.degree_description.error,onChange:this.on_text_field_change})),l.a.createElement("div",{className:"modal-footer"},l.a.createElement(zt,{icon:"icon-plus3",onClick:function(){return e.add_item(e.state.degree_description.value,"user_degrees")}},"Add"))))}}]),a}(n.Component);var Wt=Object(i.b)((function(e){return{active_page:e.active_page,active_user:e.active_user}}),{set_active_page:Ue})(Kt),$t=(a(363),a(231)),Jt=a.n($t),Zt=(a(174),function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).request_update=function(e){n.setState({loading_status:!0},(function(){(function(e){return D.a.put(F,e)})(e).then((function(e){n.setState({loading_status:!1}),bt("success",0,e.data.message)})).catch((function(e){console.log("request error",e),n.setState({loading_status:!1}),e.response&&bt("error",0,e.response.message)}))}))},n.check_input=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=/^[A-Za-z]+$/,r=/^[0-9]+$/;return!(!t||""!==e)||(!(!a||e.match(l))||(!(!n||e.match(r))||void 0))},n.on_click_update=function(){var e=!1;if(n.check_input(n.state.first_name.value,!0,!0,!1)&&(n.setState({first_name:{value:n.state.first_name.value,error:!0}}),e=!0),n.check_input(n.state.last_name.value,!0,!0,!1)&&(n.setState({last_name:{value:n.state.last_name.value,error:!0}}),e=!0),n.check_input(n.state.email.value,!0,!1,!1)&&(n.setState({email:{value:n.state.email.value,error:!0}}),e=!0),n.check_input(n.state.phone_number.value,!0,!1,!0)&&(n.setState({phone_number:{value:n.state.phone_number.value,error:!0}}),e=!0),n.check_input(n.state.cnic.value,!0,!1,!0)&&(n.setState({cnic:{value:n.state.cnic.value,error:!0}}),e=!0),!0!==e){var t={first_name:n.state.first_name.value,last_name:n.state.last_name.value,email:n.state.email.value,gender:n.state.gender.value,date_of_birth:n.state.date_of_birth.value,register_date:n.state.register_date.value,blood_group:n.state.blood_group.value,phone_number:n.state.phone_number.value,cnic:n.state.cnic.value,address:n.state.address.value,city:n.state.city.value};n.request_update(t)}else bt("error",0,"Invalid input")},n.on_text_changed=function(e){n.setState(Object(Pt.a)({},e.target.id,{value:e.target.value,error:!1}))},n.on_selected_changed=function(e,t){n.setState(Object(Pt.a)({},null===e?t:e.id,{value:null===e?"":e.label}))},n.on_user_date_of_birth_change=function(e){if(console.log(e),""===e)n.setState({date_of_birth:{value:"",error:!1}});else{var t=null;try{t=e.format("ll")}catch(a){t=""}finally{n.setState({date_of_birth:{value:t,error:!1}})}}},n.state={first_name:{value:"",error:!1},last_name:{value:"",error:!1},email:{value:"",error:!1},gender:{value:"",error:!1},date_of_birth:{value:"",error:!1},register_date:{value:"",error:!1},blood_group:{value:"",error:!1},role:{value:"",error:!1},phone_number:{value:"",error:!1},cnic:{value:"",error:!1},city:{value:"",error:!1},country:{value:"Pakistan",error:!1},address:{value:"",error:!1},loading_status:!1,previous_payload:null},n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=[l.a.createElement(d.b,{to:_,className:"breadcrumb-item"},l.a.createElement("i",{className:"icon-home2 mr-2"}),"Home"),l.a.createElement("span",{className:"breadcrumb-item active"},"Profile")];this.props.set_active_page(t),localStorage.user?this.setState({loading_status:!0},(function(){var t;(t=localStorage.getItem("user"),D.a.get("".concat(z,"?tag=").concat(t))).then((function(t){e.props.set_active_user(t.data.payload),e.setState({first_name:{value:Ft(t.data.payload.first_name),error:!1},last_name:{value:Ft(t.data.payload.last_name),error:!1},email:{value:t.data.payload.email,error:!1},cnic:{value:t.data.payload.cnic,error:!1},phone_number:{value:t.data.payload.phone_number,error:!1},city:{value:t.data.payload.city,error:!1},address:{value:t.data.payload.address,error:!1},date_of_birth:{value:null===t.data.payload.date_of_birth||""===t.data.payload.date_of_birth?"":Tt()(t.data.payload.date_of_birth).format("ll"),error:!1},register_date:{value:Tt()(t.data.payload.register_date).format("lll"),error:!1},blood_group:{value:t.data.payload.blood_group,error:!1},gender:{value:t.data.payload.gender,error:!1},loading_status:!1})})).catch((function(t){t&&(console.log(t.response),t.response.status>=500?(bt("error",0,"No response"),e.setState({loading_status:!1})):t.response.status>=400&&t.response.status<500&&(bt("info",0,"".concat(t.response.status,". Please refresh the page.")),e.setState({loading_status:!1})))}))})):this.props.history.push(h)}},{key:"render",value:function(){var e=this,t=l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-2 col-sm-0 "}),l.a.createElement("div",{className:"col-lg-8 col-sm-12"},l.a.createElement("div",{className:"d-flex align-items-center mb-3"},l.a.createElement("div",{className:"card-img-actions d-inline-block "},l.a.createElement("img",{className:"img-fluid rounded-circle",src:Jt.a,style:{width:100,height:100},alt:""}),l.a.createElement("div",{className:"card-img-actions-overlay card-img rounded-circle"},l.a.createElement(d.b,{to:"#",className:"btn btn-outline bg-white text-white border-white border-2 btn-icon rounded-round"},l.a.createElement("i",{className:"icon-plus3"})))),l.a.createElement("div",{className:"d-flex flex-column ml-2"},l.a.createElement("span",{className:"h4 mb-0 font-weight-bold"},Ft(this.state.first_name.value)," ",Ft(this.state.last_name.value)),l.a.createElement("span",{className:"mb-0 text-muted"},this.state.email.value))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-6"},l.a.createElement(ht,{id:"first_name",heading:"First Name",placeholder:"Enter your first name",value:this.state.first_name.value,onChange:this.on_text_changed,error:this.state.first_name.error})),l.a.createElement("div",{className:"col-lg-6"},l.a.createElement(ht,{id:"last_name",heading:"Last Name",placeholder:"Enter your last name",type:"email",value:this.state.last_name.value,onChange:this.on_text_changed,error:this.state.last_name.error}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-6"},l.a.createElement(ht,{id:"phone_number",heading:"Phone number",placeholder:"Enter phone number",value:this.state.phone_number.value,onChange:this.on_text_changed,error:this.state.phone_number.error})),l.a.createElement("div",{className:"col-lg-6"},l.a.createElement(ht,{id:"cnic",heading:"CNIC",placeholder:"Enter CNIC",value:this.state.cnic.value,onChange:this.on_text_changed,error:this.state.cnic.error}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(ht,{field_type:"select",id:"blood_group_selection",heading:"Blood Group",placeholder:"Select blood group",error:this.state.cnic.error,isClearable:!0,name:"color",options:yt,menuPosition:"auto",onChange:function(t){return e.on_selected_changed(t,"blood_group_selection")},value:[{id:"blood_group_selection",label:this.state.blood_group.value}]})),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(ht,{field_type:"select",heading:"Gender",isClearable:!0,name:"color",options:Et,placeholder:"Select gender",menuPosition:"auto",id:"gender_selection",onChange:function(t){return e.on_selected_changed(t,"gender_selection")},value:[{id:"gender_selection",label:this.state.gender.value}]})),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(ht,{id:"user_dob",onChange:this.on_user_date_of_birth_change,className:"clock_datatime_picker form-control",placeholder:"Enter your date of birth",heading:"Date of birth",field_type:"date-time",input:!0,dateFormat:"ll",timeFormat:!1,closeOnSelect:!0,value:this.state.date_of_birth.value}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-6"},l.a.createElement(ht,{field_type:"select",heading:"Country",isClearable:!0,options:xt,placeholder:"Select country",menuPosition:"auto",id:"country_selection",isDisabled:!0,onChange:function(t){return e.on_selected_changed(t,"country_selection")},value:[{id:"country_selection",label:this.state.country.value}]})),l.a.createElement("div",{className:"col-lg-6"},l.a.createElement(ht,{field_type:"select",heading:"City",isClearable:!0,options:kt,placeholder:"Select city",menuPosition:"auto",id:"city_selection",onChange:function(t){return e.on_selected_changed(t,"city_selection")},value:[{id:"city_selection",label:this.state.city.value}]}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement(ht,{id:"address",heading:"Address",placeholder:"Address",icon_class:"icon-home",field_type:"text-area",value:this.state.address.value,onChange:this.on_text_changed,error:this.state.address.error}))),l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("span",{className:"text-muted"},"Registered: ",this.state.register_date.value),l.a.createElement("div",{className:""},l.a.createElement("button",{className:"btn bg-dark btn-labeled btn-labeled-right pr-5 float-right ml-2",onClick:function(){return e.props.history.push(_)}},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-cross"})),"Leave"),l.a.createElement("button",{className:"btn bg-teal-400 btn-labeled btn-labeled-right pr-5 float-right",onClick:this.on_click_update},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-floppy-disk"})),"Save"))))));return l.a.createElement("div",{className:"card border-top-info"},l.a.createElement("div",{className:"card-body"},this.state.loading_status?l.a.createElement(Vt,{size:150}):t))}}]),a}(n.Component));var Qt=Object(i.b)((function(e){return{active_user:e.active_user,notify:e.notify}}),{set_active_user:Ge,notify:bt,set_active_page:Ue})(Object(p.h)(Zt)),Xt=a(193),ea=a.n(Xt),ta=a(4),aa=a(491),na=a.n(aa),la=(a(997),function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).order_data=function(e){console.log("socket data",e);var t=e.patients_per_day,a=[];if(t.length>0)for(var l=0;l<t.length;++l){var r=t[l];if(a.push({date:Tt()("".concat(r._id.month,"/").concat(r._id.day,"/").concat(r._id.year)).format("LL"),count:r.count}),l===t.length-1){var o=e.patient_attended,c=e.patient_left+e.patient_attended;n.setState({doctors:e.doctors,patient_left:e.patient_left,patient_attended:e.patient_attended,total_attended:e.total_patients_attended,total_appointments:e.total_patients_appointments_registered,checkout_percentage:Math.ceil(o/(0===c?1:c)*100),current_date_time:Tt()(new Date).format("LLLL"),loading_status:!1,patients_per_day:a.sort(n.compare_dates)})}}else{var s=e.patient_attended,i=e.patient_left+e.patient_attended;n.setState({doctors:e.doctors,patient_left:e.patient_left,patient_attended:e.patient_attended,total_attended:e.total_patients_attended,total_appointments:e.total_patients_appointments_registered,checkout_percentage:Math.ceil(s/(0===i?1:i)*100),current_date_time:Tt()(new Date).format("LLLL"),loading_status:!1,patients_per_day:[]})}},n.state={doctors:0,patient_left:0,patient_attended:0,total_attended:0,total_appointments:0,checkout_percentage:100,loading_status:!0,patients_per_day:[],current_date_time:Tt()(new Date).format("LLLL")},n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=[l.a.createElement(d.b,{to:_,className:"breadcrumb-item"},l.a.createElement("i",{className:"icon-home2 mr-2"}),"Home"),l.a.createElement("span",{className:"breadcrumb-item active"},"Dashboard")];this.props.set_active_page(t),this.socket=na()(P,{path:M}),console.log("socket",this.socket),this.socket.on("FromAPI",(function(t){return e.order_data(t)}))}},{key:"compare_dates",value:function(e,t){return new Date(e.date)-new Date(t.date)}},{key:"componentWillUnmount",value:function(){this.socket.disconnect()}},{key:"render",value:function(){var e={tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{type:"gauge",detail:{formatter:"{value}%"},data:[{value:this.state.checkout_percentage}]}]},t={tooltip:{trigger:"axis",position:function(e){return[e[0],"10%"]}},xAxis:{type:"category",boundaryGap:!1,data:this.state.patients_per_day.map((function(e){return e.date}))},yAxis:{type:"value",boundaryGap:[0,"100%"]},dataZoom:[{type:"inside",start:0,end:100},{start:0,end:10,handleIcon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"80%",handleStyle:{color:"#fff",shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.6)",shadowOffsetX:2,shadowOffsetY:2}}],series:[{name:"Patients",type:"line",symbol:"none",itemStyle:{color:"#00338D"},areaStyle:{color:new ta.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#015BF9"},{offset:1,color:"#6198F7"}])},data:this.state.patients_per_day.map((function(e){return e.count}))}]},a={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"horizontal",left:10,data:["Attended","Waiting"]},series:[{name:"Patients Attended history",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!0,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:[{value:this.state.total_attended,name:"Attended"},{value:this.state.total_appointments-this.state.total_attended,name:"Waiting"}]}]};return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-4 d-flex align-items-stretch "},l.a.createElement("div",{className:"card w-100 border-left-3 border-top-0 border-bottom-0 border-right-0 border-info "},l.a.createElement("div",{className:"card-body d-flex justify-content-around align-items-center py-1"},l.a.createElement("div",{className:""},this.state.loading_status?l.a.createElement(Vt,{size:55,custom:{color:"#5bc0de"}}):l.a.createElement("h1",{className:"font-weight-bold text-center values-text mb-0 text-info"},this.state.doctors),l.a.createElement(d.b,{className:"h5 text-dark",to:N},"Doctors")),l.a.createElement("i",{className:"fa fa-stethoscope fa-5x text-info"})))),l.a.createElement("div",{className:"col-lg-8"},l.a.createElement("div",{className:"card border-left-3 border-top-0 border-bottom-0 border-right-0 border-info "},l.a.createElement("div",{className:"card-header pb-0"},l.a.createElement("div",{className:"h6 mb-0 d-flex w-100  justify-content-center"},l.a.createElement("div",{className:"heading"},l.a.createElement("span",{className:"filter font-weight-bold "},"Patients Today")))),l.a.createElement("div",{className:"card-body d-flex justify-content-around align-items-center py-1"},l.a.createElement("div",{className:""},this.state.loading_status?l.a.createElement(Vt,{size:55,custom:{color:"#d9534f"}}):l.a.createElement("h1",{className:"font-weight-bold text-center values-text mb-0 text-danger"},this.state.patient_left),l.a.createElement("h5",null,"Waiting")),l.a.createElement("i",{className:"fa fa-heartbeat fa-5x text-danger"}),l.a.createElement("div",{className:"border-left mx-3"}),l.a.createElement("div",null,this.state.loading_status?l.a.createElement(Vt,{size:55,custom:{color:"#5cb85c"}}):l.a.createElement("h1",{className:"font-weight-bold text-center values-text mb-0 text-success"},this.state.patient_attended),l.a.createElement("h5",null,"Checked out")),l.a.createElement("i",{className:"fa fa-heartbeat fa-5x text-success"}))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-8"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-header header-elements-inline"},l.a.createElement("h5",{className:"card-title",style:{fontSize:"20px"}},"Patients per doctor")),l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"chart-container"},l.a.createElement(ea.a,{option:{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["Total","Attended"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:["Dr. Yasir","Dr. Hamad","Dr. Shiza","Dr. Farukh","Dr. Baig"]},series:[{name:"Total",type:"bar",data:[14,5,8,2,1]},{name:"Attended",type:"bar",data:[6,3,4,2,0]}]}}))))),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-header header-elements-inline"},l.a.createElement("h5",{className:"card-title",style:{fontSize:"20px"}},"Patients Attended")),l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"chart-container"},l.a.createElement(ea.a,{option:e})))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-4"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-header header-elements-inline"},l.a.createElement("h5",{className:"card-title",style:{fontSize:"20px"}},"Patients Attended history")),l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"chart-container"},l.a.createElement(ea.a,{option:a}))))),l.a.createElement("div",{className:"col-lg-8"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-header header-elements-inline"},l.a.createElement("h5",{className:"card-title",style:{fontSize:"20px"}},"Patients Attendence History")),l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"chart-container"},l.a.createElement(ea.a,{option:t})))))))}}]),a}(n.Component));var ra=Object(i.b)((function(e){return{active_user:e.active_user,active_page:e.active_page}}),{set_active_user:Ge,set_active_page:Ue})(la),oa=a(53),ca=a(1163),sa=[{id:"doctor_name",numeric:!1,disablePadding:!1,label:"Doctor (Appointments)"},{id:"consultancy_fee",numeric:!0,disablePadding:!1,label:"C-Fee"},{id:"c_doctor_share",numeric:!0,disablePadding:!1,label:"Dr. Share"},{id:"c_hospital_share",numeric:!0,disablePadding:!1,label:"H. Share"},{id:"procedures_fee",numeric:!0,disablePadding:!1,label:"P-Fee"},{id:"p_doctor_share",numeric:!0,disablePadding:!1,label:"Dr. Share"},{id:"p_hospital_share",numeric:!0,disablePadding:!1,label:"H. Share"},{id:"balance",numeric:!0,disablePadding:!1,label:"Bal"},{id:"actions",numeric:!0,disablePadding:!1,label:"Actions"}],ia=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).onCheckoutToggle=function(e,t){n.setState({checkoutModalVisibility:!0},(function(){var a=n.state.rawData.filter((function(t){return t.doctor.id===e})),l={id:e,doctor_name:n.state.featuredData[e].doctor_name,appointment_count:parseInt(n.state.featuredData[e].doctor_name.substring(n.state.featuredData[e].doctor_name.indexOf("(")+1,n.state.featuredData[e].doctor_name.length-1)),total_consultancy_fee:n.state.featuredData[e].consultancy_fee,total_procedures_fee:n.state.featuredData[e].procedures_fee,total_amount:n.state.featuredData[e].consultancy_fee+n.state.featuredData[e].procedures_fee,consultancy_share:n.state.featuredData[e].c_doctor_share,procedures_share:n.state.featuredData[e].p_doctor_share,balance:n.state.featuredData[e].balance,appointments:a,procedures:[]};n.setState({currentCheckout:l,mode:t})}))},n.query=function(e){var t=Object(oa.a)(n);Te(e,"checkout").then(function(){var e=Object(je.a)(Ce.a.mark((function e(a){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.data.payload&&a.data.payload.length>0)){e.next=4;break}return e.delegateYield(Ce.a.mark((function e(){var r,o,c,s;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},o=a.data.payload,c=0,s=Ce.a.mark((function e(){var s;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=o[c],e.next=3,Ye(s._id,s.doctor.id,new Date).then(function(){var e=Object(je.a)(Ce.a.mark((function e(a){var n,o,c,i,d,u;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Number(s.appointment_charges.consultancy)+Number(s.appointment_charges.follow_up)-Number(s.appointment_charges.discount),o=n/100*Number(s.doctor.consultancy_percentage),c=a.data.payload.reduce((function(e,t){return e+(t.fee||0)}),0)-a.data.payload.reduce((function(e,t){return e+(t.discount||0)}),0),i=a.data.payload.reduce((function(e,t){return e+(t.dr_share||0)}),0),!r[s.doctor.id]){e.next=17;break}d=r[s.doctor.id].doctor_name,u=parseInt(d.substring(d.indexOf("(")+1,d.length-1)),++u,r[s.doctor.id].doctor_name="".concat(d.substring(0,d.indexOf("(")-1)," (").concat(u,")"),r[s.doctor.id].consultancy_fee+=n,r[s.doctor.id].c_doctor_share+=o,r[s.doctor.id].c_hospital_share+=n-o,r[s.doctor.id].procedures_fee+=c,r[s.doctor.id].p_doctor_share+=c*i/100,r[s.doctor.id].p_hospital_share+=c-c*i/100,e.next=19;break;case 17:return e.next=19,(m=s.doctor.id,D.a.post(B,{user_id:m})).then(function(){var e=Object(je.a)(Ce.a.mark((function e(a){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r[s.doctor.id]={doctor_name:"Dr. ".concat(Ft(s.doctor.first_name)," ").concat(Ft(s.doctor.last_name)," (",1,")"),consultancy_fee:n,c_doctor_share:o,c_hospital_share:n-o,procedures_fee:c,p_doctor_share:c*i/100,p_hospital_share:c-c*i/100,balance:a.data.payload.details.payments_balance,actions:s.is_paid_to_doctor?l.a.createElement(Ht,{className:"btn-sm",color:"black",onClick:function(){return t.onCheckoutToggle(s.doctor.id,"view")},icon:"icon-eye"}):l.a.createElement(Ht,{className:"btn-sm",onClick:function(){return t.onCheckoutToggle(s.doctor.id,"checkout")},icon:"icon-exit3"})};case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 19:case"end":return e.stop()}var m}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:if(++c!==o.length){e.next=7;break}return n.setState({featuredData:r,data:Object.keys(r).map((function(e){return r[e]})),rawData:a.data.payload,loading:!1}),e.abrupt("return","break");case 7:case"end":return e.stop()}}),e)}));case 4:return e.delegateYield(s(),"t0",6);case 6:if("break"!==e.t0){e.next=9;break}return e.abrupt("break",11);case 9:e.next=4;break;case 11:case"end":return e.stop()}}),e)}))(),"t0",2);case 2:e.next=5;break;case 4:n.setState({featuredData:{},data:[],rawData:[],loading:!1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("error",e)}))},n.loadData=function(e){var t=new Date(e);n.query(t);var a=setInterval((function(){return n.query(t)}),15e3);n.setState({queryInterval:a})},n.showDoctor=function(e){},n.onConfirmCheckout=function(){n.setState({modalLoading:!0},(function(){var e,t=Object(ut.a)(Object(ut.a)({},n.state.currentCheckout),{},{appointments:void 0});(e={doctor_id:n.state.currentCheckout.id,branch_id:"5e86609dc45b265690b8a25d",details:t,paid_amount:Number(n.state.paid_text_input.value),balance:n.state.currentCheckout.consultancy_share+n.state.currentCheckout.procedures_share+n.state.currentCheckout.balance-Number(n.state.paid_text_input.value),appointments_ids:n.state.currentCheckout.appointments.map((function(e){return e._id}))},D.a.post(_e,e)).then((function(e){n.setState({modalLoading:!1,checkoutModalVisibility:!1,paid_text_input:{value:"",error:!1}},(function(){bt("success",0,e.data.message)}))})).catch((function(e){n.setState({modalLoading:!1},(function(){bt("error",0,e.toString())}))}))}))},n.state={loading:!0,modalLoading:!1,data:[],rawData:[],featuredData:{},searchDate:Tt()(new Date).format("ll"),queryInterval:null,checkoutModalVisibility:!1,userPreviewModalVisibility:!1,showAppointments:!1,currentCheckout:{id:"",doctor_name:"",appointment_count:0,total_consultancy_fee:0,total_procedures_fee:0,total_amount:0,consultancy_share:0,procedures_share:0,balance:0,appointments:[],procedures:[]},paid_text_input:{value:"",error:!1},mode:"checkout"},n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){var e=[l.a.createElement(d.b,{to:_,className:"breadcrumb-item"},l.a.createElement("i",{className:"icon-home2 mr-2"}),"Pricing"),l.a.createElement("span",{className:"breadcrumb-item active"},"Payments")];this.props.set_active_page(e),this.loadData(this.state.searchDate)}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.queryInterval)}},{key:"render",value:function(){var e=this;return l.a.createElement(n.Fragment,null,l.a.createElement(At,{rows:this.state.data,headCells:sa,loading:this.state.loading,heading:"Doctors"}),l.a.createElement(Yt.a,{visible:this.state.checkoutModalVisibility,dialogClassName:"modal-lg",onClickBackdrop:function(){return e.setState({checkoutModalVisibility:!1})}},l.a.createElement("div",{className:"modal-header bg-teal-400"},l.a.createElement("h5",null,"Checkout ",l.a.createElement("span",{className:"h3 mb-0"},this.state.currentCheckout.doctor_name,l.a.createElement(d.b,{to:"#",onClick:function(){return e.showDoctor(e.state.currentCheckout.doctor_id)}},l.a.createElement("i",{className:"ml-2 mb-1 icon-new-tab text-white"}))))),l.a.createElement("div",{className:"modal-body"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"table-responsive"},l.a.createElement("table",{className:"table table-sm table-hover table-bordered mb-0"},l.a.createElement("thead",null),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Appointments count"),l.a.createElement("td",null,this.state.currentCheckout.appointment_count)),l.a.createElement("tr",null,l.a.createElement("td",null,"Total Consultancy Fee"),l.a.createElement("td",null,"Rs. ",this.state.currentCheckout.total_consultancy_fee,"/-")),l.a.createElement("tr",null,l.a.createElement("td",null,"Consultancy Dr. share"),l.a.createElement("td",null,"Rs. ",this.state.currentCheckout.consultancy_share,"/-")),l.a.createElement("tr",null,l.a.createElement("td",null,"Total Procedures Fee"),l.a.createElement("td",null,"Rs. ",this.state.currentCheckout.total_procedures_fee,"/-")),l.a.createElement("tr",null,l.a.createElement("td",null,"Procedures Dr. share"),l.a.createElement("td",null,"Rs. ",this.state.currentCheckout.procedures_share,"/-")),l.a.createElement("tr",null,l.a.createElement("td",null,"Balance"),l.a.createElement("td",null,"Rs. ",this.state.currentCheckout.balance,"/-")),l.a.createElement("tr",null,l.a.createElement("td",{className:"font-weight-bold h5"},"To be paid"),l.a.createElement("td",null,"Rs. ",this.state.currentCheckout.consultancy_share+this.state.currentCheckout.procedures_share,"/- ",l.a.createElement("span",{className:"text-muted"},"(out of ",this.state.currentCheckout.total_amount,")")))))))),l.a.createElement("div",{className:"row mt-2 ".concat("view"===this.state.mode?"d-none":"")},l.a.createElement("div",{className:"col-md-".concat("view"===this.state.mode?12:6)},l.a.createElement("pre",{className:"w-100 text-center mb-0"},l.a.createElement("h4",{className:"mb-0"},"Total: Rs. ","view"===this.state.mode?this.state.currentCheckout.paid_amount:this.state.currentCheckout.consultancy_share+this.state.currentCheckout.procedures_share+this.state.currentCheckout.balance,"/-"))),l.a.createElement("div",{className:"col-md-".concat("view"===this.state.mode?0:3," d-flex align-items-end")},"view"===this.state.mode?"":l.a.createElement(ht,{id:"paid_text_input",heading:"Paid amount",placeholder:"Enter the paid amount",parent_classes:"mb-0 mb-auto w-100",className:"w-100",value:this.state.paid_text_input.value,onChange:function(t){return e.setState({paid_text_input:{value:t.target.value,error:!1}})}})),l.a.createElement("div",{className:"col-md-".concat("view"===this.state.mode?0:3," d-flex align-items-end")},"view"===this.state.mode?"":l.a.createElement(zt,{className:"btn-block py-2",icon:"icon-exit3",disabled:this.state.modalLoading,onClick:function(){return e.onConfirmCheckout()}},"Checkout"))),l.a.createElement("div",{className:"btn btn-block text-left",onClick:function(){return e.setState({showAppointments:!e.state.showAppointments})}},l.a.createElement("i",{className:"".concat(this.state.showAppointments?"icon-subtract":"icon-add")})," View Appointments (",Tt()(new Date,"YYYY-MM-DDThh:mm:ss").format("ll"),")"),l.a.createElement(ca.a,{isOpen:this.state.showAppointments},l.a.createElement("div",{className:"table-responsive"},l.a.createElement("table",{className:"table table-hover table-bordered table-sm mb-0"},l.a.createElement("thead",{className:"bg-dark"},l.a.createElement("tr",null,l.a.createElement("th",null,"Appointment Time"),l.a.createElement("th",null,"Consultancy"),l.a.createElement("th",null,"Follow up"),l.a.createElement("th",null,"Discount"),l.a.createElement("th",null,"Total"),l.a.createElement("th",null,"Consultancy Share"),l.a.createElement("th",null,"Payment Time"))),l.a.createElement("tbody",null,this.state.currentCheckout.appointments.map((function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,Tt()(e.appointment_date,"YYYY-MM-DDThh:mm:ss").format("LT")),l.a.createElement("td",null,"Rs. ",e.appointment_charges.consultancy,"/-"),l.a.createElement("td",null,"Rs. ",e.appointment_charges.follow_up,"/-"),l.a.createElement("td",null,"Rs. ",e.appointment_charges.discount,"/-"),l.a.createElement("td",null,"Rs. ",Number(e.appointment_charges.consultancy)+Number(e.appointment_charges.follow_up)-Number(e.appointment_charges.discount),"/-"),l.a.createElement("td",null,"Rs. ",(Number(e.appointment_charges.consultancy)+Number(e.appointment_charges.follow_up)-Number(e.appointment_charges.discount))/100*e.doctor.consultancy_percentage,"/- (",e.doctor.consultancy_percentage,"%)"),l.a.createElement("td",null,Tt()(new Date(e.appointment_charges.time),"YYYY-MM-DDThh:mm:ss").format("LT")))})))))))))}}]),a}(n.Component);var da=Object(i.b)((function(e){return{todays_patient:e.todays_patient}}),{load_todays_appointments:Ke,notify:bt,set_active_page:Ue})(Object(p.h)(ia)),ua=a(17),ma=a(1132),pa=a(76),_a=a(1134),ha=a(1136),ba=a(1137),ga=a(1138),fa=a(240),va=a(1162),ya=a(1142),Ea=a(1144),Na=a(1165),wa=a(1166),ka=a(1147),xa=a(1139),Sa=a(1140),Ca=a(1143),ja=a(1145),Oa=a(1146),Da=(a(1004),Object(ma.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:260,width:"calc(100% - ".concat(260,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:260,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:260,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(Pt.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(ut.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})));var Pa=Object(i.b)((function(e){return{left_sidebar:e.left_sidebar,active_user:e.active_user}}),{set_active_user:Ge,fetch_doctors:Ze,fetch_procedures_list:Xe})(Object(p.h)((function(e){var t=e.set_active_user,a=e.fetch_doctors,r=e.fetch_procedures_list,o=Da(),c=Object(pa.a)(),s=l.a.useState(!0),i=Object(u.a)(s,2),d=i[0],m=i[1],p=l.a.useState(!0),_=Object(u.a)(p,2),b=_[0],f=_[1],v=l.a.useState(!1),y=Object(u.a)(v,2),E=y[0],N=y[1],w=l.a.useState(!1),x=Object(u.a)(w,2),S=x[0],C=x[1],j=l.a.useState(null),O=Object(u.a)(j,2),P=O[0],M=O[1],I=Boolean(P),T=function(t){console.log("e",t.target.id),M(null);var a=t.target.id;"1"===a?(console.log("route profile"),e.history.push(g)):"2"===a?e.history.push(k):"3"===a&&F()};Object(n.useEffect)((function(){var e=localStorage.getItem("user");e?function(e){return D.a.get("".concat(z,"?tag=").concat(e))}(e).then((function(e){console.log("fetching data"),t(e.data.payload),a(),r(),f(!1),C(!0)})).catch((function(e){console.log(e),localStorage.clear(),localStorage.setItem("cached-path",window.location.pathname),t({}),f(!1)})):(f(!1),C(!1))}),[t,a,r]);var L,A,F=function(){N(!0),Me().then((function(t){!0===t.data.status?(localStorage.clear(),bt("success",0,t.data.message),setTimeout((function(){N(!1),e.history.push(h)}),1e3)):(N(!1),bt("error",0,t.data.message))})).catch((function(e){N(!1),bt("error",0,e)}))};return console.log("authenticated",S),b?l.a.createElement(rt,null):e.container_type&&!at.a.isEmpty(e.active_user)?l.a.createElement("div",{className:o.root},l.a.createElement(_a.a,null),l.a.createElement(ha.a,{position:"fixed",className:"".concat(Object(ua.a)(o.appBar,Object(Pt.a)({},o.appBarShift,d))," bg-dark")},l.a.createElement(ba.a,null,l.a.createElement(ga.a,{color:"inherit","aria-label":"open drawer",onClick:function(){m(!0)},edge:"start",className:Object(ua.a)(o.menuButton,Object(Pt.a)({},o.hide,d))},l.a.createElement(xa.a,null)),l.a.createElement(fa.a,{variant:"h6",noWrap:!0,style:{flexGrow:1}},"Code medicine"),l.a.createElement("div",null,l.a.createElement(ga.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){M(e.currentTarget)},color:"inherit"},l.a.createElement(Sa.a,null)),l.a.createElement(va.a,{id:"menu-appbar",anchorEl:P,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:I,onClose:T},l.a.createElement(ya.a,{onClick:T,disabled:!0},l.a.createElement("div",{className:"d-flex justify-conent-end mr-3"},l.a.createElement(Ca.a,{fontSize:"small",className:"mr-2"}),l.a.createElement(fa.a,{variant:"subtitle2"},Ft(e.active_user.first_name)))),l.a.createElement(Ea.a,null),l.a.createElement(ya.a,{id:1,onClick:T},"Profile"),l.a.createElement(ya.a,{id:2,onClick:T},"Settings"),l.a.createElement(Ea.a,null),l.a.createElement(ya.a,{id:3,onClick:T},"Logout"))))),l.a.createElement(Na.a,{variant:"permanent",className:Object(ua.a)(o.drawer,(L={},Object(Pt.a)(L,o.drawerOpen,d),Object(Pt.a)(L,o.drawerClose,!d),L)),classes:{paper:"".concat(Object(ua.a)((A={},Object(Pt.a)(A,o.drawerOpen,d),Object(Pt.a)(A,o.drawerClose,!d),A))," bg-dark")}},l.a.createElement("div",{className:o.toolbar},l.a.createElement(ga.a,{onClick:function(){m(!1)},className:"text-white"},"rtl"===c.direction?l.a.createElement(ja.a,null):l.a.createElement(Oa.a,null))),l.a.createElement(Ea.a,null),l.a.createElement(nn,{open:d})),l.a.createElement("main",{className:o.content},l.a.createElement("div",{className:o.toolbar}),e.children),l.a.createElement(wa.a,{className:o.backdrop,open:E,onClick:function(){return console.log("loading please wait...")}},l.a.createElement(ka.a,{color:"inherit"}))):l.a.createElement("div",{className:"virtual-body d-flex justify-content-center align-items-center background_custom"},e.children)}))),Ma=(n.Component,function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).on_sidebar_control_button_click=function(){!0===n.props.left_sidebar?n.props.left_sidebar_controls(!1):n.props.left_sidebar_controls(!0)},n.on_logout_button_click=function(){Me().then((function(e){!0===e.data.status?(localStorage.clear(),bt("success",0,e.data.message),n.props.history.push(h)):bt("error",0,e.data.message)})).catch((function(e){bt("error",0,e)}))},n.on_click_drop_down=function(){n.setState({showDropDown:!n.state.showDropDown})},n.on_click_collapse_menu=function(){n.setState({collapseMenu:!n.state.collapseMenu})},n.handleClickOutside=function(e){var t=o.a.findDOMNode(Object(oa.a)(n));t&&t.contains(e.target)||n.setState({showDropDown:!1})},n.state={showDropDown:!1,collapseMenu:!1},n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClickOutside,!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClickOutside,!0)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"navbar navbar-expand-md navbar-dark fixed-top"},l.a.createElement("div",{className:"navbar-brand"},l.a.createElement(d.b,{onClick:this.on_sidebar_control_button_click,to:"#",className:"d-inline py-3 text-white"},l.a.createElement("i",{className:"icon-paragraph-justify2"}))),l.a.createElement("div",{className:"d-md-none"},l.a.createElement("button",{className:"btn bg-teal-400 btn-labeled-left rounded-round",onClick:function(){return e.on_click_drop_down()}},l.a.createElement("i",{className:"icon-reading"})),l.a.createElement("div",{className:"dropdown-menu dropdown-menu-right ".concat(this.state.showDropDown?"show":""),"x-placement":"bottom-end",style:{position:"absolute",willChange:"transform",top:"0px",right:"0px",transform:"translate3d(-38px, 36px, 0px)"}},l.a.createElement(d.b,{to:g,className:"dropdown-item"},l.a.createElement("i",{className:"icon-user-plus"})," My profile"),l.a.createElement("div",{className:"dropdown-divider"}),l.a.createElement(d.b,{onClick:function(){return e.on_logout_button_click()},to:"#",className:"dropdown-item"},l.a.createElement("i",{className:"icon-switch2"})," Logout"))),l.a.createElement("div",{className:"collapse navbar-collapse d-none d-md-none d-lg-flex justify-content-between align-items-center ".concat(this.state.collapseMenu?"":"show"),id:"navbar-mobile"},l.a.createElement("p",{className:"mb-0"},null!==this.props.active_page?this.props.active_page.map((function(e,t){return l.a.createElement(n.Fragment,{key:t},e)})):""),l.a.createElement("div",{className:"text-white d-flex align-items-center"},l.a.createElement(d.b,{to:"#",onClick:function(){return alert("Please mail us on codemedicine29@gmail.com")},className:"breadcrumb-elements-item mr-2"},l.a.createElement("i",{className:"icon-comment-discussion mr-2"}),"Support"),l.a.createElement("button",{className:"btn bg-teal-400 btn-labeled btn-labeled-left rounded-round dropdown-toggle pl-5",onClick:function(){return e.on_click_drop_down()}},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-reading"})),Ft(this.props.active_user.first_name))),l.a.createElement("div",{className:"dropdown-menu dropdown-menu-right ".concat(this.state.showDropDown?"show":""),"x-placement":"bottom-end",style:{position:"absolute",willChange:"transform",top:"0px",right:"0px",transform:"translate3d(-38px, 36px, 0px)"}},l.a.createElement(d.b,{to:g,className:"dropdown-item"},l.a.createElement("i",{className:"icon-user-plus"})," My profile"),l.a.createElement("div",{className:"dropdown-divider"}),l.a.createElement(d.b,{onClick:function(){return e.on_logout_button_click()},to:"#",className:"dropdown-item"},l.a.createElement("i",{className:"icon-switch2"})," Logout"))))}}]),a}(n.Component));Object(i.b)((function(e){return{left_sidebar:e.left_sidebar,active_user:e.active_user,active_page:e.active_page}}),{left_sidebar_controls:He,set_active_user:Ge})(Object(p.h)(Ma));var Ia=a(1164),Ta=a(1141),La=a(1100),Aa=a(1154),Fa=a(1155),Ra=a(1158),Ba=a(1156),za=a(1157),qa=(a(1005),a(1148)),Ya=a(1149),Va=a(1150),Ha=a(1151),Ga=a(1152),Ua=a(1153),Ka=l.a.createElement(qa.a,null),Wa={Dashboard:{title:"Home",nested:!1,icon_class:l.a.createElement(Ya.a,null),url:_,active:!0},Search:{title:"Search",nested:!0,icon_class:l.a.createElement(Va.a,null),url:"#",open:!1,active:!0,routes:[{title:"Patients",url:_,icon_class:Ka,active:!1},{title:"Doctors",url:N,icon_class:Ka,active:!0}]},Reception:{title:"Reception",nested:!0,icon_class:l.a.createElement(Ha.a,null),url:"#",open:!1,active:!0,routes:[{title:"Today's Patients",url:f,icon_class:Ka,active:!0},{title:"All Appointments",url:v,icon_class:Ka,active:!0},{title:"Procedures",url:y,icon_class:Ka,active:!0},{title:"Emergency",url:_,icon_class:Ka,active:!1},{title:"Admissions",url:_,icon_class:Ka,active:!1},{title:"Requests",url:_,icon_class:Ka,active:!1}]},Accounts:{title:"Accounts",nested:!0,icon_class:l.a.createElement(Ga.a,null),url:"#",open:!1,active:!0,routes:[{title:"Day to day",url:w,icon_class:Ka,active:!0},{title:"My Payments",url:_,icon_class:Ka,active:!1},{title:"History",url:_,icon_class:Ka,active:!1}]},Settings:{title:"Settings",nested:!1,icon_class:l.a.createElement(Ua.a,null),url:k,active:!0}},$a=a(117),Ja={left_sidebar_collapsed:!0},Za=Object($a.combineReducers)({notify:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"notify":var a={position:st.b.POSITION.TOP_RIGHT,pauseOnFocusLoss:!0};switch(t.payload.type){case"success":st.b.success(t.payload.message,a);break;case"error":st.b.error(t.payload.message,a);break;case"warning":st.b.warn(t.payload.message,a);break;case"info":st.b.info(t.payload.message,a);break;default:Object(st.b)(t.payload.message,a)}return t.payload;default:return e}},left_sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"left_sidebar":return t.payload;default:return e}},active_user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"active_user":return t.payload;default:return e}},active_page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"active_page":return t.payload;default:return e}},todays_patient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"todays_patients":return console.log("todays patients",t.payload),200===t.payload.status?{loading:t.loading,data:t.payload.data.payload}:{loading:t.loading,data:t.payload};case"clear_todays_patients":return{loading:!0,data:[]};case"update_single_record":return void 0!==t.payload.new_item?e.data.map((function(e,a){return e._id!==t.payload.id?e:Object(ut.a)(Object(ut.a)({},e),t.payload.new_item)})):e.data;default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ja,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"settings-update-left-sidebar-list":var a=at.a.cloneDeep(e);return a.left_sidebar_collapsed=!e.left_sidebar_collapsed,a;default:return e}},doctors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch-doctors":return t.payload;default:return e}},proceduresList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch-procedure-list":return t.payload;default:return e}}}),Qa=a(495),Xa=a(496),en=a.n(Xa),tn=a(497),an=Object($a.createStore)(Za,Object(tn.composeWithDevTools)(Object($a.applyMiddleware)(en.a,Qa.a)));var nn=Object(i.b)((function(e){return{active_user:e.active_user,left_sidebar:e.left_sidebar,settings:e.settings}}),{set_active_user:Ge,left_sidebar_controls:He,toggle_sidebar_menu_collapse:Je})(Object(p.h)((function(e){var t=l.a.useState(Wa),a=Object(u.a)(t,2),n=a[0],r=a[1],o=e.active_user.first_name.charAt(0).toUpperCase(),c=e.active_user.first_name.length>1?e.active_user.first_name.substring(1):"",s=e.active_user.last_name.charAt(0).toUpperCase(),i=e.active_user.last_name.length>1?e.active_user.last_name.substring(1):"",m=e.open?"80px":"40px";return l.a.createElement("div",null,l.a.createElement("div",{className:"background_custom_left_side_bar d-flex justify-content-center align-items-center flex-column",style:{height:"25vh"}},l.a.createElement(Ia.a,{className:"text-info bg-white h3 p-3 btn btn-light ".concat(e.open?"zoomIn animated":"fadeInDownBig animated"),style:{height:m,width:m},component:"button",onClick:function(){return e.history.push(g)}},o,s),l.a.createElement("div",{className:e.open?"zoomIn animated":"zoomOut animated"},l.a.createElement(d.b,{className:"text-shadow text-white",to:g},o,c," ",s,i))),l.a.createElement(Ta.a,{className:"zoomIn animated"},e.settings.left_sidebar_collapsed?Object.keys(n).map((function(e,t){var a=n[e];return l.a.createElement("div",{key:t},l.a.createElement(La.a,{button:!0,className:"text-white",selected:window.location.pathname===a.url,component:d.b,to:a.url,onClick:function(){return function(e){if(n[e].nested){var t=Object(ut.a)({},n);t[e].open=!t[e].open,r(t)}}(e)}},l.a.createElement(Aa.a,{className:"text-white"},a.icon_class),l.a.createElement(Fa.a,{primary:a.title,primaryTypographyProps:{variant:"body2"}}),a.nested?a.open?l.a.createElement(Ba.a,null):l.a.createElement(za.a,null):""),a.nested?l.a.createElement(Ra.a,{in:a.open,timeout:"auto",unmountOnExit:!0},l.a.createElement(Ea.a,null),l.a.createElement(Ta.a,{component:"div",className:"bg-slate-800",disablePadding:!0},a.routes.map((function(e,a){return l.a.createElement(La.a,{key:a*t,button:!0,disabled:!e.active,selected:window.location.pathname===e.url,className:"text-white",component:d.b,to:e.url},l.a.createElement(Aa.a,{className:"text-white"},e.icon_class),l.a.createElement(Fa.a,{primary:e.title,primaryTypographyProps:{variant:"body2"}}))}))),l.a.createElement(Ea.a,null)):"")})):""),l.a.createElement("button",{className:"btn ",onClick:function(){return console.log("STORE",an.getState())}},"Store"))}))),ln=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(x.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).on_logout_button_click=function(){D.a.post(ge,{token:localStorage.getItem("user")},{headers:{"code-medicine":localStorage.getItem("user")}}).then((function(t){!0===t.data.status?(localStorage.clear(),e.props.set_active_user({}),e.props.history.push(h),bt("success",0,t.data.message)):bt("error",0,t.data.message)})).catch((function(e){bt("error",0,e)}))},e}return Object(S.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"page-header page-header-light"},l.a.createElement("div",{className:"breadcrumb-line breadcrumb-line-light header-elements-md-inline"},l.a.createElement("div",{className:"d-flex"},l.a.createElement("div",{className:"breadcrumb py-0"},null!==this.props.active_page?this.props.active_page.map((function(e,t){return l.a.createElement(n.Fragment,{key:t},e)})):""),l.a.createElement(d.b,{to:_,className:"header-elements-toggle text-default d-md-none"},l.a.createElement("i",{className:"icon-more"}))),l.a.createElement("div",{className:"header-elements d-none"},l.a.createElement("div",{className:"breadcrumb justify-content-center py-0"},l.a.createElement(d.b,{to:"#",onClick:function(){alert("Please mail us on codemedicine29@gmail.com")},className:"breadcrumb-elements-item"},l.a.createElement("i",{className:"icon-comment-discussion mr-2"}),"Support"),l.a.createElement("div",{className:"breadcrumb-elements-item dropdown p-0"},l.a.createElement(d.b,{to:"#",className:"breadcrumb-elements-item dropdown-toggle","data-toggle":"dropdown"},l.a.createElement("img",{src:Jt.a,style:{height:30,width:30},className:"rounded-circle mr-2",alt:""}),l.a.createElement("span",{className:""},this.props.active_user.first_name)),l.a.createElement("div",{className:"dropdown-menu dropdown-menu-right"},l.a.createElement(d.b,{to:g,className:"dropdown-item"},l.a.createElement("i",{className:"icon-user-plus"})," My profile"),l.a.createElement("div",{className:"dropdown-divider"}),l.a.createElement(d.b,{onClick:this.on_logout_button_click,to:"#",className:"dropdown-item"},l.a.createElement("i",{className:"icon-switch2"})," Logout")))))))}}]),a}(n.Component);Object(i.b)((function(e){return{active_user:e.active_user,active_page:e.active_page}}),{set_active_user:Ge,notify:bt})(Object(p.h)(ln));var rn=a(30),on=a(1159),cn=a(236),sn=a.n(cn),dn=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).populate_doctors=function(e){for(var t=[],a=0;a<e.length;++a){var l=e[a];t.push({id:"doctor_selection",value:l.doctor._id,label:"Dr. ".concat(Ft(l.doctor.first_name)," ").concat(Ft(l.doctor.last_name)," | ").concat(Bt(l.details.specialities,"description"))}),a===e.length-1&&n.setState({doctors:t})}},n.populate_procedures_list=function(e){for(var t=[],a=0;a<e.length;++a){var l=e[a];t.push({id:"procedure_selection",value:l._id,label:"".concat(Ft(l.name)," | ").concat(Ft(l.department)," ")}),a===e.length-1&&n.setState({procedures_list:t})}},n.onCreateProcedure=function(e){e.preventDefault(),n.setState({loading:!0},(function(){try{var t="".concat(Tt()(n.state.date_input.value).format("YYYY-MM-DD"),"T").concat(Tt()(n.state.time_input.value,["h:mm A"]).format("HH:mm:ss"),"Z"),a={patient_id:n.state.patient_input.value.trim(),doctor_id:n.state.doctor_input.value.trim(),appointment_id:n.props.appointment_id||null,procedure_list_id:n.state.procedure_type_input.value.trim(),reference:n.state.reference_input.value.trim(),fee:n.state.fee_input.value,discount:n.state.discount_input.value.trim(),dr_share:n.state.dr_share_input.value.trim(),description:n.state.comments_input.value.trim(),paid_amount:n.state.paid_amount_input.value,time_stamp:{operate:t,report:t}};n.props.data?(a._id=n.props.data._id,console.log("update payload",a)):(console.log("create payload",a),ze(a).then((function(e){bt("success",0,e.data.message),n.setState({loading:!1}),setTimeout((function(){n.props.handleClose(!0)}),1e3)})).catch((function(e){bt("error",0,e.toString()),n.setState({loading:!1})})))}catch(e){bt("info",0,e.toString()),n.setState({loading:!1})}}))},n.onTextChange=function(e){n.setState(Object(Pt.a)({},e.target.id,{value:e.target.value,error:!1}))},n.onSelectChange=function(e,t){if(console.log("e",e,t),"procedure_type_input"===t&&e){var a,l=n.props.procedures_list.find((function(t){return t._id===e.value}));n.setState((a={},Object(Pt.a)(a,t,{value:e.value,label:e.label,error:!1}),Object(Pt.a)(a,"fee_input",{value:l.operation_charges,error:!1}),a))}else n.setState(Object(Pt.a)({},t,{value:e?e.value:"",label:e?e.label:"",error:!1}))},n.populate_patients=function(e){clearTimeout(n.search_patient_trigger_timmer),e.length>=2?n.setState({pateints_options_loading:!0},(function(){n.search_patient_trigger_timmer=setTimeout((function(){var t,a;(t=e,a="Patient",D.a.get("".concat(q,"?search=").concat(t,"&role=").concat(a))).then((function(e){console.log("response ",e.data);var t=[];if(e.data.payload.users.length>0)for(var a=0;a<e.data.payload.users.length;++a){var l=e.data.payload.users[a];t.push({id:"patient_selection",value:l._id,label:"".concat(l.mrn," | ").concat(Ft(l.first_name)," ").concat(Ft(l.last_name)," ")}),a===e.data.payload.users.length-1&&n.setState({patients:t,pateints_options_loading:!1})}else n.setState({patients:[],pateints_options_loading:!1})}))}),1e3)})):n.setState({patients:[],pateints_options_loading:!1})},n.procedureDateInputChange=function(e){if(""===e)n.setState({date_input:{value:"",error:!0}});else{var t=null;try{t=e.format("ll"),localStorage.setItem("Gh65$p3a008#2G",t)}catch(a){t=""}finally{n.setState({date_input:{value:t,error:""===t}})}}},n.state={date_input:{value:Tt()().format("ll"),error:!1},procedure_type_input:{value:"",label:"",error:!1},patient_input:{value:"",label:"",error:!1},doctor_input:{value:"",label:"-",error:!1},reference_input:{value:"",error:!1},fee_input:{value:"",error:!1},discount_input:{value:"",error:!1},dr_share_input:{value:"",error:!1},comments_input:{value:"",error:!1},time_input:{value:Tt()().format("LT"),error:!1},paid_amount_input:{value:"",error:!1},loading:!1,doctors:[],patients:[],procedures_list:[],pateints_options_loading:!1},n.search_patient_trigger_timmer=null,n}return Object(S.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.doctors&&this.populate_doctors(e.doctors),e.procedures_list&&this.populate_procedures_list(e.procedures_list)}},{key:"componentDidMount",value:function(){this.props.doctors&&this.populate_doctors(this.props.doctors),this.props.procedures_list&&this.populate_procedures_list(this.props.procedures_list);var e=this.props.data;this.props.data&&this.setState((function(t){return t.date_input.value=Tt()(e.time_stamp.operate).format("ll"),t.procedure_type_input.label="".concat(e.procedure_type.name," | ").concat(e.procedure_type.department),t.procedure_type_input.value=e.procedures_list_id,t.patient_input.label="".concat(e.patient.mrn," | ").concat(Ft(e.patient.first_name)," ").concat(Ft(e.patient.last_name)),t.patient_input.value=e.patient_id,t.doctor_input.label="Dr. ".concat(Ft(e.doctor.first_name)," ").concat(Ft(e.doctor.last_name)),t.doctor_input.value=e.doctor_id,t.reference_input.value=e.reference,t.fee_input.value=e.fee,t.discount_input.value=e.discount,t.dr_share_input.value=e.dr_share,t.comments_input.value=e.description,t.time_input.value=Tt()(e.time_stamp.operate).format("LT"),t.paid_amount_input.value=e.paid_amount,t}))}},{key:"render",value:function(){var e=this;return l.a.createElement(Yt.a,{visible:this.props.visibility,dialogClassName:"modal-lg",onClickBackdrop:function(){return e.props.handleClose()}},l.a.createElement("form",{method:"post",onSubmit:this.onCreateProcedure},l.a.createElement("div",{className:"modal-header ".concat(this.props.data?"bg-slate":"bg-teal-400")},l.a.createElement("h5",null,this.props.data?"Update Procedure":"Create New Procedure"),l.a.createElement("div",{className:"w-25"},l.a.createElement(_t.a,{id:"date_input",onChange:function(t){return e.procedureDateInputChange(t)},className:"clock_datatime_picker text-teal-400",inputProps:{placeholder:"Select Date",width:"100%",className:"form-control ".concat(this.state.date_input.error?"border-danger":""),disabled:this.state.loading},input:!0,dateFormat:"ll",timeFormat:!1,closeOnSelect:!0,value:this.state.date_input.value}))),l.a.createElement("div",{className:"modal-body"},l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-8"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement(ht,{heading:"What procedure to do?",field_type:"select",required:!0,isClearable:!0,menuPlacement:"auto",options:this.state.procedures_list,className:"Select-option",classNamePrefix:"form-control",placeholder:"Search for procedure",id:"procedure_type_input",isDisabled:this.state.loading,onChange:function(t){return e.onSelectChange(t,"procedure_type_input")},value:{id:"procedure_type_input",value:this.state.procedure_type_input.value,label:this.state.procedure_type_input.label},styles:{container:function(t){return Object(ut.a)(Object(ut.a)({},t),{},{backgroundColor:e.state.procedure_type_input.error?"#FF0000":"",padding:1,borderRadius:5})}}}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-10"},l.a.createElement(ht,{heading:"Select Patient",field_type:"select",required:!0,isClearable:!0,menuPlacement:"auto",isLoading:this.state.pateints_options_loading,options:this.state.patients,noOptionsMessage:function(e){return"Type to Search"},className:"Select-option",classNamePrefix:"form-control",placeholder:"Search Patients",isDisabled:this.state.loading,onChange:function(t){return e.onSelectChange(t,"patient_input")},onInputChange:function(t){return e.populate_patients(t)},value:{id:"patient_input",value:this.state.patient_input.value,label:this.state.patient_input.label},styles:{container:function(t){return Object(ut.a)(Object(ut.a)({},t),{},{backgroundColor:e.state.patient_input.error?"#FF0000":"",padding:1,borderRadius:5})}}})),l.a.createElement("div",{className:"col-md-2 d-flex align-items-end"},l.a.createElement(on.a,{trigger:l.a.createElement(Ht,{icon:"icon-plus3",size:"lg",className:"btn-block",color:"gray",variant:"filled",onClick:function(){return console.log("call the new user modal")}}),flowing:!0,content:l.a.createElement("div",{className:"card card-body bg-dark text-white shadow ml-1 py-1 mt-4"},"Add new Patient"),position:"top center",style:{zIndex:15e3}}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-8"},l.a.createElement(ht,{heading:"Select doctor",field_type:"select",required:!0,isClearable:!0,menuPlacement:"auto",options:this.state.doctors,className:"Select-option",classNamePrefix:"form-control",placeholder:"Search Doctor",id:"doctor_input",isDisabled:this.state.loading,onChange:function(t){return e.onSelectChange(t,"doctor_input")},value:{id:"doctor_input",label:this.state.doctor_input.label,value:this.state.doctor_input.value},styles:{container:function(t){return Object(ut.a)(Object(ut.a)({},t),{},{backgroundColor:e.state.doctor_input.error?"#FF0000":"",padding:1,borderRadius:5})}}})),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(ht,{id:"reference_input",heading:"Refered by",className:"form-control",value:this.state.reference_input.value,onChange:function(t){return e.onTextChange(t)},placeholder:"Reference of a doctor",disabled:this.state.loading}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(ht,{id:"fee_input",heading:"Fee",className:"form-control",required:!0,value:this.state.fee_input.value,onChange:function(t){return e.onTextChange(t)},placeholder:"Enter Fee",disabled:this.state.loading})),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(ht,{id:"discount_input",heading:"Discount",className:"form-control",value:this.state.discount_input.value,onChange:function(t){return e.onTextChange(t)},placeholder:"Enter Discount",disabled:this.state.loading})),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(ht,{id:"dr_share_input",heading:"Dr. share (%)",className:"form-control",min:"0",max:"100",type:"number",required:!0,value:this.state.dr_share_input.value,onChange:function(t){return e.onTextChange(t)},placeholder:"Enter Doctor share",disabled:this.state.loading}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-8"},l.a.createElement(ht,{id:"comments_input",heading:"Comments if any",placeholder:"Write specific description if need to be addressed",icon_class:"icon-home",field_type:"text-area",value:this.state.comments_input.value,onChange:function(t){return e.onTextChange(t)},disabled:this.state.loading})),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement("div",{className:""},l.a.createElement(ht,{id:"paid_amount_input",heading:"Paid Amount",placeholder:"Enter amount",value:this.state.paid_amount_input.value,onChange:function(t){return e.onTextChange(t)},disabled:this.state.loading})),l.a.createElement("div",{className:"h4"},l.a.createElement("span",{className:"font-weight-bold"},"Balance: "),(parseInt(this.state.paid_amount_input.value)||0)-((parseInt(this.state.fee_input.value)||0)-(parseInt(this.state.discount_input.value)||0)))))),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement("label",null,"Specify the time of procedure"),l.a.createElement(sn.a,{time:this.state.time_input.value,onChange:function(t){return e.setState({time_input:{value:t.formatted12,error:!1}})},coarseMinutes:5,forceCoarseMinutes:!0,switchToMinuteOnHourSelect:!0}))))),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("div",{className:"mr-auto d-flex"},l.a.createElement("span",{className:"badge badge-light badge-striped badge-striped-left border-left-teal-400"},l.a.createElement("span",{className:"h6 font-weight-bold mr-1"},"Total: ",(parseInt(this.state.fee_input.value)||0)-(parseInt(this.state.discount_input.value)||0))),l.a.createElement("span",{className:"ml-2 badge badge-light badge-striped badge-striped-left border-left-teal-400"},l.a.createElement("span",{className:"h6 font-weight-bold mr-1"},"Discount: ",parseInt(this.state.discount_input.value)||0)),l.a.createElement("span",{className:"ml-2 badge badge-light badge-striped badge-striped-left border-left-teal-400"},l.a.createElement("span",{className:"h6 font-weight-bold mr-1"},"Dr. Share: ",((parseInt(this.state.fee_input.value)||0)-(parseInt(this.state.discount_input.value)||0))*(parseInt(this.state.dr_share_input.value)||0)/100))),l.a.createElement(zt,{icon:"icon-plus3",type:"submit"},this.props.data?"Update":"Create"),l.a.createElement(zt,{icon:"icon-cross",color:"red",type:"button",onClick:function(){return e.props.handleClose()}},"Cancel"))))}}]),a}(n.Component);var un=Object(i.b)((function(e){return{doctors:e.doctors.payload,procedures_list:e.proceduresList.payload}}))(dn),mn=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).populate_doctors=function(e){for(var t=[],a=0;a<e.doctors.length;++a){var l=e.doctors[a];t.push({id:"doctor_selection",value:l.doctor._id,label:"Dr. ".concat(Ft(l.doctor.first_name)," ").concat(Ft(l.doctor.last_name)," | ").concat(Bt(l.details.specialities,"description"))}),a===e.doctors.length-1&&n.setState({doctors:t})}},n.onTextChange=function(e){n.setState(Object(Pt.a)({},e.target.id,{value:e.target.value,error:!1}))},n.onDoctorsSelectChange=function(e){console.log("select",e),n.setState({operation_doctors_input:{value:e,error:!1}})},n.onCreateProcedureList=function(e){e.preventDefault(),console.log("state",n.state);try{var t={name:n.state.name_input.value.trim(),department:n.state.department_input.value.trim(),description:n.state.description_input.value.trim(),operation_alternative:n.state.operation_alternative_input.value.trim(),operation_charges:n.state.operation_charges_input.value.trim(),operation_doctors:n.state.operation_doctors_input.value.map((function(e){return e.value})),operation_efficacy:n.state.operation_efficacy_input.value.trim(),operation_risk:n.state.operation_risk_input.value.trim(),operation_time:parseInt(n.state.operation_time_input.value.trim())};console.log("payload",t),function(e){return D.a.post(de,e)}(t).then((function(e){console.log("response",e.data),bt("success",0,e.data.message)})).catch((function(e){console.log("error",e),bt("error",0,e.toString())}))}catch(a){console.log("error",a),bt("error",0,a.toString())}},n.state={loading:!1,doctors:[],name_input:{value:"",error:!1},department_input:{value:"",error:!1},description_input:{value:"",error:!1},operation_risk_input:{value:"",error:!1},operation_efficacy_input:{value:"",error:!1},operation_alternative_input:{value:"",error:!1},operation_time_input:{value:"",error:!1},operation_doctors_input:{value:[],error:!1},operation_charges_input:{value:"",error:!1}},n}return Object(S.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.populate_doctors(e)}},{key:"componentDidMount",value:function(){this.props.doctors&&this.populate_doctors(this.props)}},{key:"render",value:function(){var e=this;return l.a.createElement(Yt.a,{visible:this.props.visibility,dialogClassName:"modal-lg",onClickBackdrop:function(){return e.props.handleClose()}},l.a.createElement("form",{method:"post",onSubmit:this.onCreateProcedureList},l.a.createElement("div",{className:"modal-header bg-teal-400"},l.a.createElement("h5",null,"Add New Procedure To List")),l.a.createElement("div",{className:"modal-body"},l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-6"},l.a.createElement(ht,{id:"name_input",heading:"Procedure name",className:"form-control",required:!0,value:this.state.name_input.value,onChange:function(t){return e.onTextChange(t)},placeholder:"Enter name of the procedure",disabled:this.state.loading})),l.a.createElement("div",{className:"col-lg-6"},l.a.createElement(ht,{id:"department_input",heading:"Department Name",className:"form-control",required:!0,value:this.state.department_input.value,onChange:function(t){return e.onTextChange(t)},placeholder:"Enter name of the department",disabled:this.state.loading}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement(ht,{id:"description_input",heading:"Description",className:"form-control",required:!0,value:this.state.description_input.value,onChange:function(t){return e.onTextChange(t)},placeholder:"Enter description of procedure",disabled:this.state.loading}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(ht,{id:"operation_charges_input",heading:"Fee",className:"form-control",required:!0,value:this.state.operation_charges_input.value,onChange:function(t){return e.onTextChange(t)},placeholder:"Enter default fee",helper:"Only for default value",disabled:this.state.loading})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(ht,{id:"operation_time_input",heading:"Operation time (minutes)",className:"form-control",required:!0,value:this.state.operation_time_input.value,helper:"Number of minutes",onChange:function(t){return e.onTextChange(t)},placeholder:"Enter Time of operation in minutes",disabled:this.state.loading})),l.a.createElement("div",{className:"col-lg-6"},l.a.createElement(ht,{heading:"Select doctor",field_type:"select",required:!0,isClearable:!0,closeMenuOnSelect:!1,menuPlacement:"auto",options:this.state.doctors,className:"Select-option",classNamePrefix:"form-control",placeholder:"Select doctors for this procedure",id:"doctor_input",isMulti:!0,isDisabled:this.state.loading,onChange:function(t){return e.setState({operation_doctors_input:{value:t,error:!1}})},styles:{container:function(t){return Object(ut.a)(Object(ut.a)({},t),{},{backgroundColor:e.state.operation_doctors_input.error?"#FF0000":"",padding:1,borderRadius:5})}}}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement(ht,{id:"operation_risk_input",heading:"Operation Risk",className:"form-control",required:!0,value:this.state.operation_risk_input.value,onChange:function(t){return e.onTextChange(t)},placeholder:"Enter the risk involved in the procedure (none if not)",disabled:this.state.loading}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement(ht,{id:"operation_efficacy_input",heading:"Efficacy",className:"form-control",required:!0,value:this.state.operation_efficacy_input.value,onChange:function(t){return e.onTextChange(t)},placeholder:"Enter the effictiveness of the procedure",disabled:this.state.loading}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement(ht,{id:"operation_alternative_input",heading:"Alternative",className:"form-control",required:!0,value:this.state.operation_alternative_input.value,onChange:function(t){return e.onTextChange(t)},placeholder:"Enter the alternative of this procedure (none if not)",disabled:this.state.loading}))))),l.a.createElement("div",{className:"modal-footer"},l.a.createElement(zt,{icon:"icon-plus3",type:"submit"},"Create"),l.a.createElement(zt,{icon:"icon-cross",color:"red",onClick:function(){return e.props.handleClose()}},"Cancel"))))}}]),a}(n.Component);var pn=Object(i.b)((function(e){return{doctors:e.doctors.payload}}))(mn);var _n=function(e){return l.a.createElement(nt.SkeletonTheme,{color:"#ffffff",highlightColor:"#f2f2f2"},l.a.createElement("div",{className:"container-fluid mt-2 bg-light"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-3 col-md-6 col-sm-6 mt-0 "},l.a.createElement(lt.a,{className:"my-1",count:1,height:120})),l.a.createElement("div",{className:"col-lg-2 col-md-6 col-sm-6 mt-0"},l.a.createElement(lt.a,{className:"my-1",count:1,height:120})),l.a.createElement("div",{className:"col-lg-7 col-md-12 col-sm-12 mt-sm-2"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 font-weight-bold h6"},l.a.createElement(lt.a,{className:"my-1",count:1,height:15}),l.a.createElement("span",{className:"text-muted float-lg-right float-md-right float-left"},l.a.createElement(lt.a,{className:"my-1",count:1,height:15})))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 h6"},l.a.createElement("span",{className:"font-weight-bold"},l.a.createElement(lt.a,{className:"my-1",count:1,height:15})),l.a.createElement("span",{className:"float-right"},l.a.createElement(lt.a,{className:"my-1",count:1,height:15})))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(lt.a,{className:"my-1",count:1,height:35})))))))},hn=function(e){return l.a.createElement(rn.z.Menu,e,l.a.createElement("div",{className:"bg-light text-teal-400",style:{width:"400px"}},e.children))},bn=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).populate_doctors=function(e){for(var t=[],a=0;a<e.doctors.length;++a){var l=e.doctors[a];t.push({id:"doctor_selection",value:l.doctor._id,label:"Dr. ".concat(Ft(l.doctor.first_name)," ").concat(Ft(l.doctor.last_name)," | ").concat(Bt(l.details.specialities,"description"))}),a===e.doctors.length-1&&n.setState({doctors:t})}},n.load_procedures=function(){var e;!n.state.loading&&n.setState({loading:!0}),(e=n.state.search_date.value,D.a.get("".concat(ne,"?date=").concat(e))).then((function(e){console.log("procedures",e.data),n.setState({procedures:e.data.payload,loading:!1})})).catch((function(e){return console.log("error",e)}))},n.todays_date_change=function(e){if(""===e)n.setState({search_date:{value:""}});else{var t=null;try{t=e.format("ll"),localStorage.setItem("Gh65$p3a008#3B",t)}catch(a){t=""}finally{n.setState({search_date:{value:t}},(function(){return n.load_procedures()}))}}},n.filter_records=function(){return n.state.procedures.filter((function(e){return(""===n.state.doctors_input.value||e.doctor_id===n.state.doctors_input.value)&&(""===n.state.patients_input.value||e.patient_id===n.state.patients_input.value)&&(""===n.state.status_selection.label||e.procedure_status===n.state.status_selection.label)}))},n.onSelectChange=function(e,t){console.log("e",e,t),n.setState(Object(Pt.a)({},t,{value:e?e.value:"",label:e?e.label:"",error:!1}))},n.state={doctors:[],patients:[],search_date:{value:Tt()(new Date).format("ll")},create_procedure_modal_visibility:{visibility:!1,data:null,type:0},create_procedure_list_modal_visibility:{visibility:!1,data:null,type:0},procedures:[],procedures_copy:[],loading:!0,doctors_input:{value:"",label:"",error:!1},patients_input:{value:"",label:"",error:!1},status_selection:{value:"",label:"",error:!1}},n}return Object(S.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.populate_doctors(e)}},{key:"componentDidMount",value:function(){var e=this;this.props.doctors&&this.populate_doctors(this.props),localStorage.getItem("Gh65$p3a008#3B")?this.setState({search_date:{value:localStorage.getItem("Gh65$p3a008#3B")}},(function(){return e.load_procedures()})):this.load_procedures()}},{key:"render",value:function(){var e=this,t=this.filter_records();return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-10"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"font-weight-semibold"},"Doctors"),l.a.createElement(mt.a,{isClearable:!0,components:{Menu:hn},menuPlacement:"auto",options:this.state.doctors,classNamePrefix:"form-control",placeholder:"Search Doctor",onChange:function(t){return e.onSelectChange(t,"doctors_input")}}))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"font-weight-semibold"},"Patients"),l.a.createElement(mt.a,{id:"patient_selection",isClearable:!0,components:{Menu:hn},menuPlacement:"auto",options:[],classNamePrefix:"form-control",placeholder:"Search Patient",onChange:function(t){return e.onSelectChange(t,"patients_input")}}))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"font-weight-semibold"},"Status"),l.a.createElement(mt.a,{isClearable:!0,options:wt,placeholder:"Status",onChange:function(t){return e.onSelectChange(t,"status_selection")}}))))),l.a.createElement("div",{className:"col-md-2 d-flex justify-content-center align-items-end mb-2 pb-2"},l.a.createElement(on.a,{trigger:l.a.createElement(Ht,{icon:"icon-filter4",variant:"filled",color:"black",size:"lg",className:"mx-1"}),content:l.a.createElement("div",{className:"card card-body bg-dark text-white shadow mb-1 py-1"},"Filter records"),flowing:!0,position:"top center"}),l.a.createElement(on.a,{trigger:l.a.createElement(Ht,{icon:"icon-add-to-list",variant:"filled",size:"lg",className:"mx-1",onClick:function(){return e.setState({create_procedure_list_modal_visibility:{visibility:!0,data:null,type:0}})}}),content:l.a.createElement("div",{className:"card card-body bg-teal-400 text-white shadow mb-1 py-1"},"New Procedure Item"),flowing:!0,position:"top center"}),l.a.createElement(on.a,{trigger:l.a.createElement(Ht,{icon:"icon-plus3",variant:"filled",size:"lg",className:"mx-1",onClick:function(){return e.setState({create_procedure_modal_visibility:{visibility:!0,data:null,type:0}})}}),content:l.a.createElement("div",{className:"card card-body bg-teal-400 text-white shadow mb-1 py-1"},"New Procedure"),flowing:!0,position:"top center"}))),l.a.createElement("div",{className:"table-header-background shadow-sw"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-6 col-md-6 col-12 d-flex align-items-center"},l.a.createElement("span",{className:"text-white"},"Procedure list for date"),l.a.createElement("span",{className:"badge badge-secondary ml-2 d-none d-lg-block"},this.state.search_date.value)),l.a.createElement("div",{className:"col-lg-3 d-none d-lg-block col-0"}),l.a.createElement("div",{className:"col-lg-3 col-md-6 col-12 d-flex"},l.a.createElement(_t.a,{id:"dob_text_input",onChange:this.todays_date_change,className:"clock_datatime_picker ",inputProps:{placeholder:"Select Date",width:"100%",className:"form-control bg-teal-400 border-teal-400"},input:!0,dateFormat:"ll",timeFormat:!1,closeOnSelect:!0,value:this.state.search_date.value,onClick:function(){return console.log("date select",e.state.search_date.value)}}),l.a.createElement("button",{className:"btn bg-teal-400 border-teal-400 text-teal-400 btn-sm ml-2",onClick:function(){}},l.a.createElement("i",{className:"icon-search4"}))))),l.a.createElement("div",{className:"table-responsive mt-2 card mb-0 pb-0"},l.a.createElement("table",{className:"table table-hover mb-0"},l.a.createElement("tbody",null,this.state.loading?l.a.createElement("div",{className:""},l.a.createElement("div",{className:""},l.a.createElement(_n,null)),l.a.createElement("div",{className:""},l.a.createElement(_n,null))):0===t.length?l.a.createElement("div",{className:"alert alert-info mb-0"},l.a.createElement("strong",null,"Info!")," No Procedures found."):t.map((function(t,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",null,l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-3 col-md-6 col-sm-6 mt-0 text-teal-400 border-left-2 border-left-teal-400 btn-block d-flex align-items-center justify-content-center text-center"},l.a.createElement("div",{className:"btn btn-outline bg-teal-400 text-teal-400 btn-block jackInTheBox animated"},l.a.createElement("span",{className:"rounded-circle text-white bg-teal-400 h3 p-2"},t.patient.first_name.charAt(0).toUpperCase(),t.patient.last_name.charAt(0).toUpperCase()),l.a.createElement("h4",{className:"mt-2"},Ft(t.patient.first_name)," ",Ft(t.patient.last_name)),l.a.createElement("span",null,l.a.createElement("i",{className:"icon-phone-wave mr-1"})," ",t.patient.phone_number))),l.a.createElement("div",{className:"col-lg-2 col-md-6 col-sm-6 mt-0 text-teal-400 border-left-2 border-bottom-sm-2 border-left-teal-400 border-right-teal-400 border-right-2 btn-block d-flex align-items-center justify-content-center text-center"},l.a.createElement("div",{className:"h-100 d-flex flex-column justify-content-center jackInTheBox animated text-teal-400 btn-block text-center"},l.a.createElement("h1",null,Tt()(t.time_stamp.operate,"YYYY-MM-DDThh:mm:ss").format("hh:mm a")),l.a.createElement("p",null,Tt()(t.time_stamp.operate).fromNow()))),l.a.createElement("div",{className:"col-lg-7 col-md-12 col-sm-12 mt-sm-2"},l.a.createElement("div",{className:"font-weight-bold"},t.procedure_type.name.toUpperCase()," | ",t.procedure_type.department.toUpperCase()),l.a.createElement("div",{className:""},t.appointment_id?l.a.createElement(d.b,{className:"text-teal-400"},"Appointment "):"Appointment ","with",l.a.createElement(d.b,{className:"text-teal-400 font-weight-bold ml-1",to:"#"},"Dr. ",Ft(t.doctor.first_name)," ",Ft(t.doctor.last_name),l.a.createElement("i",{className:"icon-user-tie ml-1"})),l.a.createElement("span",{className:"badge badge-".concat("danger"," float-right")},t.procedure_status)),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("span",{className:"font-weight-bold"},"Report Time: "),Tt()(t.time_stamp.report).format("LLL"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("span",{className:"font-weight-bold"},"Fee:")," Rs ",t.fee,"/-  ",l.a.createElement("span",{className:"font-weight-bold"},"Discount:")," Rs ",t.discount||0,"/- ",t.discount_purpose&&""!==t.discount_purpose?"(".concat(t.discount_purpose,")"):"(standard)")),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement(Ht,{icon:"icon-pencil",color:"default",size:"sm",onClick:function(){return e.setState({create_procedure_modal_visibility:{visibility:!0,data:t,type:1}})}}))))))))})))))),this.state.create_procedure_modal_visibility.visibility&&l.a.createElement(un,{visibility:this.state.create_procedure_modal_visibility.visibility,handleClose:function(t){e.setState({create_procedure_modal_visibility:{visibility:!1,data:null,type:0}}),t&&e.load_procedures()},data:this.state.create_procedure_modal_visibility.data}),this.state.create_procedure_list_modal_visibility.visibility&&l.a.createElement(pn,{visibility:this.state.create_procedure_list_modal_visibility.visibility,handleClose:function(){return e.setState({create_procedure_list_modal_visibility:{visibility:!1,data:null,type:0}})}}))}}]),a}(n.Component);var gn=Object(i.b)((function(e){return{doctors:e.doctors.payload}}))(bn),fn=(a(1092),a(106)),vn=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).handle_change=function(e){n.setState(Object(Pt.a)({},e.target.id,{value:e.target.value,error:!1}),(function(){n.state.description_text_input.value!==n.state.prev_description||parseInt(n.state.charges_text_input.value)!==n.state.prev_fee||parseInt(n.state.discount_text_input.value)!==n.state.prev_discount||parseInt(n.state.dr_share_text_input.value)!==n.state.prev_dr_share?n.setState({edited:!0}):n.setState({edited:!1})}))},n.on_save_click=function(){if(n.setState({save_click_loading:!0}),"new"===n.props.data.type){var e={appointment_id:n.props.appointment_id,fee:parseInt(n.state.charges_text_input.value),discount:parseInt(n.state.discount_text_input.value),dr_share:parseInt(n.state.dr_share_text_input.value),description:n.state.description_text_input.value};ze(e).then((function(e){n.setState({save_click_loading:!1,edited:!1}),bt("success",0,e.data.message),n.props.save_opp(n.props.index,{id:e.data.payload._id,fee:e.data.payload.fee,discount:e.data.payload.discount,dr_share:e.data.payload.dr_share,description:e.data.payload.description})})).catch((function(e){console.log("error",e),n.setState({save_click_loading:!1,edited:!1}),bt("error",0,"Network error")}))}else if("previous"===n.props.data.type){var t={appointment_id:n.props.appointment_id,procedure_id:n.props.data.id,fee:parseInt(n.state.charges_text_input.value),discount:parseInt(n.state.discount_text_input.value),dr_share:parseInt(n.state.dr_share_text_input.value),description:n.state.description_text_input.value};qe(t).then((function(e){console.log("success"),n.setState({save_click_loading:!1,edited:!1}),bt("success",0,e.data.message),n.props.save_opp(n.props.index,{id:n.props.data.id,fee:parseInt(n.state.charges_text_input.value),discount:parseInt(n.state.discount_text_input.value),dr_share:parseInt(n.state.dr_share_text_input.value),description:n.state.description_text_input.value})})).catch((function(e){console.log("error",e),n.setState({save_click_loading:!1,edited:!1}),bt("error",0,"Network error")}))}},n.on_delete_click=function(){var e;"new"!==n.props.data.type?(n.props.delete_opp(n.props.index),(e=n.props.data.id,D.a.delete(oe,{data:{procedure_id:e}})).then((function(e){n.setState({save_click_loading:!1,edited:!1}),bt("success",0,e.data.message)})).catch((function(e){console.log("error",e),n.setState({save_click_loading:!1,edited:!1}),bt("error",0,"Network error"+e.toString())}))):n.props.delete_opp(-1)},n.state={description_text_input:{value:n.props.data.procedure_description,error:!1},charges_text_input:{value:n.props.data.procedure_fee,error:!1},discount_text_input:{value:n.props.data.procedure_discount,error:!1},dr_share_text_input:{value:n.props.data.procedure_dr_share,error:!1},prev_description:n.props.data.procedure_description,prev_fee:n.props.data.procedure_fee,prev_discount:n.props.data.procedure_discount,prev_dr_share:n.props.data.procedure_dr_share,edited:!1,save_click_loading:!1},n}return Object(S.a)(a,[{key:"render",value:function(){var e=this;console.log("procedure item props",this.props);var t="btn btn-outline btn-sm bg-teal-400 border-teal-400 text-teal-400 secondary btn-icon mx-1 ".concat(this.state.save_click_loading?"p-0":""),a="btn btn-outline-dark btn-sm secondary btn-icon mx-1 ".concat(this.state.save_click_loading?"p-0":"");return l.a.createElement("tr",null,l.a.createElement("td",{className:"p-0",style:{width:"50%"}},l.a.createElement("input",{id:"description_text_input",placeholder:"Enter Reason",disabled:this.state.save_click_loading,input_type:"text",className:"form-control form-control-lg",onChange:function(t){return e.handle_change(t)},defaultValue:this.state.description_text_input.value,style:{border:0}})),l.a.createElement("td",{className:"p-0",style:{width:"10%"}},l.a.createElement("input",{id:"charges_text_input",placeholder:"Charges",input_type:"text",disabled:this.state.save_click_loading,className:"form-control form-control-lg",onChange:function(t){return e.handle_change(t)},defaultValue:this.state.charges_text_input.value,style:{border:0}})),l.a.createElement("td",{className:"p-0",style:{width:"10%"}},l.a.createElement("input",{id:"discount_text_input",placeholder:"Discount",disabled:this.state.save_click_loading,className:"form-control form-control-lg",onChange:function(t){return e.handle_change(t)},defaultValue:this.state.discount_text_input.value,style:{border:0}})),l.a.createElement("td",{className:"p-0",style:{width:"10%"}},l.a.createElement("input",{id:"dr_share_text_input",placeholder:"Dr Share %",disabled:this.state.save_click_loading,className:"form-control form-control-lg",onChange:function(t){return e.handle_change(t)},defaultValue:this.state.dr_share_text_input.value,style:{border:0}})),l.a.createElement("td",{className:"d-flex align-items-end justify-content-center border-0",style:{padding:"3px"}},l.a.createElement("button",{className:"btn btn-outline btn-sm bg-danger border-danger text-danger secondary btn-icon",onClick:this.on_delete_click},l.a.createElement("i",{className:"icon-cross",onClick:this.on_delete_click})),this.state.edited?l.a.createElement("button",{className:"new"===this.props.data.type?t:a,onClick:this.on_save_click},this.state.save_click_loading?l.a.createElement(Vt,{size:"30"}):l.a.createElement("i",{className:"icon-floppy-disk"})):""))}}]),a}(n.Component),yn=a(159),En=a.n(yn),Nn=a(160),wn=a.n(Nn);var kn=function(e){return l.a.createElement("div",null,l.a.createElement(nt.SkeletonTheme,{color:"#ffffff",highlightColor:"#f2f2f2"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(lt.a,{className:"my-2",count:3,height:40})),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(lt.a,{className:"my-2",count:3,height:40})),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(lt.a,{className:"my-2",count:3,height:40})))))},xn=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).save_procedure=function(e,t){var a=n.state.procedures_list;a[e].type="previous",a[e].procedure_fee=t.fee,a[e].procedure_discount=t.discount,a[e].procedure_dr_share=t.dr_share,a[e].procedure_description=t.description,a[e].id=t.id,n.setState({procedures_list:a},(function(){return n.handle_total_values()}))},n.delete_procedure=function(e){var t=n.state.procedures_list;-1===e?t.pop():t.splice(e,1),n.setState({procedures_list:[]},(function(){n.setState({procedures_list:t},(function(){return n.handle_total_values()}))}))},n.mount=function(e){Be(e).then((function(t){n.setState({procedures_list:t.data.payload,procedures_list_copy:at.a.cloneDeep(t.data.payload)}),Ae(e).then((function(t){var a=0===t.data.payload.paid_for_procedures?"":t.data.payload.paid_for_procedures.toString();n.setState({loading_status:!1,paid_text_input:{value:a,error:!1},paid_amount_copy:a},(function(){return n.handle_total_values()})),Re(e).then((function(e){return n.setState({user_data:e.data.payload,loading_status:!1})})).catch((function(e){bt("error",0,e.toString()),n.setState({loading_status:!1})}))})).catch((function(e){bt("error",0,e.toString()),n.setState({loading_status:!1})}))})).catch((function(e){n.setState({procedures_list:[],loading_status:!1}),e.response&&(401===e.response.status?bt("error",0,"Session timeout! Please Signin again"):bt("error",0,"Server is not responding! Please try again later"))}))},n.handle_change=function(e){var t=Object(oa.a)(n);n.setState(Object(Pt.a)({},e.target.id,{value:e.target.value,error:!1}),(function(){t.handle_total_values()}))},n.show_procedures=function(){return n.state.procedures_list.map((function(e,t){return console.log("item",e),l.a.createElement(vn,{key:t,appointment_id:n.props.appointment_id,data:e,index:t,save_opp:n.save_procedure,delete_opp:n.delete_procedure})}))},n.handle_close_modal=function(){for(var e=0;e<n.state.procedures_list.length;++e)if(null===n.state.procedures_list[e]._id)return void bt("info",0,"There are unsaved procedures. Either delete them or save them.");n.setState({procedures_list:[],consultancy_fee_text_input:{value:"",error:!1},discount_text_input:{value:"",error:!1},follow_up_text_input:{value:"",error:!1},paid_text_input:{value:"",error:!1},total:0,discount:0}),n.props.cancelProcedureModal()},n.handle_checkout_button_click=function(){if(parseInt(""===n.state.paid_text_input.value?0:n.state.paid_text_input.value)<n.state.minimum_payable)bt("error",0,"Payment is less that minimum payable amount.");else{var e=Object(oa.a)(n);Le(n.props.appointment_id).then((function(e){bt("info",0,e.data.message),n.props.clear_todays_appointments(),n.props.load_todays_appointments(localStorage.getItem("Gh65$p3a008#2C")),setTimeout((function(){n.handle_close_modal()}),1e3)})).catch((function(t){t.response?(t.response.status,e.props.notify("error","",t.response.data.message)):e.props.notify("error","",t.toString())}))}},n.scrollToBottom=function(){n.last_element.scrollIntoView({behavior:"smooth"})},n.calculate_balance=function(){return n.state.paid_text_input.value.length>0?-1*(n.state.total-parseInt(n.state.paid_text_input.value)):0},n.on_text_change=function(e){n.setState(Object(Pt.a)({},e.target.id,{value:e.target.value,error:!1}))},n.on_item_text_change=function(e,t){console.log("e",e.target.type,e.target.value);var a=n.state.procedures_list;a[t][e.target.id]="number"===e.target.type?""===e.target.value?0:parseInt(e.target.value):e.target.value,n.setState({procedures_list:a},(function(){n.handle_total_values(),n.compare_changes(t)}))},n.on_item_delete_click=function(e,t){if(n.state.procedures_list[t]._id&&""!==n.state.procedures_list[t]._id){var a=n.state.procedures_list;a[t].is_deleted=!a[t].is_deleted,n.setState({procedures_list:a,edited_items:a[t].is_deleted?[].concat(Object(fn.a)(n.state.edited_items),[t]):n.state.edited_items.filter((function(e){return e!==t}))},(function(){return n.handle_total_values()}))}else{var l=n.state.procedures_list;l.splice(t,1),n.setState({procedures_list:l},(function(){return n.handle_total_values()}))}},n.handle_total_values=function(){for(var e=0,t=0,a=0;a<n.state.procedures_list.length;++a)!n.state.procedures_list[a].is_deleted&&n.state.procedures_list[a].is_active&&(e+=n.state.procedures_list[a].fee,t+=n.state.procedures_list[a].discount);n.setState({total:e-t,minimum_payable:e-t,discount:t})},n.compare_changes=function(e){if(e<n.state.procedures_list_copy.length){var t=!1;n.state.procedures_list_copy[e].description!==n.state.procedures_list[e].description&&(t=!0),n.state.procedures_list_copy[e].fee!==n.state.procedures_list[e].fee&&(t=!0),n.state.procedures_list_copy[e].discount!==n.state.procedures_list[e].discount&&(t=!0),n.state.procedures_list_copy[e].dr_share!==n.state.procedures_list[e].dr_share&&(t=!0),n.state.procedures_list_copy[e].is_deleted!==n.state.procedures_list[e].is_deleted&&(t=!0),n.setState({edited_items:t?-1===n.state.edited_items.indexOf(e)?[].concat(Object(fn.a)(n.state.edited_items),[e]):n.state.edited_items:0===n.state.edited_items.length?[]:n.state.edited_items.filter((function(t){return t!==e}))})}},n.add_procedure_click=function(){var e={_id:null,description:"",fee:0,discount:0,dr_share:0,is_deleted:!1,is_active:!0,doctor_id:"",appointment_id:n.props.appointment_id,time_stamp:{created:new Date,operate:new Date,report:new Date,last_updated:new Date}};n.add_procedure(e)},n.on_save_changes_click=Object(je.a)(Ce.a.mark((function e(){var t,a,l,r;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=!1,a=0;a<n.state.procedures_list.length;++a)n.state.procedures_list[a].discount>n.state.procedures_list[a].fee?(bt("error",0,"Discount cannot be more than the charges in procedure number ".concat(a+1)),t=!0):n.state.procedures_list[a].dr_share>100&&(bt("error",0,"Doctor share cannot be more than 100%"),t=!0);if(!t){e.next=4;break}return e.abrupt("return");case 4:if(n.setState({loading_status:!0}),l=n.state.procedures_list.filter((function(e){return null===e._id})),r=(r=n.state.procedures_list.filter((function(e){return null!==e._id}))).filter((function(e,t){return n.state.edited_items.indexOf(t)>-1})),!(l.length>0)){e.next=11;break}return e.next=11,ze(l).then((function(e){bt("success",0,e.data.message)})).catch((function(e){e.response?(e.response.status,bt("error",0,e.response.data.message)):bt("error",0,e.toString())}));case 11:if(!(r.length>0)){e.next=14;break}return e.next=14,qe(r).then((function(e){bt("success",0,e.data.message),n.setState({edited_items:[]})})).catch((function(e){e.response?(e.response.status,bt("error",0,e.response.data.message)):bt("error",0,e.toString())}));case 14:n.mount(n.props.appointment_id);case 15:case"end":return e.stop()}}),e)}))),n.on_save_payment_click=function(){if(parseInt(n.state.paid_text_input.value)<n.state.total)bt("info",0,"Paid amount is insufficient");else{var e={appointment_id:n.props.appointment_id,procedures:n.state.total,paid_for_procedures:parseInt(n.state.paid_text_input.value)};Fe(e).then((function(e){bt("success",0,e.data.message)})).catch((function(e){bt("error",0,"Changes could not be saved! "+e.toString())}))}},n.state={consultancy_fee_text_input:{value:"",error:!1},discount_text_input:{value:"",error:!1},follow_up_text_input:{value:"",error:!1},paid_text_input:{value:"",error:!1},paid_amount_copy:0,total:0,discount:0,minimum_payable:0,procedures_list:[],procedures_list_copy:[],user_data:null,loading_status:!0,edited_items:[]},n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){this.handle_total_values()}},{key:"componentWillReceiveProps",value:function(e){e.visibility&&null!==e.appointment_id?this.mount(e.appointment_id):e.visibility&&null===e.appointment_id&&bt("error",0,"Something went wrong! Please try again later")}},{key:"add_procedure",value:function(e){var t=this;this.setState({procedures_list:[].concat(Object(fn.a)(this.state.procedures_list),[e])},(function(){t.scrollToBottom()}))}},{key:"render",value:function(){var e=this;console.log("edited items",this.state.edited_items),console.log("procedure modal",this.state.paid_amount_copy,parseInt(this.state.paid_text_input.value));return l.a.createElement(n.Fragment,null,l.a.createElement(Yt.a,{visible:this.props.visibility,onClickBackdrop:this.props.procedure_backDrop,fade:!0,dialogClassName:"modal-dialog modal-lg "},l.a.createElement("div",{className:"modal-header d-flex flex-lg-row flex-column bg-teal-400"},l.a.createElement("h5",{className:"modal-title"},"Procedures"),l.a.createElement("div",{className:""},l.a.createElement("button",{type:"button",className:"btn bg-dark btn-sm btn-labeled btn-labeled-right pr-5 mr-1",style:{textTransform:"inherit"},disabled:this.state.loading_status,onClick:this.add_procedure_click},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-plus3"})),"New Procedure"),l.a.createElement(En.a,{trigger:function(){return l.a.createElement("button",{type:"button",className:"btn bg-secondary btn-labeled btn-labeled-right btn-sm pr-5",style:{textTransform:"inherit"},disabled:e.state.loading_status},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-printer2"})),"Print")},content:function(){return e.componentRef}}))),l.a.createElement("div",{className:"modal-body pt-1 bg-light",style:{height:"60vh",overflowY:"auto",overflowX:"hidden"}},this.state.loading_status?l.a.createElement(kn,null):0===this.state.procedures_list.length?l.a.createElement("div",{className:"alert alert-info mt-2",style:{marginBottom:"0px"}},l.a.createElement("strong",null,"Info!")," No Procedures found."):l.a.createElement("div",{className:"table-responsive px-1"},l.a.createElement("table",{className:"table table-bordered w-100"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"border-0",style:{width:"50%"}},"Procedure reason"),l.a.createElement("th",{className:"border-0",style:{width:"12%"}},"Charges"),l.a.createElement("th",{className:"border-0",style:{width:"12%"}},"Discount"),l.a.createElement("th",{className:"border-0",style:{width:"12%"}},"Dr. Share"),l.a.createElement("th",{className:"border-0 text-center"},"Actions"))),l.a.createElement("tbody",null,this.state.procedures_list.map((function(t,a){return l.a.createElement(n.Fragment,null,l.a.createElement("tr",null,l.a.createElement("td",{className:"p-0",style:{borderLeft:t._id?"":"2px solid #26a69a"},colSpan:"5"},l.a.createElement("div",{className:"d-flex flex-lg-row flex-md-column flex-column justify-content-lg-between"},l.a.createElement("label",{className:"text-muted mb-0",style:{fontSize:"8px"}},"Created: ",Tt()(t.time_stamp.created).format("LLL")),l.a.createElement("label",{className:"text-muted mb-0",style:{fontSize:"8px"}},"Operate: ",Tt()(t.time_stamp.operate).format("LLL")),l.a.createElement("label",{className:"text-muted mb-0",style:{fontSize:"8px"}},"Report: ",Tt()(t.time_stamp.report).format("LLL")),l.a.createElement("label",{className:"text-muted mb-0",style:{fontSize:"8px"}},"Last updated: ",Tt()(t.time_stamp.last_updated).format("LLL"))))),l.a.createElement("tr",null,l.a.createElement("td",{className:"p-0",style:{width:"50%",borderLeft:t._id?"":"2px solid #26a69a"}},l.a.createElement("input",{id:"description",placeholder:"Enter Reason",type:"text",disabled:t.is_deleted||e.state.loading_status,className:"form-control form-control-sm",style:{border:0},defaultValue:t.description,onChange:function(t){return e.on_item_text_change(t,a)}})),l.a.createElement("td",{className:"p-0",style:{width:"12%"}},l.a.createElement("input",{id:"fee",placeholder:"Charges",type:"number",disabled:t.is_deleted||e.state.loading_status,className:"form-control form-control-sm",style:{border:0},defaultValue:0===t.fee?"":t.fee,onChange:function(t){return e.on_item_text_change(t,a)}})),l.a.createElement("td",{className:"p-0",style:{width:"12%"}},l.a.createElement("input",{id:"discount",placeholder:"Discount",type:"number",disabled:t.is_deleted||e.state.loading_status,className:"form-control form-control-sm",style:{border:0},defaultValue:0===t.discount?"":t.discount,onChange:function(t){return e.on_item_text_change(t,a)}})),l.a.createElement("td",{className:"p-0",style:{width:"12%"}},l.a.createElement("input",{id:"dr_share",placeholder:"Dr Share %",type:"number",disabled:t.is_deleted||e.state.loading_status,className:"form-control form-control-sm",style:{border:0},defaultValue:0===t.dr_share?"":t.dr_share,onChange:function(t){return e.on_item_text_change(t,a)}})),l.a.createElement("td",{className:"p-0"},t.is_deleted?l.a.createElement("button",{disabled:e.state.loading_status,className:"btn btn-outline btn-sm bg-teal-400 btn-block text-teal-400",onClick:function(t){return e.on_item_delete_click(t,a)}},"Undo"):l.a.createElement("button",{disabled:e.state.loading_status,className:"btn btn-outline btn-sm bg-danger btn-block text-danger",onClick:function(t){return e.on_item_delete_click(t,a)}},"Delete"))))}))))),l.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.last_element=t}})),l.a.createElement("div",{className:"modal-footer d-flex flex-lg-row flex-column border border-top pt-3"},l.a.createElement("div",{className:"mr-auto d-flex"},l.a.createElement("span",{className:"badge badge-light badge-striped badge-striped-left border-left-teal-400"},l.a.createElement("span",{className:"h6 font-weight-bold mr-1"},"Total: ",this.state.total)),l.a.createElement("span",{className:"ml-2 badge badge-light badge-striped badge-striped-left border-left-teal-400"},l.a.createElement("span",{className:"h6 font-weight-bold mr-1"},"Discount: ",this.state.discount)),l.a.createElement(ht,{id:"paid_text_input",icon_class:"icon-cash3",placeholder:"Amount paid",disabled:this.state.loading_status,value:this.state.paid_text_input.value,error:this.state.paid_text_input.error,onChange:this.on_text_change,className:"form-control-sm",parent_classes:"mb-1",type:"number"})),l.a.createElement("button",{type:"button",className:"btn bg-dark btn-labeled btn-sm btn-labeled-right pr-5",style:{textTransform:"inherit"},disabled:""===this.state.paid_text_input.value||this.state.total>parseInt(this.state.paid_text_input.value)||parseInt(this.state.paid_amount_copy)===parseInt(this.state.paid_text_input.value),onClick:this.on_save_payment_click},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-floppy-disk"})),"Save Payment"),l.a.createElement("button",{type:"button",className:"btn bg-dark btn-labeled btn-sm btn-labeled-right pr-5",style:{textTransform:"inherit"},disabled:0===this.state.procedures_list.length||this.state.procedures_list_copy.length===this.state.procedures_list.length&&0===this.state.edited_items.length,onClick:this.on_save_changes_click},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-floppy-disk"})),"Save Changes"),l.a.createElement("button",{type:"button",className:"btn bg-danger btn-labeled btn-sm btn-labeled-right pr-5",style:{textTransform:"inherit"},onClick:this.handle_close_modal},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-cross"})),"Cancel"))),l.a.createElement("div",{className:"d-none"},l.a.createElement("div",{className:"row px-3 py-5",ref:function(t){return e.componentRef=t}},l.a.createElement("div",{className:"col-12 row"},l.a.createElement("div",{className:"col-6"},l.a.createElement("img",{src:wn.a,className:"img-fluid",alt:"logo"})),l.a.createElement("div",{className:"col-6"},this.state.user_data?l.a.createElement("div",{className:"table-responsive card"},l.a.createElement("table",{className:"table table-hover mb-0"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1 font-weight-bold"},"MRN#"),l.a.createElement("td",{className:"py-1"},this.state.user_data.patient.mrn)),l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1 font-weight-bold"},"Patient"),l.a.createElement("td",{className:"py-1"},"".concat(Ft(this.state.user_data.patient.first_name)," ").concat(Ft(this.state.user_data.patient.last_name)))),l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1 font-weight-bold"},"Contact"),l.a.createElement("td",{className:"py-1"},"".concat(this.state.user_data.patient.phone_number))),l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1 font-weight-bold"},"Doctor"),l.a.createElement("td",{className:"py-1"},"".concat(Ft(this.state.user_data.doctor.first_name)," ").concat(Ft(this.state.user_data.doctor.last_name)))),l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1 font-weight-bold"},"Date"),l.a.createElement("td",{className:"py-1"},"".concat(Tt()(Rt(this.state.user_data.appointment_date),"YYYY-MM-DDThh:mm:ss").format("LLLL"))))))):l.a.createElement("span",null,"Cannot fetch user data"))),l.a.createElement("div",{className:"table-responsive px-1 row col-12 mt-2"},l.a.createElement("h2",{className:"font-weight-bold"},"Procedures"),l.a.createElement("table",{className:"table table-sm table-bordered table-hover mb-0"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"py-1"},l.a.createElement("b",null,"Description")),l.a.createElement("th",{className:"py-1"},l.a.createElement("b",null,"Discount")),l.a.createElement("th",{className:"py-1"},l.a.createElement("b",null,"Charges")))),l.a.createElement("tbody",null,this.state.procedures_list?this.state.procedures_list.map((function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",{className:"py-1"},e.description),l.a.createElement("td",{className:"py-1"},e.discount),l.a.createElement("td",{className:"py-1"},e.fee))})):"No procedure found",l.a.createElement("tr",null,l.a.createElement("td",{className:"font-weight-bold",colSpan:"2"},"Total"),l.a.createElement("td",{className:"font-weight-bold"},this.state.total)))),l.a.createElement("div",{className:"d-flex justify-content-between mt-2"},l.a.createElement("h2",{className:"font-weight-bold"},"Payment")),l.a.createElement("table",{className:"table table-sm table-bordered table-hover mb-0 mt-2"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Paid"),l.a.createElement("td",null,this.state.paid_text_input.value)),l.a.createElement("tr",null,l.a.createElement("td",null,"Balance"),l.a.createElement("td",null,parseInt(this.state.paid_text_input.value)-this.state.total)))),l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("span",{className:"text-muted"},"- Invoice date-time ",Tt()(new Date).format("LLL")))))))}}]),a}(n.Component),Sn=Object(i.b)(null,{update_appointment:$e,load_todays_appointments:Ke,clear_todays_appointments:We})(xn),Cn=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).get_total=function(){return null!==n.state.data?parseInt(n.state.data.appointment_charges.procedures)+parseInt(n.state.data.appointment_charges.consultancy)+parseInt(n.state.data.appointment_charges.follow_up)-parseInt(n.state.data.appointment_charges.discount):0},n.get_balance=function(){return null!==n.state.data?n.get_total()-parseInt(n.state.data.appointment_charges.paid)-parseInt(n.state.data.appointment_charges.paid_for_procedures):0},n.get_total_paid=function(){if(null!==n.state.data){var e=parseInt(n.state.data.appointment_charges.paid),t=parseInt(n.state.data.appointment_charges.paid_for_procedures);return console.log("charges",n.state.data.appointment_charges),e+t}return 0},n.state={data:null,loading:!0},n}return Object(S.a)(a,[{key:"componentWillReceiveProps",value:function(e,t){var a,n=this;!0===e.visibility?(console.log("fetching data"),(a=e.appointment_id,D.a.get("".concat(te,"?tag=").concat(a))).then((function(e){console.log("fetched",e.data),n.setState({data:e.data.payload,loading:!1})}))):this.setState({data:null})}},{key:"componentWillUnmount",value:function(){this.setState({data:null})}},{key:"render",value:function(){var e=this,t=l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-6"},l.a.createElement("img",{src:wn.a,className:"img-fluid",alt:"logo"})),this.state.data?l.a.createElement("div",{className:"col-lg-6"},l.a.createElement("div",{className:"table-responsive card"},l.a.createElement("table",{className:"table table-hover mb-0"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1"},l.a.createElement("span",{className:"font-weight-bold"},"MRN# ")),l.a.createElement("td",{className:"py-1"},l.a.createElement("span",{className:""},this.state.data.patient.mrn))),l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1"},l.a.createElement("span",{className:"font-weight-bold"},"Patient ")),l.a.createElement("td",{className:"py-1"},l.a.createElement("span",{className:""},"".concat(Ft(this.state.data.patient.first_name)," ").concat(Ft(this.state.data.patient.last_name))))),l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1"},l.a.createElement("span",{className:"font-weight-bold"},"Contact")),l.a.createElement("td",{className:"py-1"},l.a.createElement("span",{className:""},"".concat(this.state.data.patient.phone_number)))),l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1"},l.a.createElement("span",{className:"font-weight-bold"},"Doctor ")),l.a.createElement("td",{className:"py-1"},l.a.createElement("span",{className:""},"".concat(Ft(this.state.data.doctor.first_name)," ").concat(Ft(this.state.data.doctor.last_name))))),l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1"},l.a.createElement("span",{className:"font-weight-bold"},"Date ")),l.a.createElement("td",{className:"py-1"},l.a.createElement("span",{className:""},"".concat(Tt()(Rt(this.state.data.appointment_date),"YYYY-MM-DDThh:mm:ss").format("LLLL"))))))))):l.a.createElement(Vt,{size:150})),a=null!==this.state.data&&this.state.data.appointment_procedures.length>0?l.a.createElement("div",{className:"table-responsive card"},l.a.createElement("table",{className:"table table-hover mb-0"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"py-1"},l.a.createElement("b",null,"Description")),l.a.createElement("th",{className:"py-1"},l.a.createElement("b",null,"Charges")),l.a.createElement("th",{className:"py-1"},l.a.createElement("b",null,"Discount")))),l.a.createElement("tbody",null,this.state.data?this.state.data.appointment_procedures.map((function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",{className:"py-1"},e.description),l.a.createElement("td",{className:"py-1"},e.fee),l.a.createElement("td",{className:"py-1"},e.discount))})):"No procedure found"))):"",n=l.a.createElement("div",{className:"table-responsive card"},l.a.createElement("table",{className:"table table-hover mb-0"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1"},"Procedures total fee"),l.a.createElement("td",{className:"py-1"},this.state.data?this.state.data.appointment_charges.procedures:"")),l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1"},"Consultancy fee"),l.a.createElement("td",{className:"py-1"},this.state.data?this.state.data.appointment_charges.consultancy:"")),l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1"},"Follow up fee"),l.a.createElement("td",{className:"py-1"},this.state.data?this.state.data.appointment_charges.follow_up:"")),l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1"},"Discount on Appointment charges"),l.a.createElement("td",{className:"py-1"},this.state.data?this.state.data.appointment_charges.discount:"")),l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1 h4"},"Total"),l.a.createElement("td",{className:"py-1 h4"},this.get_total()))))),r=l.a.createElement("div",{className:"table-responsive card"},l.a.createElement("table",{className:"table table-hover mb-0"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1"},"Paid Amount"),l.a.createElement("td",{className:"py-1"},this.state.data?this.state.data.appointment_charges.paid:"")),l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1"},"Paid Amount for procedures"),l.a.createElement("td",{className:"py-1"},this.state.data?this.state.data.appointment_charges.paid_for_procedures:"")),l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1"},"Total paid Amount"),l.a.createElement("td",{className:"py-1"},this.get_total_paid())),l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1"},"Due Amount"),l.a.createElement("td",{className:"py-1"},this.state.data?this.get_balance():"")))));return l.a.createElement(Yt.a,{visible:this.props.visibility,onClickBackdrop:this.props.close_modal,fade:!0,dialogClassName:"modal-dialog modal-lg "},l.a.createElement("div",{className:"modal-body pb-0",ref:function(t){return e.componentRef=t}},l.a.createElement("div",{className:"container-fluid"},t,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},null!==this.state.data&&this.state.data.appointment_procedures.length>0?l.a.createElement("h4",{className:"font-weight-bold"},"Procedures"):"",a,l.a.createElement("h4",{className:"font-weight-bold"},"Appointment Charges"),n,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-6"}),l.a.createElement("div",{className:"col-lg-6"},r)))))),l.a.createElement("div",{className:"modal-footer"},l.a.createElement(En.a,{trigger:function(){return l.a.createElement("button",{type:"button",className:"btn bg-teal-400 btn-labeled btn-labeled-right btn-sm pr-5",style:{textTransform:"inherit"}},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-printer2"})),"Print")},content:function(){return e.componentRef}}),l.a.createElement("button",{type:"button",className:"btn bg-danger btn-labeled btn-labeled-right btn-sm pr-5",style:{textTransform:"inherit"},onClick:this.props.close_modal},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-cross"})),"Close")))}}]),a}(n.Component),jn=(a(485),function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).populate_patients=function(e){e.length>=1?n.render_users(e,"Patient"):n.setState({patients:[{id:"appointment_patient_selection",reference:n.props.payload.patient_ref.id,label:"".concat(n.props.payload.patient_ref.first_name," ").concat(n.props.payload.patient_ref.last_name," | ").concat(n.props.payload.patient_ref.phone_number)}]})},n.populate_doctors=function(e){e.length>=1?n.render_users(e,"Doctor"):n.setState({doctors:[{id:"appointment_doctor_selection",reference:n.props.payload.doctor_ref.id,label:"Dr. ".concat(Ft(n.props.payload.doctor_ref.first_name)," ").concat(Ft(n.props.payload.doctor_ref.last_name)," | ").concat(n.props.payload.doctor_ref.phone_number)}]})},n.on_selected_changed=function(e,t){if(null!==e)switch(e.id){case"appointment_patient_selection":var a={id:"appointment_patient_selection",reference:e.reference,label:e.label};n.setState({appointment_patient:{value:e.reference,error:!1},patient_select_value:a});break;case"appointment_doctor_selection":var l={id:"appointment_doctor_selection",reference:e.reference,label:e.label};n.setState({appointment_doctor:{value:e.reference,error:!1},doctor_select_value:l})}else switch(t){case"appointment_patient_selection":n.setState({appointment_patient:{value:"",error:!1},patient_select_value:""});break;case"appointment_doctor_selection":n.setState({appointment_doctor:{value:"",error:!1},doctor_select_value:""})}},n.on_text_field_change=function(e){switch(e.target.id){case"appointment_reason_text_input":n.setState({appointment_reason:{value:e.target.value,error:!1}});break;case"appointment_comments_text_input":n.setState({appointment_comments:{value:e.target.value,error:!1}});break;case"appointment_referee_text_input":n.setState({appointment_referee:{value:e.target.value,error:!1}})}},n.on_apointment_date_change=function(e){if(""===e)n.setState({appointment_date:{value:"",error:!1}});else{var t=null;try{t=e.format("ll")}catch(a){t=""}finally{n.setState({appointment_date:{value:t,error:!1}})}}},n.on_apointment_time_change=function(e){if(""===e)n.setState({appointment_time:{value:"",error:!1}});else{var t=null;try{t=e.format("LT")}catch(a){t=""}finally{n.setState({appointment_time:{value:t,error:!1}})}}},n.check_input=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=/^[A-Za-z]+$/,r=/^[0-9]+$/;return!(!t||""!==e)||(!(!a||""===e||e.match(l))||!(!n||""===e||e.match(r)))},n.on_submit=function(){n.setState({loading_status:!0});var e=!1;if(n.check_input(n.state.appointment_patient.value,!0)&&(n.setState({appointment_patient:{value:n.state.appointment_patient.value,error:!0}}),e=!0),n.check_input(n.state.appointment_doctor.value,!0)&&(n.setState({appointment_doctor:{value:n.state.appointment_doctor.value,error:!0}}),e=!0),n.check_input(n.state.appointment_comments.value,!1,!1,!1)&&(n.setState({appointment_reason:{value:n.state.appointment_comments.value,error:!0}}),e=!0),n.check_input(n.state.appointment_referee.value,!1,!1,!1)&&(n.setState({appointment_reason:{value:n.state.appointment_referee.value,error:!0}}),e=!0),n.check_input(n.state.appointment_date.value,!0)&&(n.setState({appointment_date:{value:n.state.appointment_date.value,error:!0}}),e=!0),n.check_input(n.state.appointment_time.value,!0)&&(n.setState({appointment_time:{value:n.state.appointment_time.value,error:!0}}),e=!0),!0===e)return bt("error",0,"Invalid inputs"),void n.setState({loading_status:!1});localStorage.setItem("h7vjys8yyd12",n.props.id),function(e){return D.a.put($,e)}({appointment_id:n.props.payload.visit_id,doctor_id:n.state.appointment_doctor.value,appointment_date:"".concat(Tt()(n.state.appointment_date.value).format("YYYY-MM-DD"),"T").concat(Tt()(n.state.appointment_time.value,["h:mm A"]).format("HH:mm:ss"),"Z"),appointment_time:n.state.appointment_time.value,appointment_comments:n.state.appointment_comments.value,appointment_referee:n.state.appointment_referee.value}).then((function(e){bt("success",0,e.data.message),n.setState({loading_status:!1}),n.props.clear_todays_appointments(),n.props.load_todays_appointments(localStorage.getItem("Gh65$p3a008#2C")),setTimeout((function(){return n.props.close()}),2e3)})).catch((function(e){console.log("res err",e),bt("error",0,"Network error ".concat(e.toString())),n.setState({loading_status:!1})}))},n.state={patients:[{id:"appointment_patient_selection",reference:n.props.payload.patient_ref.id,label:"".concat(Ft(n.props.payload.patient_ref.first_name)," ").concat(Ft(n.props.payload.patient_ref.last_name)," | ").concat(n.props.payload.patient_ref.phone_number," | ").concat(n.props.payload.patient_ref.email)}],doctors:[{id:"appointment_doctor_selection",reference:n.props.payload.doctor_ref.id,label:"Dr. ".concat(Ft(n.props.payload.doctor_ref.first_name)," ").concat(Ft(n.props.payload.doctor_ref.last_name)," | ").concat(n.props.payload.doctor_ref.phone_number," | ").concat(n.props.payload.doctor_ref.email)}],appointment_patient:{value:n.props.payload.patient_ref.id,error:!1},appointment_doctor:{value:n.props.payload.doctor_ref.id,error:!1},appointment_comments:{value:n.props.payload.comments,error:!1},appointment_referee:{value:n.props.payload.referee,error:!1},appointment_date:{value:Tt.a.utc(n.props.payload.date).format("ll"),error:!1},appointment_time:{value:n.props.payload.time,error:!1},patient_select_value:{id:"appointment_patient_selection",reference:n.props.payload.patient_ref.id,label:"".concat(Ft(n.props.payload.patient_ref.first_name)," ").concat(Ft(n.props.payload.patient_ref.last_name)," | ").concat(n.props.payload.patient_ref.phone_number," | ").concat(n.props.payload.patient_ref.email)},doctor_select_value:{id:"appointment_doctor_selection",reference:n.props.payload.doctor_ref.id,label:"Dr. ".concat(Ft(n.props.payload.doctor_ref.first_name)," ").concat(Ft(n.props.payload.doctor_ref.last_name)," | ").concat(n.props.payload.doctor_ref.phone_number," | ").concat(n.props.payload.doctor_ref.email)}},n}return Object(S.a)(a,[{key:"request",value:function(){var e=Object(je.a)(Ce.a.mark((function e(t,a){var n,l=arguments;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>2&&void 0!==l[2]?l[2]:"post",e.prev=1,"post"!==n){e.next=8;break}return e.next=5,Oe(a,t);case 5:return e.abrupt("return",e.sent);case 8:if("get"!==n){e.next=12;break}return e.next=11,De(a);case 11:return e.abrupt("return",e.sent);case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(1),bt("error",0,"Server is not responding! Please try again later"),e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render_users",value:function(){var e=Object(je.a)(Ce.a.mark((function e(t,a){var n,l,r,o,c;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(q,"?search=").concat(t,"&role=").concat(a),e.next=3,this.request({},n,"get");case 3:if(l=e.sent,r=[],"patient"===a?r.push({id:"appointment_patient_selection",reference:this.props.payload.patient_ref.id,label:"".concat(this.props.payload.patient_ref.first_name," ").concat(this.props.payload.patient_ref.last_name," | ").concat(this.props.payload.patient_ref.phone_number," | ").concat(this.props.payload.patient_ref.email)}):r.push({id:"appointment_doctor_selection",reference:this.props.payload.doctor_ref.id,label:"".concat(this.props.payload.doctor_ref.first_name," ").concat(this.props.payload.doctor_ref.last_name," | ").concat(this.props.payload.doctor_ref.phone_number," | ").concat(this.props.payload.doctor_ref.email)}),200===l.status){for(o=0;o<l.data.payload.count;++o)c=l.data.payload.users[o],r.push({id:"appointment_".concat(a.toLowerCase(),"_selection"),reference:c._id,label:"".concat(c.first_name," ").concat(c.last_name," | ").concat(c.phone_number," | ").concat(c.email)});"Patient"===a?this.setState({patients:r}):"Doctor"===a&&this.setState({doctors:r})}case 7:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=l.a.createElement("div",{className:"modal-body"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("pre",null,"Patient: ",l.a.createElement("span",{className:"h3"},Ft(this.props.payload.patient_ref.first_name)," ",Ft(this.props.payload.patient_ref.last_name))),l.a.createElement("div",{className:"form-group d-none"},l.a.createElement("label",null,"Patient ",l.a.createElement("span",{className:"text-danger"},"*")),l.a.createElement(mt.a,{id:"appointment_patient_selection",isClearable:!0,menuPlacement:"auto",isDisabled:!0,options:this.state.patients,classNamePrefix:"form-control",placeholder:"Select Patient",onInputChange:function(t){return e.populate_patients(t)},onChange:function(t){return e.on_selected_changed(t,"appointment_patient_selection")},value:this.state.patient_select_value,styles:{container:function(t){return Object(ut.a)(Object(ut.a)({},t),{},{backgroundColor:e.state.appointment_patient.error?"#FF0000":"",padding:1,borderRadius:5})}}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Doctor ",l.a.createElement("span",{className:"text-danger"},"*")),l.a.createElement(mt.a,{id:"appointment_doctor_selection",isClearable:!0,options:this.state.doctors,classNamePrefix:"form-control",placeholder:"Select a Doctor",menuPlacement:"auto",onInputChange:function(t){return e.populate_doctors(t)},onChange:function(t){return e.on_selected_changed(t,"appointment_doctor_selection")},value:this.state.doctor_select_value,styles:{container:function(t){return Object(ut.a)(Object(ut.a)({},t),{},{backgroundColor:e.state.appointment_doctor.error?"#FF0000":"",padding:1,borderRadius:5})}}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Reffered by"),l.a.createElement("input",{id:"appointment_referee_text_input",className:"form-control",placeholder:"Doctor name for reference",value:this.state.appointment_referee.value,onChange:function(t){return e.on_text_field_change(t)}}))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Comments (if any)"),l.a.createElement("textarea",{id:"appointment_comments_text_input",className:"form-control",placeholder:"Any special comments about the patient",rows:"4",value:this.state.appointment_comments.value,onChange:function(t){return e.on_text_field_change(t)}})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Date ",l.a.createElement("span",{className:"text-danger"},"*")),l.a.createElement(_t.a,{id:"dob_text_input",onChange:this.on_apointment_date_change,className:"clock_datatime_picker",inputProps:{placeholder:"Select Date",width:"100%",className:"form-control"},input:!0,dateFormat:"ll",timeFormat:!1,closeOnSelect:!0,value:this.state.appointment_date.value}))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Time ",l.a.createElement("span",{className:"text-danger"},"*")),l.a.createElement(_t.a,{id:"dob_text_input",onChange:this.on_apointment_time_change,className:"clock_datatime_picker",inputProps:{placeholder:"Select Time",width:"100%",className:"form-control"},input:!0,dateFormat:!1,timeFormat:!0,closeOnSelect:!0,strictParsing:!0,value:this.state.appointment_time.value})))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"})));return l.a.createElement(Yt.a,{visible:this.props.visibility,onClickBackdrop:function(){return e.props.close()},fade:!0,dialogClassName:"modal-dialog-centered modal-lg"},l.a.createElement("div",{className:"modal-header bg-teal-400"},l.a.createElement("h5",{className:"modal-title"},"Update Appointment")),this.state.loading_status?l.a.createElement(Vt,{size:150}):t,l.a.createElement("div",{className:"modal-footer"},l.a.createElement("button",{type:"button",className:"btn bg-teal-400 btn-labeled btn-labeled-right pr-5",style:{textTransform:"inherit"},onClick:this.on_submit},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-plus3"})),"Update"),l.a.createElement("button",{type:"button",className:"btn bg-danger btn-labeled btn-labeled-right pr-5",style:{textTransform:"inherit"},onClick:function(){return e.props.close()}},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-cross"})),"Cancel")))}}]),a}(n.Component)),On=Object(i.b)(null,{notify:bt,load_todays_appointments:Ke,clear_todays_appointments:We})(jn),Dn=(a(1093),function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var r;return Object(x.a)(this,a),(r=t.call(this,e)).toggle_row=function(){r.state.toggle?r.setState({toggle:!1,procedure_loading:!1,toggle_icon:"icon-eye-plus"}):r.setState({toggle:!0,procedure_loading:!0,toggle_icon:"icon-eye-minus"},(function(){Be(r.state.row_data._id).then((function(e){r.setState({procedures_list:e.data.payload,procedure_loading:!1})}))}))},r.view_user=function(e){r.props.toggle_user_view_modal(e)},r.handle_checkout=function(){Object(Gt.confirmAlert)({title:"Checkout confirmation",message:"Are you sure you want to checkout?",buttons:[{label:"Yes",onClick:function(){var e=Object(oa.a)(r);Le(r.state.row_data._id).then((function(e){bt("info",0,e.data.message),r.props.clear_todays_appointments(),r.props.load_todays_appointments(localStorage.getItem("Gh65$p3a008#2C"))})).catch((function(t){t.response?(t.response.status,e.props.notify("error","",t.response.data.message)):e.props.notify("error","",t.toString())}))}},{label:"No",onClick:function(){return console.log("Not checked out")}}]})},r.render_read_only_cols=function(){var e={consultancy_charges:l.a.createElement(on.a,{trigger:l.a.createElement("button",{className:"btn btn-outline btn-sm bg-teal-400 border-teal-400 text-teal-400 secondary btn-icon m-1",onClick:function(){return r.props.toggle_consultancy_modal(r.props.row_data._id)}},l.a.createElement("i",{className:"icon-vcard"})),content:l.a.createElement("div",{className:"card card-body bg-teal-400 text-white shadow mr-1 mt-3 py-1"},"Payment"),flowing:!0,position:"left center"}),procedures:l.a.createElement(on.a,{trigger:l.a.createElement("button",{className:"btn btn-outline btn-sm bg-teal-400 border-teal-400 text-teal-400 secondary btn-icon m-1",onClick:function(){return r.setState({procedure_modal_visibility:!0},(function(){return console.log("state",r.state)}))}},l.a.createElement("i",{className:"icon-add-to-list"})),content:l.a.createElement("div",{className:"card card-body bg-teal-400 text-white shadow py-1"},"Procedures"),flowing:!0,position:"top center"}),invoice:l.a.createElement(on.a,{trigger:l.a.createElement("button",{className:"btn btn-outline btn-sm bg-teal-400 border-teal-400 text-teal-400 btn-icon m-1",onClick:function(){return r.props.toggle_invoice_modal(r.props.row_data._id)}},l.a.createElement("i",{className:"icon-file-text2"})),content:l.a.createElement("div",{className:"card card-body bg-teal-400 text-white shadow py-1"},"Details"),flowing:!0,position:"top center"}),edit:l.a.createElement(on.a,{trigger:l.a.createElement("button",{className:"btn btn-outline btn-sm bg-teal-400 border-teal-400 text-teal-400 btn-icon m-1",onClick:function(){return r.setState({update_appointment_modal_visibility:!0})}},l.a.createElement("i",{className:"icon-pencil3"})),flowing:!0,content:l.a.createElement("div",{className:"card card-body bg-teal-400 text-white shadow py-1"},"Edit appointment"),position:"top center"}),follow_ups:l.a.createElement(on.a,{trigger:l.a.createElement("button",{className:"btn btn-outline btn-sm bg-teal-400 border-teal-400 text-teal-400 btn-icon m-1",onClick:function(){return alert("In progress")}},l.a.createElement("i",{className:"icon-loop"})),flowing:!0,content:l.a.createElement("div",{className:"card card-body bg-teal-400 text-white shadow py-1"},"Follow ups"),position:"top center"}),details:l.a.createElement(on.a,{trigger:l.a.createElement("button",{className:"btn btn-outline btn-sm bg-dark border-dark text-dark btn-icon m-1",onClick:r.toggle_row},l.a.createElement("i",{className:r.state.toggle_icon})),flowing:!0,content:l.a.createElement("div",{className:"card card-body bg-dark text-white shadow ml-1 mt-3 py-1"},"Show more details"),position:"right center"}),checkout:l.a.createElement(on.a,{trigger:l.a.createElement("button",{className:"btn btn-outline btn-sm bg-teal-400 border-teal-400 text-teal-400 btn-icon m-1 float-right",onClick:function(){return r.handle_checkout()}},l.a.createElement("i",{className:"icon-exit"})),flowing:!0,content:l.a.createElement("div",{className:"card card-body bg-teal-400 text-white shadow py-1 mt-3 mr-2"},"Checkout"),position:"left center"})};return l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-3 col-md-6 col-sm-6 mt-0 text-teal-400 border-left-2 border-left-teal-400 btn-block d-flex align-items-center justify-content-center text-center"},l.a.createElement("div",{className:"btn btn-outline bg-teal-400 text-teal-400 btn-block jackInTheBox animated",style:{verticalAlign:"center"},onClick:function(){return r.view_user(r.state.row_data.patient.id)}},l.a.createElement("span",{className:"img-fluid rounded-circle text-white bg-teal-400 h3 p-2"},r.state.row_data.patient.first_name.charAt(0).toUpperCase()+r.state.row_data.patient.last_name.charAt(0).toUpperCase()),l.a.createElement("h4",{className:"mt-2"},Ft(r.state.row_data.patient.first_name)+" "+Ft(r.state.row_data.patient.last_name)),l.a.createElement("span",null,l.a.createElement("i",{className:"icon-phone-wave mr-1"})," ",r.state.row_data.patient.phone_number))),l.a.createElement("div",{className:"col-lg-2 col-md-6 col-sm-6 mt-0 text-teal-400 border-left-2 border-bottom-sm-2 border-left-teal-400 border-right-teal-400 border-right-2 btn-block d-flex align-items-center justify-content-center text-center"},l.a.createElement("div",{className:" jackInTheBox animated"},l.a.createElement("h1",{className:"mb-0"},Tt()(r.state.row_data.appointment_date,"YYYY-MM-DDThh:mm:ss").format("hh:mm a")),l.a.createElement("p",null,r.state.appointment_time_difference_from_now))),l.a.createElement("div",{className:"col-lg-7 col-md-12 col-sm-12 mt-sm-2"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 font-weight-bold h6"},"Appointment with ",l.a.createElement(d.b,{className:"text-teal-400 font-weight-bold ml-1",to:"#",onClick:function(){return r.view_user(r.state.row_data.doctor.id)}},Ft(r.state.row_data.doctor.first_name)+" "+Ft(r.state.row_data.doctor.last_name),l.a.createElement("i",{className:"icon-user-tie ml-1"})),l.a.createElement("span",{className:"text-muted float-lg-right float-md-right float-left"},"".concat(Tt()(r.state.row_data.appointment_date,"YYYY-MM-DDThh:mm:ss").format("LL"))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 h6"},l.a.createElement("span",{className:"font-weight-bold"},"Comments"),l.a.createElement("span",{className:" h6 text-muted"}," ".concat(r.state.row_data.appointment_comments.length>25?r.state.row_data.appointment_comments.substring(0,25)+"...":r.state.row_data.appointment_comments)),l.a.createElement("span",{className:"badge badge-".concat("checked out"===r.state.row_data.appointment_status.info?"primary":"danger"," float-right")},r.state.row_data.appointment_status.info))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},r.state.row_data.appointment_status.is_paid?l.a.createElement(n.Fragment,null,e.invoice,e.follow_ups,e.details):l.a.createElement(n.Fragment,null,e.consultancy_charges,e.procedures,e.invoice,e.edit,e.follow_ups,e.details,e.checkout))))))},r.render_hidden_elements=function(){return l.a.createElement("div",{className:""},l.a.createElement("h5",null,"Comments"),l.a.createElement("blockquote",{className:"blockquote blockquote-bordered py-2 pl-3 mb-0"},l.a.createElement("p",{className:"mb-1"},r.state.hidden_data.appointment_comments)),l.a.createElement("h5",{className:"font-weight-semibold"},"Procedures"),l.a.createElement("blockquote",{className:"blockquote blockquote-bordered py-2 pl-3 mb-0"},r.state.procedure_loading?l.a.createElement(Vt,{size:100}):r.state.procedures_list.length>0?r.state.procedures_list.map((function(e,t){return l.a.createElement("div",{className:""},l.a.createElement("footer",{className:"blockquote-footer text-dark"},e.description.toUpperCase()))})):l.a.createElement("div",{className:"alert alert-info mt-2",style:{marginBottom:"0px"}},l.a.createElement("strong",null,"Info!")," No Procedures found.")))},r.render_hidden_header_elements=function(){return r.state.hidden_header_elements.map((function(e,t){return l.a.createElement(n.Fragment,{key:t},e)}))},r.close_update_appointment_modal=function(){r.setState({update_appointment_modal_visibility:!1})},r.open_update_appointment_modal=function(){r.setState({update_appointment_modal_visibility:!0})},r.call_back_update_appointment_modal=function(){},r.state={toggle:!1,toggle_icon:"icon-eye-plus",row_data:r.props.row_data,hidden_data:r.props.hidden_data,hidden_header_elements:r.props.hidden_header_elements,hidden_header_color:r.props.hidden_header_color,col_span:"",appointment_time_difference_from_now:Tt()(r.props.row_data.appointment_date,"YYYY-MM-DDThh:mm:ss").fromNow(),update_appointment_modal_visibility:!1,procedure_modal_visibility:!1,procedure_loading:!1,procedures_list:[]},r}return Object(S.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({col_span:this.props.columns}),setInterval((function(){e.setState({appointment_time_difference_from_now:Tt()(e.state.row_data.appointment_date,"YYYY-MM-DDThh:mm:ss").fromNow()})}),6e4)}},{key:"render",value:function(){var e=this;return l.a.createElement(n.Fragment,null,l.a.createElement("tr",null,l.a.createElement("td",{colSpan:this.state.col_span},this.render_read_only_cols())),l.a.createElement("tr",{className:""},l.a.createElement("td",{colSpan:"".concat(this.state.col_span+1),className:"".concat(this.state.toggle?"":"py-0")},l.a.createElement(ca.a,{isOpen:this.state.toggle},l.a.createElement("div",{className:"float-right"},l.a.createElement(d.b,{onClick:this.toggle_row,to:"#",className:"btn btn-sm btn-outline bg-teal-400 text-teal-400"},l.a.createElement("i",{className:"icon-cross3 icon-2x"}))),this.render_hidden_elements()),l.a.createElement(On,{id:this.state.row_data._id,visibility:this.state.update_appointment_modal_visibility,close:this.close_update_appointment_modal,call_back:this.call_back_update_appointment_modal,state:"update",payload:{visit_id:this.state.row_data._id,patient_ref:this.state.row_data.patient,doctor_ref:this.state.row_data.doctor,reason:this.state.row_data.appointment_description,date:this.state.row_data.appointment_date,time:this.state.row_data.appointment_time,comments:this.state.row_data.appointment_comments,referee:this.state.row_data.appointment_referee}}),this.state.procedure_modal_visibility&&l.a.createElement(un,{visibility:this.state.procedure_modal_visibility,handleClose:function(){return e.setState({procedure_modal_visibility:!1})},appointment_id:this.state.row_data._id}))))}}]),a}(n.Component)),Pn=Object(i.b)(null,{notify:bt,load_todays_appointments:Ke,clear_todays_appointments:We})(Dn),Mn=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).calculate_age=function(e){var t=new Date,a=new Date(e),n=t.getFullYear()-a.getFullYear(),l=t.getMonth()-a.getMonth();return(l<0||0===l&&t.getDate()<a.getDate())&&n--,n},n.state={data:n.props.data,size:n.props.size,text_size:"",icon_size:"",button_size:"",heading_size:""},n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){switch(this.state.size){case"large":this.setState({text_size:"h3",icon_size:"",button_size:"btn-lg",heading_size:"h1 font-weight-bold"})}}},{key:"render",value:function(){var e=this.state.data,t=e.first_name+" "+e.last_name,a=e.gender,n=e.date_of_birth,r=e.email,o=e.phone_number,c=this.state.icon_size,s=this.state.text_size;return l.a.createElement("div",{className:"media"},l.a.createElement("div",{className:"mr-3"},l.a.createElement("div",{className:"img-fluid rounded-circle text-white bg-teal-400 h3 d-flex justify-content-center align-items-center p-2",style:{height:"50px",width:"50px"}},e.first_name.charAt(0)+e.last_name.charAt(0))),l.a.createElement("div",{className:"media-body"},l.a.createElement("h5",{className:"mb-0 ".concat(this.state.heading_size)},t," ","Male"===a?l.a.createElement("span",{className:"badge badge-primary"},l.a.createElement("small",null,"Male")):l.a.createElement("span",{className:"badge bg-pink-400"},l.a.createElement("small",null,"Female"))),l.a.createElement("div",{className:"row mt-1"},l.a.createElement("div",{className:"col-md-6 col-sm-12"},l.a.createElement("span",{className:"".concat(s)},l.a.createElement("i",{className:"icon-person ".concat(c)})," ",this.calculate_age(n)," years old")),l.a.createElement("div",{className:"col-md-6 col-sm-12"},l.a.createElement("span",{className:"mt-1 ".concat(s)},l.a.createElement("i",{className:"icon-calendar3 mr-2 ".concat(c)})," ",Tt()(new Date(n).toString()).format("MMM Do YY")))),l.a.createElement("div",{className:"row mt-1"},l.a.createElement("div",{className:"col-md-6 col-sm-12"},l.a.createElement("span",{className:"mt-1 ".concat(s)},l.a.createElement("i",{className:"icon-phone-wave mr-2 ".concat(c)}),o)),l.a.createElement("div",{className:"col-md-6 col-sm-12"},l.a.createElement("span",{className:"mt-1 ".concat(s)},l.a.createElement("i",{className:"icon-envelop5 mr-2 ".concat(c)}),r)))))}}]),a}(n.Component);var In=function(e){function t(){e.on_click_back_drop()}return l.a.createElement("div",null,l.a.createElement(Yt.a,{visible:e.visibility,onClickBackdrop:function(){return t()},fade:!0,dialogClassName:"modal-dialog-centered modal-lg "},l.a.createElement("div",{className:"modal-body"},l.a.createElement("div",{className:"float-right"},l.a.createElement(d.b,{onClick:function(){return t()},to:"#",className:"btn btn-sm btn-outline bg-teal-400 text-teal-400"},l.a.createElement("i",{className:"icon-cross3 icon-2x"}))),null===e.modal_props?l.a.createElement(Vt,{size:150}):l.a.createElement(Mn,{data:e.modal_props,size:"large"})),l.a.createElement("div",{className:"modal-footer"})))},Tn=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).on_text_field_change=function(e){if("user_age"===e.target.id){var t=""===e.target.value?"":Tt()(Tt()().subtract(parseInt(e.target.value),"years").calendar()).format("ll");n.setState({user_age:{value:e.target.value,error:!1},user_dob:{value:t,error:!1}})}else n.setState(Object(Pt.a)({},e.target.id,{value:e.target.value,error:!1}))},n.on_selected_changed=function(e,t){null!==e?n.setState(Object(Pt.a)({},e.id,{value:e.label,error:!1})):n.setState(Object(Pt.a)({},t,{value:"",error:!1}))},n.on_user_date_of_birth_change=function(e){if(""===e)n.setState({user_dob:{value:"",error:!1}});else{var t=null,a=null;try{t=e.format("ll"),a=(a=e.fromNow()).includes("years")?(a=a.split(" "))[0]:"0"}catch(l){t="",a=""}finally{n.setState({user_dob:{value:t,error:!1},user_age:{value:a,error:!1}})}}},n.check_input=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=/^[A-Za-z]+$/,r=/^[0-9]+$/;return!(!t||""!==e)||(!(!a||""===e||e.match(l))||!(!n||""===e||e.match(r)))},n.check_hard_constraints=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;if(!e.includes(t))return!0;switch(a){case"eq":if(e.length!==n)return!0;break;case"min":if(e.length<n)return!0;break;case"max":if(e.length>n)return!0}return!1},n.on_submit=function(e){e.preventDefault(),n.setState({loading_status:!0});var t={admin_id:n.props.active_user._id,patient:{first_name:n.state.user_first_name.value.trim(),last_name:n.state.user_last_name.value.trim(),phone_number:n.state.user_phone_number.value.trim(),date_of_birth:n.state.user_dob.value,cnic:n.state.user_cnic.value.trim(),email:n.state.user_email.value.trim(),country:n.state.user_country.value,city:n.state.user_city.value,address:n.state.user_address.value.trim(),gender:n.state.user_gender.value.trim(),blood_group:n.state.user_blood_group.value.trim(),role:n.state.user_role.value.trim()}};D.a.post(V,t).then((function(e){bt("success",0,e.data.message),n.setState({loading_status:!1},(function(){n.close_modal()}))})).catch((function(e){n.setState({loading_status:!1}),e.response?400===e.response.status?bt("error",0,e.response.data.error.message):422===e.response.status&&bt("error",0,e.response.data.error[0]):e.request?console.log("request error",e):console.log("error",e)}))},n.close_modal=function(){n.props.close(),n.props.call_back()},n.state={loading_status:!1,user_first_name:{value:"",error:!1},user_last_name:{value:"",error:!1},user_phone_number:{value:"",error:!1},user_dob:{value:"",error:!1},user_age:{value:"",error:!1},user_cnic:{value:"",error:!1},user_email:{value:"",error:!1},user_country:{value:"Pakistan",error:!1},user_city:{value:"Lahore",error:!1},user_address:{value:"",error:!1},user_gender:{value:"Male",error:!1},user_blood_group:{value:"Unknown",error:!1},user_role:{value:"Patient",error:!1}},n}return Object(S.a)(a,[{key:"render",value:function(){var e=this,t=l.a.createElement("div",{className:"modal-body"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4 px-3"},l.a.createElement("div",{className:"form-group"},l.a.createElement(ht,{id:"user_first_name",heading:"First name",placeholder:"Enter first name",required:!0,onChange:this.on_text_field_change,value:this.state.user_first_name.value}))),l.a.createElement("div",{className:"col-md-4 px-3"},l.a.createElement("div",{className:"form-group"},l.a.createElement(ht,{id:"user_last_name",heading:"Last name",placeholder:"Enter last name",required:!0,onChange:this.on_text_field_change,value:this.state.user_last_name.value,error:this.state.user_last_name.error}))),l.a.createElement("div",{className:"col-md-4 px-3"},l.a.createElement("div",{className:"form-group"},l.a.createElement(ht,{id:"user_phone_number",heading:"Phone number",placeholder:"Enter phone number",required:!0,maxLength:"13",onChange:this.on_text_field_change,value:this.state.user_phone_number.value,error:this.state.user_phone_number.error})))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3 px-3"},l.a.createElement("div",{className:"form-group"},l.a.createElement(ht,{id:"user_age",heading:"Age",icon_class:"icon-vcard",type:"number",required:!0,maxLength:"2",placeholder:"Enter Age",onChange:this.on_text_field_change,value:this.state.user_age.value,error:this.state.user_age.error}))),l.a.createElement("div",{className:"col-md-3 px-3"},l.a.createElement("div",{className:"form-group"},l.a.createElement(ht,{id:"user_dob",heading:"Date of birth",icon_class:"icon-calendar3",placeholder:"Enter Date of birth",type:"text",field_type:"date-time",date_format:"ll",time_format:!1,onChange:this.on_user_date_of_birth_change,value:this.state.user_dob.value,error:this.state.user_dob.error}))),l.a.createElement("div",{className:"col-md-3 px-3"},l.a.createElement("div",{className:"form-group"},l.a.createElement(ht,{id:"user_cnic",heading:"CNIC",icon_class:"icon-vcard",type:"number",maxLength:"13",placeholder:"Enter CNIC",onChange:this.on_text_field_change,value:this.state.user_cnic.value,error:this.state.user_cnic.error}))),l.a.createElement("div",{className:"col-md-3 px-3"},l.a.createElement("div",{className:"form-group"},l.a.createElement(ht,{id:"user_email",heading:"Enter email",icon_class:"icon-envelop",type:"email",placeholder:"Enter email",onChange:this.on_text_field_change,value:this.state.user_email.value,error:this.state.user_email.error})))),l.a.createElement("hr",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement(ht,{heading:"Country",field_type:"select",required:!0,isClearable:!0,menuPlacement:"auto",options:xt,classNamePrefix:"form-control",placeholder:"Select Country",id:"country_selection",isDisabled:!0,onChange:function(t){return e.on_selected_changed(t,"country_selection")},value:{id:"country_selection",label:this.state.user_country.value},defaultValue:{id:"country_selection",label:"Pakistan"},styles:{container:function(t){return Object(ut.a)(Object(ut.a)({},t),{},{backgroundColor:e.state.user_country.error?"#FF0000":"",padding:1,borderRadius:5})}}})),l.a.createElement("div",{className:"col-md-6"},l.a.createElement(ht,{heading:"City",field_type:"select",required:!0,isClearable:!0,menuPlacement:"auto",options:kt,classNamePrefix:"form-control",placeholder:"Select City",id:"city_selection",onChange:function(t){return e.on_selected_changed(t,"city_selection")},value:{id:"city_selection",label:this.state.user_city.value},defaultValue:{id:"city_selection",label:"Lahore"},styles:{container:function(t){return Object(ut.a)(Object(ut.a)({},t),{},{backgroundColor:e.state.user_city.error?"#FF0000":"",padding:1,borderRadius:5})}}}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement(ht,{heading:"Address/Area",className:"form-control form-control-lg",id:"user_address",value:this.state.user_address.value,error:this.state.user_address.error,onChange:function(t){return e.on_text_field_change(t)},placeholder:"Enter address / area you live in the city"})))),l.a.createElement("div",{className:"col-md-4 border-left"},l.a.createElement(ht,{heading:"Gender",field_type:"select",required:!0,isClearable:!0,menuPlacement:"auto",options:Et,classNamePrefix:"form-control",placeholder:"Select Gender",id:"gender_selection",onChange:function(t){return e.on_selected_changed(t,"gender_selection")},defaultValue:{id:"gender_selection",label:"Male"},styles:{container:function(t){return Object(ut.a)(Object(ut.a)({},t),{},{backgroundColor:e.state.user_gender.error?"#FF0000":"",padding:1,borderRadius:5})}}}),l.a.createElement(ht,{heading:"Blood group",field_type:"select",required:!0,isClearable:!0,menuPlacement:"auto",options:yt,className:"Select-option",classNamePrefix:"form-control",placeholder:"Select blood group",id:"blood_group_selection",onChange:function(t){return e.on_selected_changed(t,"blood_group_selection")},defaultValue:{id:"blood_group_selection",label:"Unknown"},styles:{container:function(t){return Object(ut.a)(Object(ut.a)({},t),{},{backgroundColor:e.state.user_gender.error?"#FF0000":"",padding:1,borderRadius:5})}}}))));return l.a.createElement(Yt.a,{visible:this.props.visibility,onClickBackdrop:this.close_modal,fade:!0,dialogClassName:"modal-dialog-centered modal-lg"},l.a.createElement("form",{onSubmit:this.on_submit},l.a.createElement("div",{className:"modal-header bg-teal-400"},l.a.createElement("h5",{className:"modal-title"},"New Patient")),this.state.loading_status?l.a.createElement(Vt,null):t,l.a.createElement("div",{className:"modal-footer"},l.a.createElement("span",{className:"float-left"},l.a.createElement("span",{className:"text-danger"},"*")," Are required fields"),l.a.createElement("button",{className:"btn bg-teal-400 btn-labeled btn-labeled-right pr-5",style:{textTransform:"inherit"},type:"submit",disabled:this.state.loading_status},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-plus3"})),"Add"),l.a.createElement("button",{type:"button",className:"btn bg-danger btn-labeled btn-labeled-right pr-5",style:{textTransform:"inherit"},onClick:this.close_modal},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-cross"})),"Cancel"))))}}]),a}(n.Component),Ln=(a(1094),function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).populate_patients=function(e){e.length>=1?n.render_users(e,"Patient"):n.setState({patients:[]})},n.populate_doctors=function(e){e.length>=1?n.render_users(e,"Doctor"):n.setState({doctors:[]})},n.on_selected_changed=function(e,t){if(null!==e)switch(e.id){case"appointment_patient_selection":var a={id:"appointment_patient_selection",reference:e.reference,label:e.label};n.setState({appointment_patient:{value:e.reference,error:!1},patient_select_value:a});break;case"appointment_doctor_selection":var l={id:"appointment_doctor_selection",reference:e.reference,label:e.label};n.setState({appointment_doctor:{value:e.reference,error:!1},doctor_select_value:l});break;case"hour_selection":console.log("e",e),n.setState({hours:{value:e.label,error:!1}});break;case"min_selection":n.setState({mins:{value:e.label,error:!1}})}else switch(t){case"appointment_patient_selection":n.setState({appointment_patient:{value:"",error:!1},patient_select_value:""});break;case"appointment_doctor_selection":n.setState({appointment_doctor:{value:"",error:!1},doctor_select_value:""});break;case"hour_selection":n.setState({hours:{value:"12",error:!1}});break;case"min_selection":n.setState({mins:{value:"00",error:!1}})}},n.on_text_field_change=function(e){switch(e.target.id){case"appointment_referee_text_input":n.setState({appointment_referee:{value:e.target.value,error:!1}});break;case"appointment_comments_text_input":n.setState({appointment_comments:{value:e.target.value,error:!1}})}},n.on_apointment_date_change=function(e){if(""===e)n.setState({appointment_date:{value:"",error:!1}});else{var t=null;try{t=e.format("ll")}catch(a){t=""}finally{n.setState({appointment_date:{value:t,error:!1}})}}},n.on_apointment_time_change=function(e){console.log("time",Tt()(e).format("LT")),n.setState({appointment_time:{value:Tt()(e).format("LT")}})},n.check_input=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=/^[A-Za-z]+$/,r=/^[0-9]+$/;return!(!t||""!==e)||(!(!a||e.match(l))||!(!n||e.match(r)))},n.on_submit=function(){n.setState({loading_status:!0});var e=!1;if(n.check_input(n.state.appointment_patient.value,!0)&&(n.setState({appointment_patient:{value:n.state.appointment_patient.value,error:!0}}),e=!0),n.check_input(n.state.appointment_doctor.value,!0)&&(n.setState({appointment_doctor:{value:n.state.appointment_doctor.value,error:!0}}),e=!0),n.check_input(n.state.appointment_date.value,!0)&&(n.setState({appointment_date:{value:n.state.appointment_date.value,error:!0}}),e=!0),n.check_input(n.state.hours.value,!0,!1,!0)&&(n.setState({hours:{value:n.state.hours.value,error:!0}}),e=!0),n.check_input(n.state.mins.value,!0,!1,!0)&&(n.setState({mins:{value:n.state.mins.value,error:!0}}),e=!0),!0===e)return bt("error",0,"Invalid inputs"),void n.setState({loading_status:!1});(function(e){return D.a.post(W,e)})({patient:n.state.appointment_patient.value,doctor:n.state.appointment_doctor.value,date:"".concat(Tt()(n.state.appointment_date.value).format("YYYY-MM-DD"),"T").concat(Tt()(n.state.appointment_time.value,["h:mm A"]).format("HH:mm:ss"),"Z"),time:"".concat(Tt()(n.state.appointment_time.value,["h:mm A"]).format("HH:mm:ss"),"Z"),description:"",comments:n.state.appointment_comments.value,referee:n.state.appointment_referee.value}).then((function(e){bt("success",0,e.data.message),n.setState({appointment_patient:{value:"",error:!1},appointment_doctor:{value:"",error:!1},appointment_date:{value:Tt()().format("ll"),error:!1},appointment_time:{value:Tt()().format("LT"),error:!1},appointment_comments:{value:"",error:!1},appointment_referee:{value:"",error:!1},patient_select_value:"",doctor_select_value:"",loading_status:!1}),n.props.clear_todays_appointments(),n.props.load_todays_appointments(localStorage.getItem("Gh65$p3a008#2C")),n.props.close()})).catch((function(e){e?(e.response?bt("error",0,e.response.message):bt("error",0,"Server not responding "+e.toString()),n.setState({loading_status:!1})):(bt("error",0,"Network error"+e.toString()),n.setState({loading_status:!1}))}))},n.open_new_patient_modal=function(){n.props.close(),n.setState({new_patient_modal_visibility:!0})},n.close_new_patient_modal=function(){n.setState({new_patient_modal_visibility:!1})},n.call_back_new_patient_modal=function(){},n.state={loading_status:!1,patients:[],doctors:[],appointment_patient:{value:"",error:!1},appointment_doctor:{value:"",error:!1},appointment_referee:{value:"",error:!1},appointment_comments:{value:"",error:!1},appointment_date:{value:Tt()().format("ll"),error:!1},appointment_time:{value:Tt()().format("LT"),error:!1},new_patient_modal_visibility:!1,patient_select_value:"",doctor_select_value:"",hours:{value:"12",error:!1},mins:{value:"00",error:!1},time_period:{value:"AM",error:!1}},n}return Object(S.a)(a,[{key:"request",value:function(){var e=Object(je.a)(Ce.a.mark((function e(t,a){var n,l=arguments;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>2&&void 0!==l[2]?l[2]:"post",e.prev=1,"post"!==n){e.next=8;break}return e.next=5,Oe(a,t);case 5:return e.abrupt("return",e.sent);case 8:if("get"!==n){e.next=12;break}return e.next=11,De(a);case 11:return e.abrupt("return",e.sent);case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(1),bt("error",0,"Server is not responding! Please try again later"),e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render_users",value:function(){var e=Object(je.a)(Ce.a.mark((function e(t,a){var n,l,r,o,c,s;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(q,"?search=").concat(t,"&role=").concat(a,"&active=true"),e.next=4,this.request({},n,"get");case 4:for(l=e.sent,r=[],o=0;o<l.data.payload.count;++o)"Patient"===a?(c=l.data.payload.users[o],r.push({id:"appointment_".concat(a.toLowerCase(),"_selection"),reference:c._id,label:"".concat(c.first_name," ").concat(c.last_name," | ").concat(c.phone_number," | ").concat(c.email)})):"Doctor"===a&&(s=l.data.payload.users[o],r.push({id:"appointment_".concat(a.toLowerCase(),"_selection"),reference:s.doctor._id,label:"".concat(s.doctor.first_name," ").concat(s.doctor.last_name," | ").concat(s.doctor.phone_number," | ").concat(s.doctor.email)}),console.log(s.doctor));"Patient"===a?this.setState({patients:r}):"Doctor"===a&&this.setState({doctors:r}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("error",e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return l.a.createElement(n.Fragment,null,l.a.createElement(Tn,{visibility:this.state.new_patient_modal_visibility,close:this.close_new_patient_modal,call_back:this.props.bind_function}),l.a.createElement(Yt.a,{visible:this.props.visibility,onClickBackdrop:this.props.close,fade:!0,dialogClassName:"modal-dialog-centered modal-lg"},l.a.createElement("div",{className:"modal-header bg-teal-400"},l.a.createElement("h5",{className:"modal-title"},"New Appointment"),l.a.createElement("div",{className:"w-25"},l.a.createElement(_t.a,{id:"dob_text_input",onChange:this.on_apointment_date_change,className:"clock_datatime_picker text-teal-400",inputProps:{placeholder:"Select Date",width:"100%",className:"form-control ".concat(this.state.appointment_date.error?"border-danger":""),disabled:this.state.loading_status},input:!0,dateFormat:"ll",timeFormat:!1,closeOnSelect:!0,value:this.state.appointment_date.value}))),l.a.createElement("div",{className:"modal-body"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-10"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"font-weight-semibold"},"Select or add user",l.a.createElement("span",{className:"text-danger"}," * ")),l.a.createElement(mt.a,{id:"appointment_patient_selection",isClearable:!0,menuPlacement:"auto",options:this.state.patients,classNamePrefix:"form-control",placeholder:"Select Patient",onInputChange:function(t){return e.populate_patients(t)},onChange:function(t){return e.on_selected_changed(t,"appointment_patient_selection")},value:this.state.patient_select_value,isDisabled:this.state.loading_status,styles:{container:function(t){return Object(ut.a)(Object(ut.a)({},t),{},{backgroundColor:e.state.appointment_patient.error?"#FF0000":"",padding:1,borderRadius:5})}}}))),l.a.createElement("div",{className:"col-md-2 d-flex align-items-end mb-3 "},l.a.createElement(on.a,{trigger:l.a.createElement("button",{disabled:this.state.loading_status,className:"btn btn-outline btn-lg bg-secondary btn-block border-secondary text-dark btn-icon",onClick:this.open_new_patient_modal},l.a.createElement("i",{className:"icon-plus3"})),flowing:!0,content:l.a.createElement("div",{className:"card card-body bg-dark text-white shadow ml-1 py-1 mt-4"},"Add new Patient"),position:"top center",style:{zIndex:15e3}}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"font-weight-semibold"},"Which doctor to assign",l.a.createElement("span",{className:"text-danger"}," * ")),l.a.createElement(mt.a,{id:"appointment_doctor_selection",isClearable:!0,options:this.state.doctors,classNamePrefix:"form-control",placeholder:"Select a Doctor",menuPlacement:"auto",onInputChange:function(t){return e.populate_doctors(t)},onChange:function(t){return e.on_selected_changed(t,"appointment_doctor_selection")},value:this.state.doctor_select_value,isDisabled:this.state.loading_status,styles:{container:function(t){return Object(ut.a)(Object(ut.a)({},t),{},{backgroundColor:e.state.appointment_doctor.error?"#FF0000":"",padding:1,borderRadius:5})}}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"font-weight-semibold"},"Refered by"),l.a.createElement("input",{id:"appointment_referee_text_input",className:"form-control",value:this.state.appointment_referee.value,onChange:function(t){return e.on_text_field_change(t)},placeholder:"Reference of any doctor if any",disabled:this.state.loading_status})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Additional comments"),l.a.createElement("textarea",{rows:3,cols:3,id:"appointment_comments_text_input",className:"form-control",placeholder:"Comments for the appointment",onChange:function(t){return e.on_text_field_change(t)},value:this.state.appointment_comments.value,disabled:this.state.loading_status}))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"mt-1 d-flex justify-content-center"},l.a.createElement(sn.a,{time:this.state.appointment_time.value,onChange:function(t){return e.on_apointment_time_change(t)},coarseMinutes:5,forceCoarseMinutes:!0}))))),l.a.createElement("div",{className:"modal-footer"},l.a.createElement(mt.a,{isClearable:!0,menuPlacement:"auto",options:[],classNamePrefix:"form-control",placeholder:"Select Branch",id:"branch_selection",isDisabled:!0,value:{id:"branch_selection",label:"Ghazi chowk"},styles:{container:function(e){return Object(ut.a)(Object(ut.a)({},e),{},{backgroundColor:"",padding:0,borderRadius:5,width:"200px"})}}}),l.a.createElement("button",{type:"button",className:"btn bg-teal-400 btn-labeled btn-labeled-right pr-5",style:{textTransform:"inherit"},disabled:this.state.loading_status,onClick:this.on_submit},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-plus3"})),"Create"),l.a.createElement("button",{type:"button",className:"btn bg-danger btn-labeled btn-labeled-right pr-5",style:{textTransform:"inherit"},onClick:this.props.close},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-cross"})),"Cancel"))))}}]),a}(n.Component));var An=Object(i.b)((function(e){return{notify:e.notify,todays_patient:e.todays_patient}}),{notify:bt,load_todays_appointments:Ke,clear_todays_appointments:We})(Ln),Fn=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).handle_total_values=function(){n.setState({total:parseInt(""===n.state.consultancy_fee_text_input.value?0:n.state.consultancy_fee_text_input.value)+parseInt(""===n.state.follow_up_text_input.value?0:n.state.follow_up_text_input.value)-parseInt(""===n.state.discount_text_input.value?0:n.state.discount_text_input.value)},(function(){""!==n.state.paid_text_input.value?n.setState({balance:n.state.total-parseInt(n.state.paid_text_input.value)}):n.setState({balance:0})}))},n.on_text_change=function(e){n.setState(Object(Pt.a)({},e.target.id,{value:e.target.value,error:!1}),(function(){return n.handle_total_values()}))},n.handle_save_button_click=function(e){e.preventDefault(),n.setState({loading:!0});var t={appointment_id:n.props.appointment_id,consultancy:parseInt(""===n.state.consultancy_fee_text_input.value?0:n.state.consultancy_fee_text_input.value),discount:parseInt(""===n.state.discount_text_input.value?0:n.state.discount_text_input.value),follow_up:parseInt(""===n.state.follow_up_text_input.value?0:n.state.follow_up_text_input.value),paid:parseInt(""===n.state.paid_text_input.value?0:n.state.paid_text_input.value)};Fe(t).then((function(e){bt("success",0,e.data.message),n.setState({loading:!1},(function(){setTimeout((function(){return n.props.toggle_modal()}),1e3)}))})).catch((function(e){bt("error",0,"Changes could not be saved! "+e.toString()),n.setState({loading:!1})}))},n.handle_checkout_button_click=function(){if(parseInt(""===n.state.paid_text_input.value?0:n.state.paid_text_input.value)<n.state.minimum_payable)bt("error",0,"Payment is less that minimum payable amount.");else{var e=Object(oa.a)(n);Le(n.props.appointment_id).then((function(e){bt("info",0,e.data.message),n.props.clear_todays_appointments(),n.props.load_todays_appointments(localStorage.getItem("Gh65$p3a008#2C"))})).catch((function(t){t.response?(t.response.status,e.props.notify("error","",t.response.data.message)):e.props.notify("error","",t.toString())}))}},n.state={consultancy_fee_text_input:{value:"1500",error:!1},discount_text_input:{value:"",error:!1},follow_up_text_input:{value:"",error:!1},paid_text_input:{value:"",error:!1},total:0,balance:0,procedure_charges:0,loading:!1,data:null},n}return Object(S.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.visibility&&null!==e.appointment_id?(this.setState({loading:!0}),Ae(e.appointment_id).then((function(e){t.setState({consultancy_fee_text_input:{value:0===e.data.payload.consultancy?"":e.data.payload.consultancy.toString(),error:!1},discount_text_input:{value:0===e.data.payload.discount?"":e.data.payload.discount.toString(),error:!1},follow_up_text_input:{value:0===e.data.payload.follow_up?"":e.data.payload.follow_up.toString(),error:!1},paid_text_input:{value:0===e.data.payload.paid?"":e.data.payload.paid.toString(),error:!1},procedure_charges:e.data.payload.procedures},(function(){t.handle_total_values(),Re(t.props.appointment_id).then((function(e){return t.setState({data:e.data.payload,loading:!1})})).catch((function(e){return t.setState({loading:!1})}))}))})).catch((function(e){bt("error",0,e.toString())}))):e.visibility&&null===e.appointment_id||this.setState({consultancy_fee_text_input:{value:"",error:!1},discount_text_input:{value:"",error:!1},follow_up_text_input:{value:"",error:!1},paid_text_input:{value:"",error:!1}})}},{key:"render",value:function(){var e=this;return l.a.createElement(Yt.a,{visible:this.props.visibility,onClickBackdrop:this.props.toggle_modal},l.a.createElement("div",{className:"modal-header bg-teal-400"},l.a.createElement("h5",null,"Payment"),l.a.createElement(En.a,{trigger:function(){return l.a.createElement("button",{type:"button",className:"btn bg-secondary btn-labeled btn-labeled-right btn-sm pr-5",style:{textTransform:"inherit"},disabled:e.state.loading},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-printer2"})),"Print")},content:function(){return e.componentRef},onBeforeGetContent:this.gather_invoice_data})),l.a.createElement("div",{className:"modal-body bg-light"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-6 col-md-6"},l.a.createElement(ht,{id:"consultancy_fee_text_input",heading:"Consultancy Fee",icon_class:"icon-cash3",placeholder:"Fee",disabled:!1,value:this.state.consultancy_fee_text_input.value,error:this.state.consultancy_fee_text_input.error,onChange:this.on_text_change,className:"form-control-sm",parent_classes:"mb-1",type:"number",loading:this.state.loading}),l.a.createElement(ht,{id:"discount_text_input",heading:"Discount over total",placeholder:"Discount",value:this.state.discount_text_input.value,error:this.state.discount_text_input.error,onChange:this.on_text_change,className:"form-control-sm",parent_classes:"mb-1",type:"number",loading:this.state.loading}),l.a.createElement(ht,{id:"follow_up_text_input",heading:"Follow ups Fee",placeholder:"Follow ups Fee",custom_classes:"",disabled:!1,value:this.state.follow_up_text_input.value,error:this.state.follow_up_text_input.error,onChange:this.on_text_change,className:"form-control-sm",parent_classes:"mb-1",type:"number",loading:this.state.loading}),l.a.createElement("hr",{className:"mb-0"}),l.a.createElement(ht,{id:"paid_text_input",heading:"Paid Amount",placeholder:"Fee paid",disabled:!1,value:this.state.paid_text_input.value,error:this.state.paid_text_input.error,onChange:this.on_text_change,className:"form-control-sm",parent_classes:"mb-1",type:"number",loading:this.state.loading})),l.a.createElement("div",{className:"col-lg-6 col-md-6"},this.state.loading?l.a.createElement(nt.SkeletonTheme,{color:"#ffffff",highlightColor:"#f2f2f2"},l.a.createElement(lt.a,{className:"my-1",count:1,height:15,width:80}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement(lt.a,{className:"my-2",count:5,height:30})),l.a.createElement("div",{className:"col-6"},l.a.createElement(lt.a,{className:"my-2",count:5,height:30})))):l.a.createElement("div",{className:"table-responsive px-1"},l.a.createElement("table",{className:"table table-sm table-bordered table-hover mb-0"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"border-0"},"Appointment charges"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Consultancy"),l.a.createElement("td",null,this.state.consultancy_fee_text_input.value)),l.a.createElement("tr",null,l.a.createElement("td",null,"Follow up"),l.a.createElement("td",null,this.state.follow_up_text_input.value)),l.a.createElement("tr",null,l.a.createElement("td",null,"Discount"),l.a.createElement("td",null,this.state.discount_text_input.value)),l.a.createElement("tr",null,l.a.createElement("td",{className:"font-weight-bold"},"Total"),l.a.createElement("td",{className:"font-weight-bold"},this.state.total)),l.a.createElement("tr",null,l.a.createElement("td",null,"Balance"),l.a.createElement("td",null,this.state.balance))))))),l.a.createElement("hr",null),l.a.createElement("div",{className:"d-none"},l.a.createElement("div",{className:"row px-3 py-5",ref:function(t){return e.componentRef=t}},l.a.createElement("div",{className:"col-12 row"},l.a.createElement("div",{className:"col-6"},l.a.createElement("img",{src:wn.a,className:"img-fluid",alt:"logo"})),l.a.createElement("div",{className:"col-6"},this.state.data?l.a.createElement("div",{className:"table-responsive card"},l.a.createElement("table",{className:"table table-hover mb-0"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1 font-weight-bold"},"MRN#"),l.a.createElement("td",{className:"py-1"},this.state.data.patient.mrn)),l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1 font-weight-bold"},"Patient"),l.a.createElement("td",{className:"py-1"},"".concat(Ft(this.state.data.patient.first_name)," ").concat(Ft(this.state.data.patient.last_name)))),l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1 font-weight-bold"},"Contact"),l.a.createElement("td",{className:"py-1"},"".concat(this.state.data.patient.phone_number))),l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1 font-weight-bold"},"Doctor"),l.a.createElement("td",{className:"py-1"},"".concat(Ft(this.state.data.doctor.first_name)," ").concat(Ft(this.state.data.doctor.last_name)))),l.a.createElement("tr",null,l.a.createElement("td",{className:"py-1 font-weight-bold"},"Date"),l.a.createElement("td",{className:"py-1"},"".concat(Tt()(Rt(this.state.data.appointment_date),"YYYY-MM-DDThh:mm:ss").format("LLLL"))))))):l.a.createElement("span",null,"Cannot fetch user data"))),l.a.createElement("div",{className:"table-responsive px-1 row col-12 mt-2"},l.a.createElement("h2",{className:"font-weight-bold"},"Charges"),l.a.createElement("table",{className:"table table-sm table-bordered table-hover mb-0"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Consultancy"),l.a.createElement("td",null,this.state.consultancy_fee_text_input.value)),l.a.createElement("tr",null,l.a.createElement("td",null,"Follow up"),l.a.createElement("td",null,this.state.follow_up_text_input.value)),l.a.createElement("tr",null,l.a.createElement("td",null,"Discount"),l.a.createElement("td",null,this.state.discount_text_input.value)),l.a.createElement("tr",null,l.a.createElement("td",{className:"font-weight-bold"},"Total"),l.a.createElement("td",{className:"font-weight-bold"},this.state.total)))),l.a.createElement("h2",{className:"font-weight-bold mt-2"},"Payment"),l.a.createElement("table",{className:"table table-sm table-bordered table-hover mb-0 mt-2"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Paid"),l.a.createElement("td",null,this.state.paid_text_input.value)),l.a.createElement("tr",null,l.a.createElement("td",null,"Balance"),l.a.createElement("td",null,this.state.balance)))),l.a.createElement("span",{className:"text-muted"},"- Invoice date-time ",Tt()(new Date).format("LLL")))))),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("button",{type:"button",className:"btn bg-dark btn-labeled btn-labeled-right pr-5",style:{textTransform:"inherit"},onClick:this.handle_save_button_click,disabled:this.state.loading},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-floppy-disk"})),"Save"),l.a.createElement("button",{type:"button",className:"btn bg-danger btn-labeled btn-labeled-right pr-5",style:{textTransform:"inherit"},onClick:this.props.toggle_modal},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-cross"})),"Cancel")))}}]),a}(n.Component),Rn=Object(i.b)(null,{notify:bt,update_appointment:$e,load_todays_appointments:Ke,clear_todays_appointments:We})(Fn),Bn=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).load_data=function(){if(localStorage.getItem("Gh65$p3a008#2C"))n.setState({search_date:{value:localStorage.getItem("Gh65$p3a008#2C")}},(function(){return n.props.load_todays_appointments(n.state.search_date.value)}));else{var e=new Date(n.state.search_date.value);n.props.load_todays_appointments(new Date(e.getTime()+6e4*e.getTimezoneOffset()).toISOString()),localStorage.setItem("Gh65$p3a008#2C",n.state.search_date.value)}},n.populate_doctors=function(e){e.length>=1?n.render_users(e,"Doctor"):n.setState({doctors:[]})},n.populate_patient=function(e){e.length>=1?n.render_users(e,"Patient"):n.setState({patients:[]})},n.on_selected_changed=function(e,t){if(null!==e)switch(e.id){case"location_selection":n.setState({user_blood_group:{value:e.label}});break;case"status_selection":n.setState({search_status:{value:e.label}});break;case"doctor_selection":n.setState({search_doctor:{value:e.reference}});break;case"patient_selection":n.setState({search_patient:{value:e.reference}})}else switch(t){case"location_selection":n.setState({user_blood_group:{value:""}});break;case"status_selection":n.setState({search_status:{value:""}});break;case"doctor_selection":n.setState({search_doctor:{value:""}});break;case"patient_selection":n.setState({search_patient:{value:""}})}},n.request_user=function(e){n.setState({user_preview_modal_visibility:!0},(function(){Pe(e).then((function(e){n.setState({user_modal_props:e.data.payload.user})})).catch((function(e){console.log("failed to fetch user",e)}))}))},n.renderDataInRows=function(e){if(null!==e)return e.map((function(e,t){var a={appointment_description:e.appointment_description,appointment_comments:e.appointment_comments};return l.a.createElement(Pn,{key:t,row_data:e,hidden_data:a,toggle_consultancy_modal:n.toggle_consultancy_modal,toggle_procedure_modal:n.openProcedureModalHandler,toggle_invoice_modal:n.openInvoiceModalHandler,toggle_user_view_modal:n.request_user,columns:"8"})}))},n.openProcedureModalHandler=function(e){n.setState({procedure_modal_visibility:!0,selected_appointment_id:e})},n.closeProcedureModalHandler=function(e){n.setState({procedure_modal_visibility:!1,prev_procedure_list:null,data:null})},n.invoiceVisitIdHandler=function(e){n.setState({invoiceVisitId:e})},n.UpdateProcedureListHandler=function(e){n.setState({prevProcedureList:e})},n.open_new_appointment_modal=function(){n.setState({new_appointment_modal_visibility:!0})},n.openInvoiceModalHandler=function(e){n.setState({invoice_modal_visibility:!0,appointment_invoice_id:e})},n.closeInvoiceModalHandler=function(){n.setState({invoice_modal_visibility:!1})},n.close_new_appointment_modal=function(){n.setState({new_appointment_modal_visibility:!1})},n.call_back_new_appointment_modal=function(){n.setState({new_appointment_modal_visibility:!1,data:null})},n.set_filters=function(){n.setState({filtered_data:null},(function(){for(var e=""!==n.state.search_patient.value,t=""!==n.state.search_doctor.value,a=""!==n.state.search_status.value,l=[],r=0;r<n.state.data.length;++r)e||t||!a?e||!t||a?!e&&t&&a?n.state.search_doctor.value===n.state.data[r].doctor.id&&n.state.search_status.value.toLowerCase()===n.state.data[r].appointment_status.info&&l.push(n.state.data[r]):!e||t||a?e&&!t&&a?n.state.search_patient.value===n.state.data[r].patient.id&&n.state.search_status.value.toLowerCase()===n.state.data[r].appointment_status.info&&l.push(n.state.data[r]):e&&t&&!a?n.state.search_patient.value===n.state.data[r].patient.id&&n.state.search_doctor.value===n.state.data[r].doctor.id&&l.push(n.state.data[r]):e&&t&&a&&n.state.search_patient.value===n.state.data[r].patient.id&&n.state.search_doctor.value===n.state.data[r].doctor.id&&n.state.search_status.value.toLowerCase()===n.state.data[r].appointment_status.info&&l.push(n.state.data[r]):n.state.search_patient.value===n.state.data[r].patient.id&&l.push(n.state.data[r]):n.state.search_doctor.value===n.state.data[r].doctor.id&&l.push(n.state.data[r]):n.state.search_status.value.toLowerCase()===n.state.data[r].appointment_status.info&&l.push(n.state.data[r]);var o=!0;["search_patient","search_doctor","search_status"].map((function(e,t){return""!==n.state[e].value&&(o=!1,n.setState({filtered_data:l})),""})),o&&n.setState({filtered_data:n.state.data})}))},n.todays_date_change=function(e){if(""===e)n.setState({search_date:{value:""}});else{var t=null;try{t=e.format("ll"),n.props.clear_todays_appointments(),n.props.load_todays_appointments(t),localStorage.setItem("Gh65$p3a008#2C",t)}catch(a){t=""}finally{n.setState({search_date:{value:t}})}}},n.toggle_consultancy_modal=function(e){n.setState({consultancy_modal_visibility:!n.state.consultancy_modal_visibility},(function(){n.state.consultancy_modal_visibility&&n.setState({selected_appointment_id:e})}))},n.state={data:null,filtered_data:null,doctors:[],patients:[],new_appointment_modal_visibility:!1,procedure_modal_visibility:!1,consultancy_modal_visibility:!1,prev_procedure_list:null,user_preview_modal_visibility:!1,new_patient_modal_visibility:!1,invoice_modal_visibility:!1,user_modal_props:null,invoice_data:null,appointment_invoice_id:"",selected_appointment_id:null,search_doctor:{value:""},search_patient:{value:""},search_status:{value:""},search_date:{value:Tt()(new Date).format("ll")}},n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){var e=[l.a.createElement(d.b,{to:_,className:"breadcrumb-item"},l.a.createElement("i",{className:"icon-user mr-2"}),"Reception"),l.a.createElement("span",{className:"breadcrumb-item active"},"Today's Patient")];this.props.set_active_page(e),this.load_data()}},{key:"request",value:function(){var e=Object(je.a)(Ce.a.mark((function e(t,a){var n,l=arguments;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>2&&void 0!==l[2]?l[2]:"post",e.prev=1,"post"!==n){e.next=8;break}return e.next=5,Oe(a,t);case 5:return e.abrupt("return",e.sent);case 8:if("get"!==n){e.next=12;break}return e.next=11,De(a);case 11:return e.abrupt("return",e.sent);case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(1),bt("error",0,"Server is not responding! Please try again later"),e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render_users",value:function(){var e=Object(je.a)(Ce.a.mark((function e(t,a){var n,l,r,o,c;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(q,"?search=").concat(t,"&role=").concat(a),e.prev=1,e.next=4,this.request({},n,"get");case 4:if(l=e.sent,r=[],"Doctor"===a)for(o=0;o<l.data.payload.count;++o)c=l.data.payload.users[o],r.push({id:"".concat(a.toLowerCase(),"_selection"),reference:c.doctor._id,label:"".concat(Ft(c.doctor.first_name)," ").concat(Ft(c.doctor.last_name)," | ").concat(c.details.specialities.toString())});"Patient"===a?this.setState({patients:r}):"Doctor"===a&&this.setState({doctors:r}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("error",e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(e){e.todays_patient&&this.setState({filtered_data:e.todays_patient.data,data:e.todays_patient.data})}},{key:"render",value:function(){var e=this,t=l.a.createElement("div",{className:""},l.a.createElement("div",{className:"mt-2 card px-2 py-2"},l.a.createElement(_n,null)),l.a.createElement("div",{className:"mt-2 card px-2 py-2"},l.a.createElement(_n,null)));null!=this.state.filtered_data&&(t=this.state.filtered_data.length>0?l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"table-responsive mt-2 card mb-0 pb-0"},l.a.createElement("table",{className:"table table-hover mb-0"},l.a.createElement("tbody",null,this.renderDataInRows(this.state.filtered_data))))):l.a.createElement("div",{className:"alert alert-info mt-2",style:{marginBottom:"0px"}},l.a.createElement("strong",null,"Info!")," No Appointments found."));var a=function(e){return l.a.createElement(rn.z.Menu,e,l.a.createElement("div",{className:"bg-light text-teal-400",style:{width:"400px"}},e.children))},r=l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-10"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"font-weight-semibold"},"Doctors"),l.a.createElement(mt.a,{id:"doctor_selection",isClearable:!0,components:{Menu:a},menuPlacement:"auto",options:this.state.doctors,classNamePrefix:"form-control",placeholder:"Search Doctor",onInputChange:function(t){return e.populate_doctors(t)},onChange:function(t){return e.on_selected_changed(t,"doctor_selection")}}))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"font-weight-semibold"},"Patients"),l.a.createElement(mt.a,{id:"patient_selection",isClearable:!0,components:{Menu:a},menuPlacement:"auto",options:this.state.patients,classNamePrefix:"form-control",placeholder:"Search Patient",onInputChange:function(t){return e.populate_patient(t)},onChange:function(t){return e.on_selected_changed(t,"patient_selection")}}))),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"font-weight-semibold"},"Status"),l.a.createElement(mt.a,{isClearable:!0,options:wt,placeholder:"Status",onChange:function(t){return e.on_selected_changed(t,"status_selection")},onClick:function(){return console.log("visit status")}}))))),l.a.createElement("div",{className:"col-md-2 d-flex justify-content-center align-items-end mb-2 pb-2"},l.a.createElement(on.a,{trigger:l.a.createElement("button",{type:"button",className:"btn btn-dark btn-icon mr-1 ",style:{textTransform:"inherit"},onClick:this.set_filters},l.a.createElement("i",{className:"icon-filter4"})),content:l.a.createElement("div",{className:"card card-body bg-dark text-white shadow mb-1 py-1"},"Filter records"),flowing:!0,position:"top center"}),l.a.createElement(on.a,{trigger:l.a.createElement("button",{type:"button",className:"btn bg-teal-400 btn-icon mr-1 btn-block",style:{textTransform:"inherit"},onClick:this.open_new_appointment_modal},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-plus3"}))),content:l.a.createElement("div",{className:"card card-body bg-teal-400 text-white shadow mb-1 py-1"},"New Appointment"),flowing:!0,position:"top center"}))),o=l.a.createElement("div",{className:"table-header-background shadow-sw"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-6 col-md-6 col-12 d-flex align-items-center"},l.a.createElement("span",{className:"text-white"},"Patients list for date"),l.a.createElement("span",{className:"badge badge-secondary ml-2 d-none d-lg-block"},this.state.search_date.value)),l.a.createElement("div",{className:"col-lg-3 d-none d-lg-block col-0"}),l.a.createElement("div",{className:"col-lg-3 col-md-6 col-12 d-flex"},l.a.createElement(_t.a,{id:"dob_text_input",onChange:this.todays_date_change,className:"clock_datatime_picker ",inputProps:{placeholder:"Select Date",width:"100%",className:"form-control bg-teal-400 border-teal-400"},input:!0,dateFormat:"ll",timeFormat:!1,closeOnSelect:!0,value:this.state.search_date.value,onClick:function(){return console.log("date select",e.state.search_date.value)}}),l.a.createElement("button",{className:"btn bg-teal-400 border-teal-400 text-teal-400 btn-sm ml-2",onClick:function(){e.props.clear_todays_appointments(),e.props.load_todays_appointments(localStorage.getItem("Gh65$p3a008#2C"))}},l.a.createElement("i",{className:"icon-search4"})))));return l.a.createElement(n.Fragment,null,r,o,!0===this.props.todays_patient.loading?l.a.createElement(_n,null):t,l.a.createElement(An,{visibility:this.state.new_appointment_modal_visibility,close:this.close_new_appointment_modal,call_back:this.call_back_new_appointment_modal,bind_function:this.open_new_appointment_modal,state:"new"}),l.a.createElement(Rn,{visibility:this.state.consultancy_modal_visibility,toggle_modal:this.toggle_consultancy_modal,appointment_id:this.state.selected_appointment_id}),l.a.createElement(Sn,{visibility:this.state.procedure_modal_visibility,appointment_id:this.state.selected_appointment_id,prev_procedure_list:this.state.prev_procedure_list,updateProcedureList:this.UpdateProcedureListHandler,procedure_backDrop:this.closeProcedureModalHandler,cancelProcedureModal:this.closeProcedureModalHandler}),l.a.createElement(Cn,{visibility:this.state.invoice_modal_visibility,appointment_id:this.state.appointment_invoice_id,close_modal:this.closeInvoiceModalHandler}),l.a.createElement(In,{visibility:this.state.user_preview_modal_visibility,modal_props:this.state.user_modal_props,on_click_back_drop:function(){return e.setState({user_preview_modal_visibility:!1,user_modal_props:null})},on_click_cancel:function(){return e.setState({user_preview_modal_visibility:!1,user_modal_props:null})}}))}}]),a}(n.Component);var zn=Object(i.b)((function(e){return{notify:e.notify,todays_patient:e.todays_patient}}),{notify:bt,set_active_page:Ue,load_todays_appointments:Ke,clear_todays_appointments:We})(Object(p.h)(Bn)),qn=(a(1095),function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var r;return Object(x.a)(this,a),(r=t.call(this,e)).toggle_row=function(){r.state.toggle?r.setState({toggle:!1,toggle_icon:"icon-eye-plus"}):r.setState({toggle:!0,toggle_icon:"icon-eye-minus"})},r.render_read_only_cols=function(){return Object.keys(r.state.row_data).map((function(e,t){return l.a.createElement("td",{key:t},r.state.row_data[e])}))},r.render_hidden_elements=function(){return r.state.hidden_data.map((function(e,t){return l.a.createElement("div",{key:t,className:""},e)}))},r.render_hidden_header_elements=function(){return r.state.hidden_header_elements.map((function(e,t){return l.a.createElement(n.Fragment,{key:t},e)}))},r.state={toggle:!1,toggle_icon:"icon-eye-plus",row_data:r.props.row_data,hidden_data:r.props.hidden_data,hidden_header_elements:r.props.hidden_header_elements,hidden_header_color:r.props.hidden_header_color,col_span:""},r}return Object(S.a)(a,[{key:"componentDidMount",value:function(){this.setState({col_span:this.props.columns})}},{key:"render",value:function(){return l.a.createElement(n.Fragment,null,l.a.createElement("tr",null,l.a.createElement("td",{onClick:this.toggle_row},l.a.createElement("div",{className:"slideInLeft animated"},l.a.createElement(d.b,{className:"",to:"#",onClick:this.toggle_row},l.a.createElement("i",{className:this.state.toggle_icon})))),this.render_read_only_cols()),l.a.createElement("tr",{className:""},l.a.createElement("td",{colSpan:"".concat(this.state.col_span),className:"".concat(this.state.toggle?"":"py-0")},l.a.createElement(ca.a,{isOpen:this.state.toggle},l.a.createElement("div",{className:"float-right"},l.a.createElement(d.b,{onClick:this.toggle_row,to:"#",className:"btn btn-sm btn-outline bg-teal-400 text-teal-400"},l.a.createElement("i",{className:"icon-cross3 icon-2x"}))),this.render_hidden_elements()))))}}]),a}(n.Component)),Yn=function(e){Object(C.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).on_selected_changed=function(e,t){if(console.log("e",e),null!==e)switch(t){case"gender_selection":n.setState({user_gender:{value:e.label}});break;case"patient_list":n.setState({search_patient_id:{value:e.reference}});break;case"doctor_list":n.setState({search_doctor_id:{value:e.reference}});break;case"status_list":console.log("sttaus select",e.label),n.setState({search_status:{value:e.label}})}else switch(t){case"blood_group_selection":n.setState({user_gender:{value:""}});break;case"patient_list":n.setState({search_patient_id:{value:""}});break;case"doctor_list":n.setState({search_doctor_id:{value:""}});break;case"status_list":n.setState({search_status:{value:""}})}},n.populate_patients=function(e){e.length>=3?n.render_users(e,"Patient"):n.setState({patient_list:[]})},n.populate_doctors=function(e){e.length>=3?n.render_users(e,"Doctor"):n.setState({doctor_list:[]})},n.populate_appointments=function(){var e=Object(je.a)(Ce.a.mark((function e(t){var a;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading_status:!0}),e.next=3,n.request(t,J);case 3:if(a=e.sent){e.next=6;break}return e.abrupt("return");case 6:200===a.status?n.setState({data:a.data.payload.appointments,total_records_on_this_page:a.data.payload.appointments.length,total_pages:a.data.payload.total_pages,loading_status:!1},(function(){})):(bt("info",0,a.data.message),n.setState({data:null,loading_status:!1,total_pages:0,total_records_on_this_page:0}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.on_text_field_change=function(e){switch(e.target.id){case"patient_checkbox_input":n.setState({patient_checkbox:e.target.checked});break;case"doctor_checkbox_input":n.setState({doctor_checkbox:e.target.checked})}},n.on_from_date_change=function(e){if(""===e)n.setState({date_from:{value:""}});else{var t=null;try{t=e.format("ll")}catch(a){t=""}finally{n.setState({date_from:{value:t}})}}},n.on_to_date_change=function(e){if(""===e)n.setState({date_to:{value:""}});else{var t=null;try{t=e.format("ll")}catch(a){t=""}finally{n.setState({date_to:{value:t}})}}},n.on_search_click=function(){n.setState({data:null,today:Tt()().format("LT"),page_number:0,total_records_on_this_page:0,total_pages:0},(function(){if(""!==n.state.date_from.value&&""!==n.state.date_to.value){var e={to_date:n.state.date_to.value,from_date:n.state.date_from.value,page:n.state.page_number};n.state.search_patient_id.value&&(e.patient_id=n.state.search_patient_id.value),n.state.search_doctor_id.value&&(e.doctor_id=n.state.search_doctor_id.value),n.state.search_status.value&&(e.appointment_status=n.state.search_status.value),n.populate_appointments(e)}else bt("error",0,"Please specify a range of dates")}))},n.refresh_button_click=function(){null!==n.state.previous_query.data?n.populate_appointments(n.state.previous_query.data):bt("info",0,"Select dates and click search button to search")},n.request_user=function(e){n.setState({user_preview_modal_visibility:!0},(function(){Pe(e).then((function(e){n.setState({user_modal_props:e.data.payload.user})})).catch((function(e){console.log("failed to fetch user")}))}))},n.renderDataInRows=function(){return n.state.data.map((function(e,t){var a={date_of_booking:l.a.createElement("div",{ref:function(e){n["element_".concat(t,"_ref")]=e}},e.appointment_date),time_of_booking:l.a.createElement("div",null,"Invalid date"===Tt()(e.appointment_time,"HH:mm:ss").format("LT")?"-":Tt()(e.appointment_time,"HH:mm:ss").format("LT")),patient_name:l.a.createElement("button",{className:"btn btn-outline bg-teal-400 border-teal-400 text-teal-400 btn-sm btn-block zoomIn animated",onClick:function(){return n.request_user(e.patient.id)}},Ft(e.patient.first_name)+" "+Ft(e.patient.last_name)),visit_reason:l.a.createElement("span",{className:"d-inline-block text-truncate ",style:{maxWidth:"150px"}},e.appointment_description),doctor_name:l.a.createElement("button",{className:"btn btn-outline-secondary btn-sm btn-block zoomIn animated",onClick:function(){return n.request_user(e.doctor.id)}},Ft(e.doctor.first_name)+" "+Ft(e.doctor.last_name)),visit_status:l.a.createElement("span",{className:"badge ".concat("waiting"===e.appointment_status.info?"badge-danger":"badge-primary")},e.appointment_status.info),visit_total_charges:l.a.createElement(on.a,{trigger:l.a.createElement("div",{className:""},e.total_charges),flowing:!0,position:"top center",content:l.a.createElement("div",{className:"card card-body bg-teal-400 text-white shadow mb-1 py-1"},l.a.createElement("div",{className:""},"Consultancy: ",e.appointment_charges.consultancy),l.a.createElement("div",{className:""},"Discount: ",e.appointment_charges.discount),l.a.createElement("div",{className:""},"Follow up: ",e.appointment_charges.follow_up),l.a.createElement("div",{className:""},"Procedures: ",e.appointment_charges.procedures),l.a.createElement("div",{className:""},"Paid Amount: ",e.appointment_charges.paid))})},r=[l.a.createElement("h5",{className:"font-weight-semibold"},"Reason of visit"),l.a.createElement("blockquote",{className:"blockquote blockquote-bordered py-2 pl-3 mb-0"},l.a.createElement("p",{className:"mb-1"},e.appointment_description),l.a.createElement("footer",{className:"blockquote-footer"},"Perscription"))];return l.a.createElement(qn,{key:t,row_data:a,hidden_data:r,columns:"8"})}))},n.on_previous_button_click=function(){var e=n.state.page_number-1,t=n.state.previous_query;t.data.page=e,n.setState({page_number:e},(function(){n.populate_appointments(t.data)}))},n.on_page_number_click=function(e){var t=parseInt(e.target.innerHTML)-1,a=n.state.previous_query;a.data.page=t,n.setState({page_number:t},(function(){n.populate_appointments(a.data)}))},n.on_next_button_click=function(){var e=n.state.page_number+1,t=n.state.previous_query;t.data.page=e,n.setState({page_number:e},(function(){n.populate_appointments(t.data)}))},n.state={data:null,patient_list:[],doctor_list:[],today:Tt()().format("LT"),page_number:0,total_records_on_this_page:0,total_pages:0,date_from:{value:Tt()().subtract(7,"days").format("ll")},date_to:{value:Tt()().format("ll")},search_patient_id:{value:""},search_doctor_id:{value:""},search_status:{value:""},patient_checkbox:!1,doctor_checkbox:!1,loading_status:!1,previous_query:{data:null},user_preview_modal_visibility:!1,user_modal_props:null},n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=[l.a.createElement(d.b,{to:_,className:"breadcrumb-item"},l.a.createElement("i",{className:"icon-user mr-2"}),"Reception"),l.a.createElement("span",{className:"breadcrumb-item active"},"All Apointments")];this.props.set_active_page(t),setInterval((function(){e.setState({today:Tt()().format("LT")})}),6e4),this.on_search_click()}},{key:"request",value:function(){var e=Object(je.a)(Ce.a.mark((function e(t,a){var n,l=arguments;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>2&&void 0!==l[2]?l[2]:"post",e.prev=1,"post"!==n){e.next=9;break}return this.setState({previous_query:{data:t}}),e.next=6,Oe(a,t);case 6:return e.abrupt("return",e.sent);case 9:if("get"!==n){e.next=13;break}return e.next=12,De(a);case 12:return e.abrupt("return",e.sent);case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(1),bt("error",0,"Server is not responding! Please try again later"),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,this,[[1,15]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render_users",value:function(){var e=Object(je.a)(Ce.a.mark((function e(t,a){var n,l,r,o,c;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(q,"?search=").concat(t,"&role=").concat(a),e.next=3,this.request({},n,"get");case 3:if(l=e.sent,r=[],200===l.status){for(o=0;o<l.data.payload.count;++o)c=l.data.payload.users[o],r.push({id:"".concat(a.toLowerCase(),"_list"),reference:c._id,label:"".concat(Ft(c.first_name)," ").concat(Ft(c.last_name)," | ").concat(c.phone_number," | ").concat(c.email)});"Patient"===a?this.setState({patient_list:r}):"Doctor"===a&&this.setState({doctor_list:r})}case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=l.a.createElement("div",{className:"mt-2"},l.a.createElement(nt.SkeletonTheme,{color:"#000",highlightColor:"#f2f2f2"},l.a.createElement(lt.a,{className:"my-1",count:1,height:40})),l.a.createElement(nt.SkeletonTheme,{color:"#ffffff",highlightColor:"#f2f2f2"},l.a.createElement(lt.a,{className:"my-1",count:8,height:45}))),a="";return a=null!=this.state.data?this.state.data.length>0?l.a.createElement("div",{className:"table-responsive mt-2 card mb-0 pb-0"},l.a.createElement("table",{className:"table table-hover"},l.a.createElement("thead",{className:"table-header-bg bg-dark"},l.a.createElement("tr",null,l.a.createElement("th",null),l.a.createElement("th",null,"Date"),l.a.createElement("th",null,"Time"),l.a.createElement("th",null,"Patient"),l.a.createElement("th",null,"Reasons"),l.a.createElement("th",null,"Doctor"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Charges"))),l.a.createElement("tbody",null,this.renderDataInRows()),l.a.createElement("tfoot",null,l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"4"},l.a.createElement("div",{className:"mt-2"},l.a.createElement("span",{className:"font-weight-semibold h5"},"Showing page ",this.state.page_number+1," of ",this.state.total_pages," ..."))),l.a.createElement("td",{colSpan:"4"},l.a.createElement("nav",{className:"mt-2"},l.a.createElement("ul",{className:"pagination justify-content-end"},l.a.createElement("li",{className:"page-item ".concat(0===this.state.page_number?"disabled":"")},l.a.createElement(d.b,{className:"page-link",to:"#",onClick:this.on_previous_button_click},"Previous")),this.state.total_pages>1?Array(this.state.total_pages).fill().map((function(t,a){return l.a.createElement("li",{key:a,className:"page-item"},l.a.createElement(d.b,{className:"page-link",to:"#",onClick:function(t){return e.on_page_number_click(t)}},a+1))})):"",l.a.createElement("li",{className:"page-item ".concat(this.state.page_number===this.state.total_pages-1?"disabled":"")},l.a.createElement(d.b,{className:"page-link",to:"#",onClick:this.on_next_button_click},"Next"))))))))):l.a.createElement("div",{className:"alert alert-info",style:{marginBottom:"0px"}},l.a.createElement("strong",null,"Info!")," No visits found."):l.a.createElement("div",{className:"alert alert-info mt-2",style:{marginBottom:"0px"}},l.a.createElement("strong",null,"Info!")," No data found."),l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-9"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-6"},l.a.createElement(ht,{field_type:"select",heading:"Patient",isClearable:!0,parent_classes:"mb-1",classNamePrefix:"form-control",id:"patient_list",components:{Menu:function(e){return l.a.createElement(rn.z.Menu,e,l.a.createElement("div",{className:"bg-light text-teal-400",style:{width:"400px"}},e.children))}},options:this.state.patient_list,onInputChange:function(t){return e.populate_patients(t)},onChange:function(t){return e.on_selected_changed(t,"patient_list")},placeholder:"Search patients",styles:{container:function(e){return Object(ut.a)(Object(ut.a)({},e),{},{padding:1,borderRadius:5})}}})),l.a.createElement("div",{className:"col-lg-6"},l.a.createElement(ht,{field_type:"select",heading:"Doctor",isClearable:!0,parent_classes:"mb-1",options:this.state.doctor_list,onInputChange:function(t){return e.populate_doctors(t)},onChange:function(t){return e.on_selected_changed(t,"doctor_list")},placeholder:"Search Doctor",styles:{container:function(e){return Object(ut.a)(Object(ut.a)({},e),{},{padding:1,borderRadius:5})}}})))),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(ht,{field_type:"select",heading:"Status",className:"",parent_classes:"mb-1",options:wt,classNamePrefix:"",placeholder:"Select Status",isClearable:!0,id:"status_selection",onChange:function(t){return e.on_selected_changed(t,"status_list")}}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-9"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(ht,{field_type:"date-time",heading:"From",id:"dob_text_input",onChange:this.on_from_date_change,className:"clock_datatime_picker form-control",inputProps:{placeholder:"Where from",className:"border-0 w-100"},input:!0,dateFormat:"ll",timeFormat:!1,closeOnSelect:!0,value:this.state.date_from.value})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(ht,{field_type:"date-time",heading:"To",id:"dob_text_input",onChange:this.on_to_date_change,className:"clock_datatime_picker form-control ",inputProps:{placeholder:"Where to",className:"border-0 w-100"},input:!0,dateFormat:"ll",timeFormat:!1,closeOnSelect:!0,value:this.state.date_to.value})),l.a.createElement("div",{className:"col-lg-3 d-flex align-items-end mb-3 pb-1"},l.a.createElement("button",{type:"button",className:"btn bg-dark btn-block btn-sm btn-labeled btn-labeled-right pr-5",style:{textTransform:"inherit"},onClick:function(){return e.setState({date_from:{value:""},date_to:{value:""},patient_checkbox:!1,doctor_checkbox:!1})}},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-reset"})),"Reset filters")),l.a.createElement("div",{className:"col-lg-3 d-flex align-items-end mb-3 pb-1"},l.a.createElement("button",{type:"button",className:"btn bg-teal-400 btn-labeled btn-labeled-right btn-sm pr-5 btn-block",style:{textTransform:"inherit"},onClick:this.refresh_button_click},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-reset"})),"Refresh")))),l.a.createElement("div",{className:"col-lg-3 d-flex align-items-end mb-3 pb-1"},l.a.createElement("button",{type:"button",className:"btn bg-teal-400 btn-labeled btn-labeled-right btn-sm pr-5 btn-block ",style:{textTransform:"inherit"},onClick:this.on_search_click},l.a.createElement("b",null,l.a.createElement("i",{className:"icon-search4"})),"Search")))),this.state.loading_status?t:a,l.a.createElement(In,{visibility:this.state.user_preview_modal_visibility,modal_props:this.state.user_modal_props,on_click_back_drop:function(){return e.setState({user_preview_modal_visibility:!1,user_modal_props:null})},on_click_cancel:function(){return e.setState({user_preview_modal_visibility:!1,user_modal_props:null})}}))}}]),a}(n.Component),Vn=Object(i.b)(null,{set_active_page:Ue})(Object(p.h)(Yn)),Hn=function(e){var t=e.component,a=Object(m.a)(e,["component"]);return l.a.createElement(p.b,Object.assign({},a,{render:function(e){return localStorage.getItem("user")?l.a.createElement(p.a,{to:{pathname:_,state:{from:e.location}}}):l.a.createElement(t,e)}}))},Gn=[h,b,E];var Un=function(){var e=Object(p.g)(),t=Object(n.useState)(!1),a=Object(u.a)(t,2),r=a[0],o=a[1];return Object(n.useEffect)((function(){Gn.includes(e.pathname)?o(!1):localStorage.getItem("user")?o(!0):o(!1)}),[e]),l.a.createElement(Pa,{container_type:r},l.a.createElement(p.d,null,l.a.createElement(Hn,{exact:!0,path:h,component:ft}),l.a.createElement(p.b,{exact:!0,path:b,component:Ct}),l.a.createElement(p.b,{exact:!0,path:E,component:jt}),l.a.createElement(ct,{exact:!0,path:_,component:ra}),l.a.createElement(ct,{exact:!0,path:g,component:Qt}),l.a.createElement(ct,{exact:!0,path:f,component:zn}),l.a.createElement(ct,{exact:!0,path:v,component:Vn}),l.a.createElement(ct,{exact:!0,path:y,component:gn}),l.a.createElement(ct,{exact:!0,path:N,component:Wt}),l.a.createElement(ct,{exact:!0,path:w,component:da}),l.a.createElement(ct,{exact:!0,path:k,component:Dt})),l.a.createElement(st.a,{hideProgressBar:!0}))};var Kn=function(){return console.log("app.js working"),l.a.createElement(d.a,null,l.a.createElement(Un,null))};o.a.render(l.a.createElement(i.a,{store:an},l.a.createElement(Kn,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");c?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):s(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):s(t,e)}))}}()},160:function(e,t,a){e.exports=a.p+"static/media/LOGO.21ff2f94.png"},174:function(e,t,a){},231:function(e,t,a){e.exports=a.p+"static/media/placeholder.59e6f5b8.jpg"},363:function(e,t){},485:function(e,t,a){},521:function(e,t,a){e.exports=a(1096)},526:function(e,t,a){},531:function(e,t,a){},580:function(e,t,a){},994:function(e,t){},997:function(e,t,a){}},[[521,1,2]]]);
//# sourceMappingURL=main.f6810b07.chunk.js.map